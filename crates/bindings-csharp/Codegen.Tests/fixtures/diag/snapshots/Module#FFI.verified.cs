//HintName: FFI.cs
// <auto-generated />
#nullable enable
// The runtime already defines SpacetimeDB.Internal.LocalReadOnly in Runtime\Internal\Module.cs as an empty partial type.
// This is needed so every module build doesn't generate a full LocalReadOnly type, but just adds on to the existing.
// We extend it here with generated table accessors, and just need to suppress the duplicate-type warning.
#pragma warning disable CS0436
#pragma warning disable STDB_UNSTABLE

using System.Diagnostics.CodeAnalysis;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using Internal = SpacetimeDB.Internal;
using TxContext = SpacetimeDB.Internal.TxContext;

namespace SpacetimeDB
{
    public sealed record ReducerContext : DbContext<Local>, Internal.IReducerContext
    {
        public readonly Identity Sender;
        public readonly ConnectionId? ConnectionId;
        public readonly Random Rng;
        public readonly Timestamp Timestamp;
        public readonly AuthCtx SenderAuth;

        // **Note:** must be 0..=u32::MAX
        internal int CounterUuid;

        // We need this property to be non-static for parity with client SDK.
        public Identity Identity => Internal.IReducerContext.GetIdentity();

        internal ReducerContext(
            Identity identity,
            ConnectionId? connectionId,
            Random random,
            Timestamp time,
            AuthCtx? senderAuth = null
        )
        {
            Sender = identity;
            ConnectionId = connectionId;
            Rng = random;
            Timestamp = time;
            SenderAuth = senderAuth ?? AuthCtx.BuildFromSystemTables(connectionId, identity);
            CounterUuid = 0;
        }

        /// <summary>
        /// Create a new random <see cref="Uuid"/> `v4` using the built-in RNG.
        /// </summary>
        /// <remarks>
        /// This method fills the random bytes using the context RNG.
        /// </remarks>
        /// <example>
        /// <code>
        /// var uuid = ctx.NewUuidV4();
        /// Log.Info(uuid);
        /// </code>
        /// </example>
        public Uuid NewUuidV4()
        {
            var bytes = new byte[16];
            Rng.NextBytes(bytes);
            return Uuid.FromRandomBytesV4(bytes);
        }

        /// <summary>
        /// Create a new sortable <see cref="Uuid"/> `v7` using the built-in RNG, monotonic counter,
        /// and timestamp.
        /// </summary>
        /// <returns>
        /// A newly generated <see cref="Uuid"/> `v7` that is monotonically ordered
        /// and suitable for use as a primary key or for ordered storage.
        /// </returns>
        /// <exception cref="Exception">
        /// Thrown if <see cref="Uuid"/> generation fails.
        /// </exception>
        /// <example>
        /// <code>
        /// [SpacetimeDB.Reducer]
        /// public static Guid GenerateUuidV7(ReducerContext ctx)
        /// {
        ///     Guid uuid = ctx.NewUuidV7();
        ///     Log.Info(uuid);
        /// }
        /// </code>
        /// </example>
        public Uuid NewUuidV7()
        {
            var bytes = new byte[4];
            Rng.NextBytes(bytes);
            return Uuid.FromCounterV7(ref CounterUuid, Timestamp, bytes);
        }
    }

    public sealed partial class ProcedureContext : global::SpacetimeDB.ProcedureContextBase
    {
        private readonly Local _db = new();

        internal ProcedureContext(
            Identity identity,
            ConnectionId? connectionId,
            Random random,
            Timestamp time
        )
            : base(identity, connectionId, random, time) { }

        protected override global::SpacetimeDB.LocalBase CreateLocal() => _db;

        protected override global::SpacetimeDB.ProcedureTxContextBase CreateTxContext(
            Internal.TxContext inner
        ) => _cached ??= new ProcedureTxContext(inner);

        private ProcedureTxContext? _cached;

        [Experimental("STDB_UNSTABLE")]
        public Local Db => _db;

        [Experimental("STDB_UNSTABLE")]
        public TResult WithTx<TResult>(Func<ProcedureTxContext, TResult> body) =>
            base.WithTx(tx => body((ProcedureTxContext)tx));

        [Experimental("STDB_UNSTABLE")]
        public TxOutcome<TResult> TryWithTx<TResult, TError>(
            Func<ProcedureTxContext, Result<TResult, TError>> body
        )
            where TError : Exception => base.TryWithTx(tx => body((ProcedureTxContext)tx));

        /// <summary>
        /// Create a new random <see cref="Uuid"/> `v4` using the built-in RNG.
        /// </summary>
        /// <remarks>
        /// This method fills the random bytes using the context RNG.
        /// </remarks>
        /// <example>
        /// <code>
        /// var uuid = ctx.NewUuidV4();
        /// Log.Info(uuid);
        /// </code>
        /// </example>
        public Uuid NewUuidV4()
        {
            var bytes = new byte[16];
            Rng.NextBytes(bytes);
            return Uuid.FromRandomBytesV4(bytes);
        }

        /// <summary>
        /// Create a new sortable <see cref="Uuid"/> `v7` using the built-in RNG, monotonic counter,
        /// and timestamp.
        /// </summary>
        /// <returns>
        /// A newly generated <see cref="Uuid"/> `v7` that is monotonically ordered
        /// and suitable for use as a primary key or for ordered storage.
        /// </returns>
        /// <exception cref="Exception">
        /// Thrown if UUID generation fails.
        /// </exception>
        /// <example>
        /// <code>
        /// [SpacetimeDB.Procedure]
        /// public static Guid GenerateUuidV7(ReducerContext ctx)
        /// {
        ///     Guid uuid = ctx.NewUuidV7();
        ///     Log.Info(uuid);
        /// }
        /// </code>
        /// </example>
        public Uuid NewUuidV7()
        {
            var bytes = new byte[4];
            Rng.NextBytes(bytes);
            return Uuid.FromCounterV7(ref CounterUuid, Timestamp, bytes);
        }
    }

    [Experimental("STDB_UNSTABLE")]
    public sealed class ProcedureTxContext : global::SpacetimeDB.ProcedureTxContextBase
    {
        internal ProcedureTxContext(Internal.TxContext inner)
            : base(inner) { }

        public new Local Db => (Local)base.Db;
    }

    public sealed class Local : global::SpacetimeDB.LocalBase
    {
        public global::SpacetimeDB.Internal.TableHandles.Player Player => new();
        public global::SpacetimeDB.Internal.TableHandles.TestAutoIncNotInteger TestAutoIncNotInteger =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestDefaultFieldValues TestDefaultFieldValues =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestDuplicateTableName TestDuplicateTableName =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestIndexIssues TestIndexIssues => new();
        public global::SpacetimeDB.Internal.TableHandles.TestScheduleWithMissingScheduleAtField TestScheduleWithMissingScheduleAtField =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestScheduleWithoutPrimaryKey TestScheduleWithoutPrimaryKey =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestScheduleWithoutScheduleAt TestScheduleWithoutScheduleAt =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestScheduleWithWrongPrimaryKeyType TestScheduleWithWrongPrimaryKeyType =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestScheduleWithWrongScheduleAtType TestScheduleWithWrongScheduleAtType =>
            new();
        public global::SpacetimeDB.Internal.TableHandles.TestUniqueNotEquatable TestUniqueNotEquatable =>
            new();
    }

    public sealed record ViewContext : DbContext<Internal.LocalReadOnly>, Internal.IViewContext
    {
        public Identity Sender { get; }

        internal ViewContext(Identity sender, Internal.LocalReadOnly db)
            : base(db)
        {
            Sender = sender;
        }
    }

    public sealed record AnonymousViewContext
        : DbContext<Internal.LocalReadOnly>,
            Internal.IAnonymousViewContext
    {
        internal AnonymousViewContext(Internal.LocalReadOnly db)
            : base(db) { }
    }
}

namespace SpacetimeDB.Internal.TableHandles
{
    public readonly struct Player : global::SpacetimeDB.Internal.ITableView<Player, global::Player>
    {
        public static global::Player ReadGenFields(
            System.IO.BinaryReader reader,
            global::Player row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(Player),
                ProductTypeRef: (uint)new global::Player.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "Identity",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([0])
                    )
                ],
                Constraints:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        Player,
                        global::Player
                    >.MakeUniqueConstraint(0)
                ],
                Sequences: [],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<Player, global::Player>.DoCount();

        public IEnumerable<global::Player> Iter() =>
            global::SpacetimeDB.Internal.ITableView<Player, global::Player>.DoIter();

        public global::Player Insert(global::Player row) =>
            global::SpacetimeDB.Internal.ITableView<Player, global::Player>.DoInsert(row);

        public bool Delete(global::Player row) =>
            global::SpacetimeDB.Internal.ITableView<Player, global::Player>.DoDelete(row);

        public sealed class IdentityUniqueIndex
            : UniqueIndex<Player, global::Player, SpacetimeDB.Identity, SpacetimeDB.Identity.BSATN>
        {
            internal IdentityUniqueIndex()
                : base("Player_Identity_idx_btree") { }

            // Important: don't move this to the base class.
            // C# generics don't play well with nullable types and can't accept both struct-type-based and class-type-based
            // `globalName` in one generic definition, leading to buggy `Row?` expansion for either one or another.
            public global::Player? Find(SpacetimeDB.Identity key) => FindSingle(key);

            public global::Player Update(global::Player row) => DoUpdate(row);
        }

        public IdentityUniqueIndex Identity => new();
    }

    public readonly struct TestAutoIncNotInteger
        : global::SpacetimeDB.Internal.ITableView<
            TestAutoIncNotInteger,
            global::TestAutoIncNotInteger
        >
    {
        public static global::TestAutoIncNotInteger ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestAutoIncNotInteger row
        )
        {
            if (row.AutoIncField == default)
            {
                row.AutoIncField = global::TestAutoIncNotInteger.BSATN.AutoIncFieldRW.Read(reader);
            }
            if (row.IdentityField == default)
            {
                row.IdentityField = global::TestAutoIncNotInteger.BSATN.IdentityFieldRW.Read(
                    reader
                );
            }
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestAutoIncNotInteger),
                ProductTypeRef: (uint)
                    new global::TestAutoIncNotInteger.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "IdentityField",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([1])
                    )
                ],
                Constraints:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        TestAutoIncNotInteger,
                        global::TestAutoIncNotInteger
                    >.MakeUniqueConstraint(1)
                ],
                Sequences:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        TestAutoIncNotInteger,
                        global::TestAutoIncNotInteger
                    >.MakeSequence(0),
                    global::SpacetimeDB.Internal.ITableView<
                        TestAutoIncNotInteger,
                        global::TestAutoIncNotInteger
                    >.MakeSequence(1)
                ],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestAutoIncNotInteger,
                global::TestAutoIncNotInteger
            >.DoCount();

        public IEnumerable<global::TestAutoIncNotInteger> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestAutoIncNotInteger,
                global::TestAutoIncNotInteger
            >.DoIter();

        public global::TestAutoIncNotInteger Insert(global::TestAutoIncNotInteger row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestAutoIncNotInteger,
                global::TestAutoIncNotInteger
            >.DoInsert(row);

        public bool Delete(global::TestAutoIncNotInteger row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestAutoIncNotInteger,
                global::TestAutoIncNotInteger
            >.DoDelete(row);

        public sealed class IdentityFieldUniqueIndex
            : UniqueIndex<
                TestAutoIncNotInteger,
                global::TestAutoIncNotInteger,
                string,
                SpacetimeDB.BSATN.String
            >
        {
            internal IdentityFieldUniqueIndex()
                : base("TestAutoIncNotInteger_IdentityField_idx_btree") { }

            // Important: don't move this to the base class.
            // C# generics don't play well with nullable types and can't accept both struct-type-based and class-type-based
            // `globalName` in one generic definition, leading to buggy `Row?` expansion for either one or another.
            public global::TestAutoIncNotInteger? Find(string key) => FindSingle(key);

            public global::TestAutoIncNotInteger Update(global::TestAutoIncNotInteger row) =>
                DoUpdate(row);
        }

        public IdentityFieldUniqueIndex IdentityField => new();
    }

    public readonly struct TestDefaultFieldValues
        : global::SpacetimeDB.Internal.ITableView<
            TestDefaultFieldValues,
            global::TestDefaultFieldValues
        >
    {
        public static global::TestDefaultFieldValues ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestDefaultFieldValues row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestDefaultFieldValues),
                ProductTypeRef: (uint)
                    new global::TestDefaultFieldValues.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "UniqueField",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([0])
                    )
                ],
                Constraints:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        TestDefaultFieldValues,
                        global::TestDefaultFieldValues
                    >.MakeUniqueConstraint(0)
                ],
                Sequences: [],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestDefaultFieldValues,
                global::TestDefaultFieldValues
            >.DoCount();

        public IEnumerable<global::TestDefaultFieldValues> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestDefaultFieldValues,
                global::TestDefaultFieldValues
            >.DoIter();

        public global::TestDefaultFieldValues Insert(global::TestDefaultFieldValues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestDefaultFieldValues,
                global::TestDefaultFieldValues
            >.DoInsert(row);

        public bool Delete(global::TestDefaultFieldValues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestDefaultFieldValues,
                global::TestDefaultFieldValues
            >.DoDelete(row);
    }

    public readonly struct TestDuplicateTableName
        : global::SpacetimeDB.Internal.ITableView<
            TestDuplicateTableName,
            global::TestDuplicateTableName
        >
    {
        public static global::TestDuplicateTableName ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestDuplicateTableName row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestDuplicateTableName),
                ProductTypeRef: (uint)
                    new global::TestDuplicateTableName.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [],
                Indexes: [],
                Constraints: [],
                Sequences: [],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestDuplicateTableName,
                global::TestDuplicateTableName
            >.DoCount();

        public IEnumerable<global::TestDuplicateTableName> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestDuplicateTableName,
                global::TestDuplicateTableName
            >.DoIter();

        public global::TestDuplicateTableName Insert(global::TestDuplicateTableName row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestDuplicateTableName,
                global::TestDuplicateTableName
            >.DoInsert(row);

        public bool Delete(global::TestDuplicateTableName row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestDuplicateTableName,
                global::TestDuplicateTableName
            >.DoDelete(row);
    }

    public readonly struct TestIndexIssues
        : global::SpacetimeDB.Internal.ITableView<TestIndexIssues, global::TestIndexIssues>
    {
        public static global::TestIndexIssues ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestIndexIssues row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestIndexIssues),
                ProductTypeRef: (uint)
                    new global::TestIndexIssues.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "TestIndexWithoutColumns",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([])
                    ),
                    new(
                        Name: null,
                        AccessorName: "TestIndexWithEmptyColumns",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([])
                    ),
                    new(
                        Name: null,
                        AccessorName: "TestUnknownColumns",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([])
                    ),
                    new(
                        Name: null,
                        AccessorName: "TestUnexpectedColumns",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([0])
                    )
                ],
                Constraints: [],
                Sequences: [],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestIndexIssues,
                global::TestIndexIssues
            >.DoCount();

        public IEnumerable<global::TestIndexIssues> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestIndexIssues,
                global::TestIndexIssues
            >.DoIter();

        public global::TestIndexIssues Insert(global::TestIndexIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestIndexIssues,
                global::TestIndexIssues
            >.DoInsert(row);

        public bool Delete(global::TestIndexIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestIndexIssues,
                global::TestIndexIssues
            >.DoDelete(row);

        public sealed class TestIndexWithoutColumnsIndex()
            : SpacetimeDB.Internal.IndexBase<global::TestIndexIssues>(
                "TestIndexIssues__idx_btree"
            ) { }

        public TestIndexWithoutColumnsIndex TestIndexWithoutColumns => new();

        public sealed class TestIndexWithEmptyColumnsIndex()
            : SpacetimeDB.Internal.IndexBase<global::TestIndexIssues>(
                "TestIndexIssues__idx_btree"
            ) { }

        public TestIndexWithEmptyColumnsIndex TestIndexWithEmptyColumns => new();

        public sealed class TestUnknownColumnsIndex()
            : SpacetimeDB.Internal.IndexBase<global::TestIndexIssues>(
                "TestIndexIssues__idx_btree"
            ) { }

        public TestUnknownColumnsIndex TestUnknownColumns => new();

        public sealed class TestUnexpectedColumnsIndex()
            : SpacetimeDB.Internal.IndexBase<global::TestIndexIssues>(
                "TestIndexIssues_SelfIndexingColumn_idx_btree"
            )
        {
            public IEnumerable<global::TestIndexIssues> Filter(int SelfIndexingColumn) =>
                DoFilter(
                    new SpacetimeDB.Internal.BTreeIndexBounds<int, SpacetimeDB.BSATN.I32>(
                        SelfIndexingColumn
                    )
                );

            public ulong Delete(int SelfIndexingColumn) =>
                DoDelete(
                    new SpacetimeDB.Internal.BTreeIndexBounds<int, SpacetimeDB.BSATN.I32>(
                        SelfIndexingColumn
                    )
                );

            public IEnumerable<global::TestIndexIssues> Filter(
                global::SpacetimeDB.Bound<int> SelfIndexingColumn
            ) =>
                DoFilter(
                    new SpacetimeDB.Internal.BTreeIndexBounds<int, SpacetimeDB.BSATN.I32>(
                        SelfIndexingColumn
                    )
                );

            public ulong Delete(global::SpacetimeDB.Bound<int> SelfIndexingColumn) =>
                DoDelete(
                    new SpacetimeDB.Internal.BTreeIndexBounds<int, SpacetimeDB.BSATN.I32>(
                        SelfIndexingColumn
                    )
                );
        }

        public TestUnexpectedColumnsIndex TestUnexpectedColumns => new();
    }

    public readonly struct TestScheduleWithMissingScheduleAtField
        : global::SpacetimeDB.Internal.ITableView<
            TestScheduleWithMissingScheduleAtField,
            global::TestScheduleIssues
        >
    {
        public static global::TestScheduleIssues ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestScheduleIssues row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestScheduleWithMissingScheduleAtField),
                ProductTypeRef: (uint)
                    new global::TestScheduleIssues.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [],
                Indexes: [],
                Constraints: [],
                Sequences: [],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithMissingScheduleAtField,
                global::TestScheduleIssues
            >.DoCount();

        public IEnumerable<global::TestScheduleIssues> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithMissingScheduleAtField,
                global::TestScheduleIssues
            >.DoIter();

        public global::TestScheduleIssues Insert(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithMissingScheduleAtField,
                global::TestScheduleIssues
            >.DoInsert(row);

        public bool Delete(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithMissingScheduleAtField,
                global::TestScheduleIssues
            >.DoDelete(row);
    }

    public readonly struct TestScheduleWithoutPrimaryKey
        : global::SpacetimeDB.Internal.ITableView<
            TestScheduleWithoutPrimaryKey,
            global::TestScheduleIssues
        >
    {
        public static global::TestScheduleIssues ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestScheduleIssues row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestScheduleWithoutPrimaryKey),
                ProductTypeRef: (uint)
                    new global::TestScheduleIssues.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [],
                Indexes: [],
                Constraints: [],
                Sequences: [],
                Schedule: global::SpacetimeDB.Internal.ITableView<
                    TestScheduleWithoutPrimaryKey,
                    global::TestScheduleIssues
                >.MakeSchedule("DummyScheduledReducer", 3),
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutPrimaryKey,
                global::TestScheduleIssues
            >.DoCount();

        public IEnumerable<global::TestScheduleIssues> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutPrimaryKey,
                global::TestScheduleIssues
            >.DoIter();

        public global::TestScheduleIssues Insert(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutPrimaryKey,
                global::TestScheduleIssues
            >.DoInsert(row);

        public bool Delete(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutPrimaryKey,
                global::TestScheduleIssues
            >.DoDelete(row);
    }

    public readonly struct TestScheduleWithoutScheduleAt
        : global::SpacetimeDB.Internal.ITableView<
            TestScheduleWithoutScheduleAt,
            global::TestScheduleIssues
        >
    {
        public static global::TestScheduleIssues ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestScheduleIssues row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestScheduleWithoutScheduleAt),
                ProductTypeRef: (uint)
                    new global::TestScheduleIssues.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [1],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "IdCorrectType",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([1])
                    )
                ],
                Constraints:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        TestScheduleWithoutScheduleAt,
                        global::TestScheduleIssues
                    >.MakeUniqueConstraint(1)
                ],
                Sequences: [],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutScheduleAt,
                global::TestScheduleIssues
            >.DoCount();

        public IEnumerable<global::TestScheduleIssues> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutScheduleAt,
                global::TestScheduleIssues
            >.DoIter();

        public global::TestScheduleIssues Insert(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutScheduleAt,
                global::TestScheduleIssues
            >.DoInsert(row);

        public bool Delete(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithoutScheduleAt,
                global::TestScheduleIssues
            >.DoDelete(row);

        public sealed class IdCorrectTypeUniqueIndex
            : UniqueIndex<
                TestScheduleWithoutScheduleAt,
                global::TestScheduleIssues,
                int,
                SpacetimeDB.BSATN.I32
            >
        {
            internal IdCorrectTypeUniqueIndex()
                : base("TestScheduleWithoutScheduleAt_IdCorrectType_idx_btree") { }

            // Important: don't move this to the base class.
            // C# generics don't play well with nullable types and can't accept both struct-type-based and class-type-based
            // `globalName` in one generic definition, leading to buggy `Row?` expansion for either one or another.
            public global::TestScheduleIssues? Find(int key) => FindSingle(key);

            public global::TestScheduleIssues Update(global::TestScheduleIssues row) =>
                DoUpdate(row);
        }

        public IdCorrectTypeUniqueIndex IdCorrectType => new();
    }

    public readonly struct TestScheduleWithWrongPrimaryKeyType
        : global::SpacetimeDB.Internal.ITableView<
            TestScheduleWithWrongPrimaryKeyType,
            global::TestScheduleIssues
        >
    {
        public static global::TestScheduleIssues ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestScheduleIssues row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestScheduleWithWrongPrimaryKeyType),
                ProductTypeRef: (uint)
                    new global::TestScheduleIssues.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [0],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "IdWrongType",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([0])
                    )
                ],
                Constraints:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        TestScheduleWithWrongPrimaryKeyType,
                        global::TestScheduleIssues
                    >.MakeUniqueConstraint(0)
                ],
                Sequences: [],
                Schedule: global::SpacetimeDB.Internal.ITableView<
                    TestScheduleWithWrongPrimaryKeyType,
                    global::TestScheduleIssues
                >.MakeSchedule("DummyScheduledReducer", 3),
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongPrimaryKeyType,
                global::TestScheduleIssues
            >.DoCount();

        public IEnumerable<global::TestScheduleIssues> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongPrimaryKeyType,
                global::TestScheduleIssues
            >.DoIter();

        public global::TestScheduleIssues Insert(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongPrimaryKeyType,
                global::TestScheduleIssues
            >.DoInsert(row);

        public bool Delete(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongPrimaryKeyType,
                global::TestScheduleIssues
            >.DoDelete(row);

        public sealed class IdWrongTypeUniqueIndex
            : UniqueIndex<
                TestScheduleWithWrongPrimaryKeyType,
                global::TestScheduleIssues,
                string,
                SpacetimeDB.BSATN.String
            >
        {
            internal IdWrongTypeUniqueIndex()
                : base("TestScheduleWithWrongPrimaryKeyType_IdWrongType_idx_btree") { }

            // Important: don't move this to the base class.
            // C# generics don't play well with nullable types and can't accept both struct-type-based and class-type-based
            // `globalName` in one generic definition, leading to buggy `Row?` expansion for either one or another.
            public global::TestScheduleIssues? Find(string key) => FindSingle(key);

            public global::TestScheduleIssues Update(global::TestScheduleIssues row) =>
                DoUpdate(row);
        }

        public IdWrongTypeUniqueIndex IdWrongType => new();
    }

    public readonly struct TestScheduleWithWrongScheduleAtType
        : global::SpacetimeDB.Internal.ITableView<
            TestScheduleWithWrongScheduleAtType,
            global::TestScheduleIssues
        >
    {
        public static global::TestScheduleIssues ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestScheduleIssues row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestScheduleWithWrongScheduleAtType),
                ProductTypeRef: (uint)
                    new global::TestScheduleIssues.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [1],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "IdCorrectType",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([1])
                    )
                ],
                Constraints:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        TestScheduleWithWrongScheduleAtType,
                        global::TestScheduleIssues
                    >.MakeUniqueConstraint(1)
                ],
                Sequences: [],
                Schedule: global::SpacetimeDB.Internal.ITableView<
                    TestScheduleWithWrongScheduleAtType,
                    global::TestScheduleIssues
                >.MakeSchedule("DummyScheduledReducer", 2),
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongScheduleAtType,
                global::TestScheduleIssues
            >.DoCount();

        public IEnumerable<global::TestScheduleIssues> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongScheduleAtType,
                global::TestScheduleIssues
            >.DoIter();

        public global::TestScheduleIssues Insert(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongScheduleAtType,
                global::TestScheduleIssues
            >.DoInsert(row);

        public bool Delete(global::TestScheduleIssues row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestScheduleWithWrongScheduleAtType,
                global::TestScheduleIssues
            >.DoDelete(row);

        public sealed class IdCorrectTypeUniqueIndex
            : UniqueIndex<
                TestScheduleWithWrongScheduleAtType,
                global::TestScheduleIssues,
                int,
                SpacetimeDB.BSATN.I32
            >
        {
            internal IdCorrectTypeUniqueIndex()
                : base("TestScheduleWithWrongScheduleAtType_IdCorrectType_idx_btree") { }

            // Important: don't move this to the base class.
            // C# generics don't play well with nullable types and can't accept both struct-type-based and class-type-based
            // `globalName` in one generic definition, leading to buggy `Row?` expansion for either one or another.
            public global::TestScheduleIssues? Find(int key) => FindSingle(key);

            public global::TestScheduleIssues Update(global::TestScheduleIssues row) =>
                DoUpdate(row);
        }

        public IdCorrectTypeUniqueIndex IdCorrectType => new();
    }

    public readonly struct TestUniqueNotEquatable
        : global::SpacetimeDB.Internal.ITableView<
            TestUniqueNotEquatable,
            global::TestUniqueNotEquatable
        >
    {
        public static global::TestUniqueNotEquatable ReadGenFields(
            System.IO.BinaryReader reader,
            global::TestUniqueNotEquatable row
        )
        {
            return row;
        }

        public static SpacetimeDB.Internal.RawTableDefV9 MakeTableDesc(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                Name: nameof(TestUniqueNotEquatable),
                ProductTypeRef: (uint)
                    new global::TestUniqueNotEquatable.BSATN().GetAlgebraicType(registrar).Ref_,
                PrimaryKey: [1],
                Indexes:
                [
                    new(
                        Name: null,
                        AccessorName: "UniqueField",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([0])
                    ),
                    new(
                        Name: null,
                        AccessorName: "PrimaryKeyField",
                        Algorithm: new SpacetimeDB.Internal.RawIndexAlgorithm.BTree([1])
                    )
                ],
                Constraints:
                [
                    global::SpacetimeDB.Internal.ITableView<
                        TestUniqueNotEquatable,
                        global::TestUniqueNotEquatable
                    >.MakeUniqueConstraint(0),
                    global::SpacetimeDB.Internal.ITableView<
                        TestUniqueNotEquatable,
                        global::TestUniqueNotEquatable
                    >.MakeUniqueConstraint(1)
                ],
                Sequences: [],
                Schedule: null,
                TableType: SpacetimeDB.Internal.TableType.User,
                TableAccess: SpacetimeDB.Internal.TableAccess.Private
            );

        public ulong Count =>
            global::SpacetimeDB.Internal.ITableView<
                TestUniqueNotEquatable,
                global::TestUniqueNotEquatable
            >.DoCount();

        public IEnumerable<global::TestUniqueNotEquatable> Iter() =>
            global::SpacetimeDB.Internal.ITableView<
                TestUniqueNotEquatable,
                global::TestUniqueNotEquatable
            >.DoIter();

        public global::TestUniqueNotEquatable Insert(global::TestUniqueNotEquatable row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestUniqueNotEquatable,
                global::TestUniqueNotEquatable
            >.DoInsert(row);

        public bool Delete(global::TestUniqueNotEquatable row) =>
            global::SpacetimeDB.Internal.ITableView<
                TestUniqueNotEquatable,
                global::TestUniqueNotEquatable
            >.DoDelete(row);

        public sealed class PrimaryKeyFieldUniqueIndex
            : UniqueIndex<
                TestUniqueNotEquatable,
                global::TestUniqueNotEquatable,
                TestEnumWithExplicitValues,
                SpacetimeDB.BSATN.Enum<TestEnumWithExplicitValues>
            >
        {
            internal PrimaryKeyFieldUniqueIndex()
                : base("TestUniqueNotEquatable_PrimaryKeyField_idx_btree") { }

            // Important: don't move this to the base class.
            // C# generics don't play well with nullable types and can't accept both struct-type-based and class-type-based
            // `globalName` in one generic definition, leading to buggy `Row?` expansion for either one or another.
            public global::TestUniqueNotEquatable? Find(TestEnumWithExplicitValues key) =>
                FindSingle(key);

            public global::TestUniqueNotEquatable Update(global::TestUniqueNotEquatable row) =>
                DoUpdate(row);
        }

        public PrimaryKeyFieldUniqueIndex PrimaryKeyField => new();
    }
}

sealed class view_def_no_contextViewDispatcher : global::SpacetimeDB.Internal.IView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_no_context",
            Index: 0,
            IsPublic: true,
            IsAnonymous: false,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.List<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefNoContext((SpacetimeDB.ViewContext)ctx);
            SpacetimeDB.BSATN.List<Player, Player.BSATN> returnRW = new();
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            returnRW.Write(writer, returnValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_def_no_context': " + e);
            throw;
        }
    }
}

sealed class view_def_no_publicViewDispatcher : global::SpacetimeDB.Internal.IView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_no_public",
            Index: 1,
            IsPublic: false,
            IsAnonymous: false,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.List<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefNoPublic((SpacetimeDB.ViewContext)ctx);
            SpacetimeDB.BSATN.List<Player, Player.BSATN> returnRW = new();
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            returnRW.Write(writer, returnValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_def_no_public': " + e);
            throw;
        }
    }
}

sealed class view_def_wrong_contextViewDispatcher : global::SpacetimeDB.Internal.IView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_wrong_context",
            Index: 2,
            IsPublic: true,
            IsAnonymous: false,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.List<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefWrongContext((SpacetimeDB.ViewContext)ctx);
            SpacetimeDB.BSATN.List<Player, Player.BSATN> returnRW = new();
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            returnRW.Write(writer, returnValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_def_wrong_context': " + e);
            throw;
        }
    }
}

sealed class view_def_wrong_returnViewDispatcher : global::SpacetimeDB.Internal.IView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_wrong_return",
            Index: 3,
            IsPublic: true,
            IsAnonymous: false,
            Params: [],
            ReturnType: new Player.BSATN().GetAlgebraicType(registrar)
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefWrongReturn((SpacetimeDB.ViewContext)ctx);
            Player.BSATN returnRW = new();
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            returnRW.Write(writer, returnValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_def_wrong_return': " + e);
            throw;
        }
    }
}

sealed class view_no_deleteViewDispatcher : global::SpacetimeDB.Internal.IView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_no_delete",
            Index: 4,
            IsPublic: true,
            IsAnonymous: false,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.ValueOption<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewNoDelete((SpacetimeDB.ViewContext)ctx);
            var listSerializer = SpacetimeDB.BSATN.ValueOption<
                Player,
                Player.BSATN
            >.GetListSerializer();
            var listValue = ModuleRegistration.ToListOrEmpty(returnValue);
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            listSerializer.Write(writer, listValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_no_delete': " + e);
            throw;
        }
    }
}

sealed class view_no_insertViewDispatcher : global::SpacetimeDB.Internal.IView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_no_insert",
            Index: 5,
            IsPublic: true,
            IsAnonymous: false,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.ValueOption<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewNoInsert((SpacetimeDB.ViewContext)ctx);
            var listSerializer = SpacetimeDB.BSATN.ValueOption<
                Player,
                Player.BSATN
            >.GetListSerializer();
            var listValue = ModuleRegistration.ToListOrEmpty(returnValue);
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            listSerializer.Write(writer, listValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_no_insert': " + e);
            throw;
        }
    }
}

sealed class view_def_index_no_mutationViewDispatcher : global::SpacetimeDB.Internal.IAnonymousView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeAnonymousViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_index_no_mutation",
            Index: 0,
            IsPublic: true,
            IsAnonymous: true,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.ValueOption<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IAnonymousViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefIndexNoMutation((SpacetimeDB.AnonymousViewContext)ctx);
            var listSerializer = SpacetimeDB.BSATN.ValueOption<
                Player,
                Player.BSATN
            >.GetListSerializer();
            var listValue = ModuleRegistration.ToListOrEmpty(returnValue);
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            listSerializer.Write(writer, listValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_def_index_no_mutation': " + e);
            throw;
        }
    }
}

sealed class view_def_no_anon_identityViewDispatcher : global::SpacetimeDB.Internal.IAnonymousView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeAnonymousViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_no_anon_identity",
            Index: 1,
            IsPublic: true,
            IsAnonymous: true,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.ValueOption<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IAnonymousViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefNoAnonIdentity((SpacetimeDB.AnonymousViewContext)ctx);
            var listSerializer = SpacetimeDB.BSATN.ValueOption<
                Player,
                Player.BSATN
            >.GetListSerializer();
            var listValue = ModuleRegistration.ToListOrEmpty(returnValue);
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            listSerializer.Write(writer, listValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_def_no_anon_identity': " + e);
            throw;
        }
    }
}

sealed class view_def_no_iterViewDispatcher : global::SpacetimeDB.Internal.IAnonymousView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeAnonymousViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_no_iter",
            Index: 2,
            IsPublic: true,
            IsAnonymous: true,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.ValueOption<Player, Player.BSATN>().GetAlgebraicType(
                registrar
            )
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IAnonymousViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefNoIter((SpacetimeDB.AnonymousViewContext)ctx);
            var listSerializer = SpacetimeDB.BSATN.ValueOption<
                Player,
                Player.BSATN
            >.GetListSerializer();
            var listValue = ModuleRegistration.ToListOrEmpty(returnValue);
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            listSerializer.Write(writer, listValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error("Error in view 'view_def_no_iter': " + e);
            throw;
        }
    }
}

sealed class view_def_returns_not_a_spacetime_typeViewDispatcher
    : global::SpacetimeDB.Internal.IAnonymousView
{
    public SpacetimeDB.Internal.RawViewDefV9 MakeAnonymousViewDef(
        SpacetimeDB.BSATN.ITypeRegistrar registrar
    ) =>
        new global::SpacetimeDB.Internal.RawViewDefV9(
            Name: "view_def_returns_not_a_spacetime_type",
            Index: 3,
            IsPublic: true,
            IsAnonymous: true,
            Params: [],
            ReturnType: new SpacetimeDB.BSATN.ValueOption<
                NotSpacetimeType,
                NotSpacetimeType.BSATN
            >().GetAlgebraicType(registrar)
        );

    public byte[] Invoke(
        System.IO.BinaryReader reader,
        global::SpacetimeDB.Internal.IAnonymousViewContext ctx
    )
    {
        try
        {
            var returnValue = Module.ViewDefReturnsNotASpacetimeType(
                (SpacetimeDB.AnonymousViewContext)ctx
            );
            var listSerializer = SpacetimeDB.BSATN.ValueOption<
                NotSpacetimeType,
                NotSpacetimeType.BSATN
            >.GetListSerializer();
            var listValue = ModuleRegistration.ToListOrEmpty(returnValue);
            using var output = new System.IO.MemoryStream();
            using var writer = new System.IO.BinaryWriter(output);
            listSerializer.Write(writer, listValue);
            return output.ToArray();
        }
        catch (System.Exception e)
        {
            global::SpacetimeDB.Log.Error(
                "Error in view 'view_def_returns_not_a_spacetime_type': " + e
            );
            throw;
        }
    }
}

namespace SpacetimeDB.Internal.ViewHandles
{
    public sealed class PlayerReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::Player>
    {
        internal PlayerReadOnly()
            : base("Player") { }

        public ulong Count => DoCount();

        public sealed class IdentityIndex
            : global::SpacetimeDB.Internal.ReadOnlyUniqueIndex<
                global::SpacetimeDB.Internal.ViewHandles.PlayerReadOnly,
                global::Player,
                SpacetimeDB.Identity,
                SpacetimeDB.Identity.BSATN
            >
        {
            internal IdentityIndex()
                : base("Player_Identity_idx_btree") { }

            public global::Player? Find(SpacetimeDB.Identity key) => FindSingle(key);
        }

        public IdentityIndex Identity => new();
    }

    public sealed class TestAutoIncNotIntegerReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestAutoIncNotInteger>
    {
        internal TestAutoIncNotIntegerReadOnly()
            : base("TestAutoIncNotInteger") { }

        public ulong Count => DoCount();

        public sealed class IdentityFieldIndex
            : global::SpacetimeDB.Internal.ReadOnlyUniqueIndex<
                global::SpacetimeDB.Internal.ViewHandles.TestAutoIncNotIntegerReadOnly,
                global::TestAutoIncNotInteger,
                string,
                SpacetimeDB.BSATN.String
            >
        {
            internal IdentityFieldIndex()
                : base("TestAutoIncNotInteger_IdentityField_idx_btree") { }

            public global::TestAutoIncNotInteger? Find(string key) => FindSingle(key);
        }

        public IdentityFieldIndex IdentityField => new();
    }

    public sealed class TestDefaultFieldValuesReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestDefaultFieldValues>
    {
        internal TestDefaultFieldValuesReadOnly()
            : base("TestDefaultFieldValues") { }

        public ulong Count => DoCount();
    }

    public sealed class TestDuplicateTableNameReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestDuplicateTableName>
    {
        internal TestDuplicateTableNameReadOnly()
            : base("TestDuplicateTableName") { }

        public ulong Count => DoCount();
    }

    public sealed class TestIndexIssuesReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestIndexIssues>
    {
        internal TestIndexIssuesReadOnly()
            : base("TestIndexIssues") { }

        public ulong Count => DoCount();

        public sealed class TestIndexWithoutColumnsIndex
            : global::SpacetimeDB.Internal.ReadOnlyIndexBase<global::TestIndexIssues>
        {
            internal TestIndexWithoutColumnsIndex()
                : base("TestIndexIssues__idx_btree") { }
        }

        public TestIndexWithoutColumnsIndex TestIndexWithoutColumns => new();

        public sealed class TestIndexWithEmptyColumnsIndex
            : global::SpacetimeDB.Internal.ReadOnlyIndexBase<global::TestIndexIssues>
        {
            internal TestIndexWithEmptyColumnsIndex()
                : base("TestIndexIssues__idx_btree") { }
        }

        public TestIndexWithEmptyColumnsIndex TestIndexWithEmptyColumns => new();

        public sealed class TestUnknownColumnsIndex
            : global::SpacetimeDB.Internal.ReadOnlyIndexBase<global::TestIndexIssues>
        {
            internal TestUnknownColumnsIndex()
                : base("TestIndexIssues__idx_btree") { }
        }

        public TestUnknownColumnsIndex TestUnknownColumns => new();

        public sealed class TestUnexpectedColumnsIndex
            : global::SpacetimeDB.Internal.ReadOnlyIndexBase<global::TestIndexIssues>
        {
            internal TestUnexpectedColumnsIndex()
                : base("TestIndexIssues_SelfIndexingColumn_idx_btree") { }

            public IEnumerable<global::TestIndexIssues> Filter(int SelfIndexingColumn) =>
                DoFilter(
                    new global::SpacetimeDB.Internal.BTreeIndexBounds<int, SpacetimeDB.BSATN.I32>(
                        SelfIndexingColumn
                    )
                );

            public IEnumerable<global::TestIndexIssues> Filter(
                global::SpacetimeDB.Bound<int> SelfIndexingColumn
            ) =>
                DoFilter(
                    new global::SpacetimeDB.Internal.BTreeIndexBounds<int, SpacetimeDB.BSATN.I32>(
                        SelfIndexingColumn
                    )
                );
        }

        public TestUnexpectedColumnsIndex TestUnexpectedColumns => new();
    }

    public sealed class TestScheduleWithMissingScheduleAtFieldReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestScheduleIssues>
    {
        internal TestScheduleWithMissingScheduleAtFieldReadOnly()
            : base("TestScheduleWithMissingScheduleAtField") { }

        public ulong Count => DoCount();
    }

    public sealed class TestScheduleWithoutPrimaryKeyReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestScheduleIssues>
    {
        internal TestScheduleWithoutPrimaryKeyReadOnly()
            : base("TestScheduleWithoutPrimaryKey") { }

        public ulong Count => DoCount();
    }

    public sealed class TestScheduleWithoutScheduleAtReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestScheduleIssues>
    {
        internal TestScheduleWithoutScheduleAtReadOnly()
            : base("TestScheduleWithoutScheduleAt") { }

        public ulong Count => DoCount();

        public sealed class IdCorrectTypeIndex
            : global::SpacetimeDB.Internal.ReadOnlyUniqueIndex<
                global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithoutScheduleAtReadOnly,
                global::TestScheduleIssues,
                int,
                SpacetimeDB.BSATN.I32
            >
        {
            internal IdCorrectTypeIndex()
                : base("TestScheduleWithoutScheduleAt_IdCorrectType_idx_btree") { }

            public global::TestScheduleIssues? Find(int key) => FindSingle(key);
        }

        public IdCorrectTypeIndex IdCorrectType => new();
    }

    public sealed class TestScheduleWithWrongPrimaryKeyTypeReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestScheduleIssues>
    {
        internal TestScheduleWithWrongPrimaryKeyTypeReadOnly()
            : base("TestScheduleWithWrongPrimaryKeyType") { }

        public ulong Count => DoCount();

        public sealed class IdWrongTypeIndex
            : global::SpacetimeDB.Internal.ReadOnlyUniqueIndex<
                global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithWrongPrimaryKeyTypeReadOnly,
                global::TestScheduleIssues,
                string,
                SpacetimeDB.BSATN.String
            >
        {
            internal IdWrongTypeIndex()
                : base("TestScheduleWithWrongPrimaryKeyType_IdWrongType_idx_btree") { }

            public global::TestScheduleIssues? Find(string key) => FindSingle(key);
        }

        public IdWrongTypeIndex IdWrongType => new();
    }

    public sealed class TestScheduleWithWrongScheduleAtTypeReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestScheduleIssues>
    {
        internal TestScheduleWithWrongScheduleAtTypeReadOnly()
            : base("TestScheduleWithWrongScheduleAtType") { }

        public ulong Count => DoCount();

        public sealed class IdCorrectTypeIndex
            : global::SpacetimeDB.Internal.ReadOnlyUniqueIndex<
                global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithWrongScheduleAtTypeReadOnly,
                global::TestScheduleIssues,
                int,
                SpacetimeDB.BSATN.I32
            >
        {
            internal IdCorrectTypeIndex()
                : base("TestScheduleWithWrongScheduleAtType_IdCorrectType_idx_btree") { }

            public global::TestScheduleIssues? Find(int key) => FindSingle(key);
        }

        public IdCorrectTypeIndex IdCorrectType => new();
    }

    public sealed class TestUniqueNotEquatableReadOnly
        : global::SpacetimeDB.Internal.ReadOnlyTableView<global::TestUniqueNotEquatable>
    {
        internal TestUniqueNotEquatableReadOnly()
            : base("TestUniqueNotEquatable") { }

        public ulong Count => DoCount();

        public sealed class PrimaryKeyFieldIndex
            : global::SpacetimeDB.Internal.ReadOnlyUniqueIndex<
                global::SpacetimeDB.Internal.ViewHandles.TestUniqueNotEquatableReadOnly,
                global::TestUniqueNotEquatable,
                TestEnumWithExplicitValues,
                SpacetimeDB.BSATN.Enum<TestEnumWithExplicitValues>
            >
        {
            internal PrimaryKeyFieldIndex()
                : base("TestUniqueNotEquatable_PrimaryKeyField_idx_btree") { }

            public global::TestUniqueNotEquatable? Find(TestEnumWithExplicitValues key) =>
                FindSingle(key);
        }

        public PrimaryKeyFieldIndex PrimaryKeyField => new();
    }
}

namespace SpacetimeDB.Internal
{
    public sealed partial class LocalReadOnly
    {
        public global::SpacetimeDB.Internal.ViewHandles.PlayerReadOnly Player => new();
        public global::SpacetimeDB.Internal.ViewHandles.TestAutoIncNotIntegerReadOnly TestAutoIncNotInteger =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestDefaultFieldValuesReadOnly TestDefaultFieldValues =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestDuplicateTableNameReadOnly TestDuplicateTableName =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestIndexIssuesReadOnly TestIndexIssues =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithMissingScheduleAtFieldReadOnly TestScheduleWithMissingScheduleAtField =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithoutPrimaryKeyReadOnly TestScheduleWithoutPrimaryKey =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithoutScheduleAtReadOnly TestScheduleWithoutScheduleAt =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithWrongPrimaryKeyTypeReadOnly TestScheduleWithWrongPrimaryKeyType =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestScheduleWithWrongScheduleAtTypeReadOnly TestScheduleWithWrongScheduleAtType =>
            new();
        public global::SpacetimeDB.Internal.ViewHandles.TestUniqueNotEquatableReadOnly TestUniqueNotEquatable =>
            new();
    }
}

static class ModuleRegistration
{
    class __ReducerWithReservedPrefix : SpacetimeDB.Internal.IReducer
    {
        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => new(nameof(__ReducerWithReservedPrefix), [], null);

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            Reducers.__ReducerWithReservedPrefix((SpacetimeDB.ReducerContext)ctx);
        }
    }

    class DummyScheduledReducer : SpacetimeDB.Internal.IReducer
    {
        private static readonly TestScheduleIssues.BSATN tableRW = new();

        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            new(
                nameof(DummyScheduledReducer),
                [new("table", tableRW.GetAlgebraicType(registrar))],
                null
            );

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            TestScheduleIssues.DummyScheduledReducer(
                (SpacetimeDB.ReducerContext)ctx,
                tableRW.Read(reader)
            );
        }
    }

    class OnReducerWithReservedPrefix : SpacetimeDB.Internal.IReducer
    {
        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => new(nameof(OnReducerWithReservedPrefix), [], null);

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            Reducers.OnReducerWithReservedPrefix((SpacetimeDB.ReducerContext)ctx);
        }
    }

    class TestDuplicateReducerKind1 : SpacetimeDB.Internal.IReducer
    {
        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => new(nameof(TestDuplicateReducerKind1), [], SpacetimeDB.Internal.Lifecycle.Init);

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            Reducers.TestDuplicateReducerKind1((SpacetimeDB.ReducerContext)ctx);
        }
    }

    class TestDuplicateReducerKind2 : SpacetimeDB.Internal.IReducer
    {
        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => new(nameof(TestDuplicateReducerKind2), [], SpacetimeDB.Internal.Lifecycle.Init);

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            Reducers.TestDuplicateReducerKind2((SpacetimeDB.ReducerContext)ctx);
        }
    }

    class TestDuplicateReducerName : SpacetimeDB.Internal.IReducer
    {
        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => new(nameof(TestDuplicateReducerName), [], null);

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            Reducers.TestDuplicateReducerName((SpacetimeDB.ReducerContext)ctx);
        }
    }

    class TestReducerReturnType : SpacetimeDB.Internal.IReducer
    {
        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => new(nameof(TestReducerReturnType), [], null);

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            Reducers.TestReducerReturnType((SpacetimeDB.ReducerContext)ctx);
        }
    }

    class TestReducerWithoutContext : SpacetimeDB.Internal.IReducer
    {
        public SpacetimeDB.Internal.RawReducerDefV9 MakeReducerDef(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => new(nameof(TestReducerWithoutContext), [], null);

        public void Invoke(BinaryReader reader, SpacetimeDB.Internal.IReducerContext ctx)
        {
            throw new System.InvalidOperationException();
        }
    }

    public static List<T> ToListOrEmpty<T>(T? value)
        where T : struct => value is null ? new List<T>() : new List<T> { value.Value };

    public static List<T> ToListOrEmpty<T>(T? value)
        where T : class => value is null ? new List<T>() : new List<T> { value };

#if EXPERIMENTAL_WASM_AOT
    // In AOT mode we're building a library.
    // Main method won't be called automatically, so we need to export it as a preinit function.
    [UnmanagedCallersOnly(EntryPoint = "__preinit__10_init_csharp")]
#else
    // Prevent trimming of FFI exports that are invoked from C and not visible to C# trimmer.
    [DynamicDependency(
        DynamicallyAccessedMemberTypes.PublicMethods,
        typeof(SpacetimeDB.Internal.Module)
    )]
#endif
    public static void Main()
    {
        SpacetimeDB.Internal.Module.SetReducerContextConstructor(
            (identity, connectionId, random, time) =>
                new SpacetimeDB.ReducerContext(identity, connectionId, random, time)
        );
        SpacetimeDB.Internal.Module.SetViewContextConstructor(
            identity => new SpacetimeDB.ViewContext(
                identity,
                new SpacetimeDB.Internal.LocalReadOnly()
            )
        );
        SpacetimeDB.Internal.Module.SetAnonymousViewContextConstructor(
            () => new SpacetimeDB.AnonymousViewContext(new SpacetimeDB.Internal.LocalReadOnly())
        );
        SpacetimeDB.Internal.Module.SetProcedureContextConstructor(
            (identity, connectionId, random, time) =>
                new SpacetimeDB.ProcedureContext(identity, connectionId, random, time)
        );
        var __memoryStream = new MemoryStream();
        var __writer = new BinaryWriter(__memoryStream);

        SpacetimeDB.Internal.Module.RegisterReducer<__ReducerWithReservedPrefix>();
        SpacetimeDB.Internal.Module.RegisterReducer<DummyScheduledReducer>();
        SpacetimeDB.Internal.Module.RegisterReducer<OnReducerWithReservedPrefix>();
        SpacetimeDB.Internal.Module.RegisterReducer<TestDuplicateReducerKind1>();
        SpacetimeDB.Internal.Module.RegisterReducer<TestDuplicateReducerKind2>();
        SpacetimeDB.Internal.Module.RegisterReducer<TestDuplicateReducerName>();
        SpacetimeDB.Internal.Module.RegisterReducer<TestReducerReturnType>();
        SpacetimeDB.Internal.Module.RegisterReducer<TestReducerWithoutContext>();

        // IMPORTANT: The order in which we register views matters.
        // It must correspond to the order in which we call `GenerateDispatcherClass`.
        // See the comment on `GenerateDispatcherClass` for more explanation.
        SpacetimeDB.Internal.Module.RegisterView<view_def_no_contextViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterView<view_def_no_publicViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterView<view_def_wrong_contextViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterView<view_def_wrong_returnViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterView<view_no_deleteViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterView<view_no_insertViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterAnonymousView<view_def_index_no_mutationViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterAnonymousView<view_def_no_anon_identityViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterAnonymousView<view_def_no_iterViewDispatcher>();
        SpacetimeDB.Internal.Module.RegisterAnonymousView<view_def_returns_not_a_spacetime_typeViewDispatcher>();

        SpacetimeDB.Internal.Module.RegisterTable<
            global::Player,
            SpacetimeDB.Internal.TableHandles.Player
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestAutoIncNotInteger,
            SpacetimeDB.Internal.TableHandles.TestAutoIncNotInteger
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestDefaultFieldValues,
            SpacetimeDB.Internal.TableHandles.TestDefaultFieldValues
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestDuplicateTableName,
            SpacetimeDB.Internal.TableHandles.TestDuplicateTableName
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestIndexIssues,
            SpacetimeDB.Internal.TableHandles.TestIndexIssues
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestScheduleIssues,
            SpacetimeDB.Internal.TableHandles.TestScheduleWithMissingScheduleAtField
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestScheduleIssues,
            SpacetimeDB.Internal.TableHandles.TestScheduleWithoutPrimaryKey
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestScheduleIssues,
            SpacetimeDB.Internal.TableHandles.TestScheduleWithoutScheduleAt
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestScheduleIssues,
            SpacetimeDB.Internal.TableHandles.TestScheduleWithWrongPrimaryKeyType
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestScheduleIssues,
            SpacetimeDB.Internal.TableHandles.TestScheduleWithWrongScheduleAtType
        >();
        SpacetimeDB.Internal.Module.RegisterTable<
            global::TestUniqueNotEquatable,
            SpacetimeDB.Internal.TableHandles.TestUniqueNotEquatable
        >();
        SpacetimeDB.Internal.Module.RegisterClientVisibilityFilter(global::Module.MY_FILTER);
        SpacetimeDB.Internal.Module.RegisterClientVisibilityFilter(global::Module.MY_FOURTH_FILTER);
        SpacetimeDB.Internal.Module.RegisterClientVisibilityFilter(global::Module.MY_SECOND_FILTER);
        SpacetimeDB.Internal.Module.RegisterClientVisibilityFilter(global::Module.MY_THIRD_FILTER);
        {
            var value = new SpacetimeDB.BSATN.String();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, "A default string set by attribute");
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                1,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.U64();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                10,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.I32();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                11,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.I32();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                12,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.F32();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                13,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.F64();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                14,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.Enum<MyEnum>();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, (MyEnum)2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                15,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.ValueOption<MyStruct, MyStruct.BSATN>();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, null);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                16,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.Bool();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, true);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                2,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.I8();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                3,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.U8();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                4,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.I16();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                5,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.U16();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                6,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.I32();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                7,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.U32();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                8,
                array
            );
        }

        {
            var value = new SpacetimeDB.BSATN.I64();
            __memoryStream.Position = 0;
            __memoryStream.SetLength(0);
            value.Write(__writer, 2);
            var array = __memoryStream.ToArray();
            SpacetimeDB.Internal.Module.RegisterTableDefaultValue(
                "TestDefaultFieldValues",
                9,
                array
            );
        }
    }

    // Exports only work from the main assembly, so we need to generate forwarding methods.
#if EXPERIMENTAL_WASM_AOT
    [UnmanagedCallersOnly(EntryPoint = "__describe_module__")]
    public static void __describe_module__(SpacetimeDB.Internal.BytesSink d) =>
        SpacetimeDB.Internal.Module.__describe_module__(d);

    [UnmanagedCallersOnly(EntryPoint = "__call_reducer__")]
    public static SpacetimeDB.Internal.Errno __call_reducer__(
        uint id,
        ulong sender_0,
        ulong sender_1,
        ulong sender_2,
        ulong sender_3,
        ulong conn_id_0,
        ulong conn_id_1,
        SpacetimeDB.Timestamp timestamp,
        SpacetimeDB.Internal.BytesSource args,
        SpacetimeDB.Internal.BytesSink error
    ) =>
        SpacetimeDB.Internal.Module.__call_reducer__(
            id,
            sender_0,
            sender_1,
            sender_2,
            sender_3,
            conn_id_0,
            conn_id_1,
            timestamp,
            args,
            error
        );

    [UnmanagedCallersOnly(EntryPoint = "__call_procedure__")]
    public static SpacetimeDB.Internal.Errno __call_procedure__(
        uint id,
        ulong sender_0,
        ulong sender_1,
        ulong sender_2,
        ulong sender_3,
        ulong conn_id_0,
        ulong conn_id_1,
        SpacetimeDB.Timestamp timestamp,
        SpacetimeDB.Internal.BytesSource args,
        SpacetimeDB.Internal.BytesSink result_sink
    ) =>
        SpacetimeDB.Internal.Module.__call_procedure__(
            id,
            sender_0,
            sender_1,
            sender_2,
            sender_3,
            conn_id_0,
            conn_id_1,
            timestamp,
            args,
            result_sink
        );

    [UnmanagedCallersOnly(EntryPoint = "__call_view__")]
    public static SpacetimeDB.Internal.Errno __call_view__(
        uint id,
        ulong sender_0,
        ulong sender_1,
        ulong sender_2,
        ulong sender_3,
        SpacetimeDB.Internal.BytesSource args,
        SpacetimeDB.Internal.BytesSink sink
    ) =>
        SpacetimeDB.Internal.Module.__call_view__(
            id,
            sender_0,
            sender_1,
            sender_2,
            sender_3,
            args,
            sink
        );

    [UnmanagedCallersOnly(EntryPoint = "__call_view_anon__")]
    public static SpacetimeDB.Internal.Errno __call_view_anon__(
        uint id,
        SpacetimeDB.Internal.BytesSource args,
        SpacetimeDB.Internal.BytesSink sink
    ) => SpacetimeDB.Internal.Module.__call_view_anon__(id, args, sink);
#endif
}

#pragma warning restore STDB_UNSTABLE
#pragma warning restore CS0436
