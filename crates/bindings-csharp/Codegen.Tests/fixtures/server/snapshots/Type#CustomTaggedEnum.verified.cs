//HintName: CustomTaggedEnum.cs
// <auto-generated />
#nullable enable

abstract partial record CustomTaggedEnum : SpacetimeDB.BSATN.IStructuralWrite
{
    private CustomTaggedEnum() { }

    internal enum @enum : byte
    {
        IntVariant,
        StringVariant
    }

    public sealed record IntVariant(int IntVariant_) : CustomTaggedEnum
    {
        public override void WriteFields(System.IO.BinaryWriter writer)
        {
            BSATN.__enumTag.Write(writer, @enum.IntVariant);
            BSATN.IntVariant.Write(writer, IntVariant_);
        }
    }

    public sealed record StringVariant(string StringVariant_) : CustomTaggedEnum
    {
        public override void WriteFields(System.IO.BinaryWriter writer)
        {
            BSATN.__enumTag.Write(writer, @enum.StringVariant);
            BSATN.StringVariant.Write(writer, StringVariant_);
        }
    }

    public readonly partial struct BSATN : SpacetimeDB.BSATN.IReadWrite<CustomTaggedEnum>
    {
        internal static readonly SpacetimeDB.BSATN.Enum<@enum> __enumTag = new();
        internal static readonly SpacetimeDB.BSATN.I32 IntVariant = new();
        internal static readonly SpacetimeDB.BSATN.String StringVariant = new();

        public CustomTaggedEnum Read(System.IO.BinaryReader reader) =>
            __enumTag.Read(reader) switch
            {
                @enum.IntVariant => new IntVariant(IntVariant.Read(reader)),
                @enum.StringVariant => new StringVariant(StringVariant.Read(reader)),
                _
                    => throw new System.InvalidOperationException(
                        "Invalid tag value, this state should be unreachable."
                    )
            };

        public void Write(System.IO.BinaryWriter writer, CustomTaggedEnum value) =>
            value.WriteFields(writer);

        public SpacetimeDB.BSATN.AlgebraicType GetAlgebraicType(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            registrar.RegisterType<CustomTaggedEnum>(_ => new SpacetimeDB.BSATN.AlgebraicType.Sum(
                new SpacetimeDB.BSATN.AggregateElement[]
                {
                    new(nameof(IntVariant), IntVariant.GetAlgebraicType(registrar)),
                    new(nameof(StringVariant), StringVariant.GetAlgebraicType(registrar))
                }
            ));
    }
} // CustomTaggedEnum
