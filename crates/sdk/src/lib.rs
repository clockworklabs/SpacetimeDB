//! The SpacetimeDB Rust client SDK, which enables native Rust applications
//! to communicate with SpacetimeDB modules.
//!
//! This library depends on a set of module-specific definitions
//! autogenerated by [the SpacetimeDB CLI](https://spacetimedb.com/install).
//! See [the SpacetimeDB Rust client SDK reference](https://spacetimedb.com/docs/sdks/rust#generate-module-bindings)
//! for more oh how to generate these bindings.

// Any `#[doc(hidden)]` modules or uses are public because
// code generated by the CLI's codegen references them,
// but users should not.

mod callbacks;
mod client_cache;
mod db_connection;
mod spacetime_module;
mod subscription;
mod websocket;

pub mod credentials;
pub mod db_context;
pub mod event;
pub mod table;

pub use db_connection::{DbConnectionBuilder, DisconnectedError};
pub use db_context::DbContext;
pub use event::{Event, ReducerEvent, Status};
pub use table::{Table, TableWithPrimaryKey};

pub use spacetimedb_lib::{Address, Identity, ScheduleAt};
pub use spacetimedb_sats::{i256, u256};

#[doc(hidden)]
pub mod __codegen {
    //! Names and definitions referenced by the CLI's codegen.
    //!
    //! Necessarily public, but should not be considered part of this library's public interface.
    //! These may change incompatibly without a major version bump.
    pub use anyhow;
    pub use http;
    pub use log;
    pub use spacetimedb_client_api_messages::websocket as __ws;
    pub use spacetimedb_lib as __lib;
    pub use spacetimedb_sats as __sats;

    pub use crate::callbacks::{CallbackId, DbCallbacks};
    pub use crate::client_cache::{ClientCache, TableHandle, UniqueConstraintHandle};
    pub use crate::db_connection::DbContextImpl;
    pub use crate::spacetime_module::{
        parse_reducer_args, DbConnection, DbUpdate, EventContext, InModule, Reducer, SpacetimeModule,
        SubscriptionHandle, TableUpdate,
    };
    pub use crate::subscription::{SubscriptionBuilder, SubscriptionHandleImpl};
    pub use crate::{
        Address, DbConnectionBuilder, DbContext, DisconnectedError, Event, Identity, ReducerEvent, ScheduleAt, Table,
        TableWithPrimaryKey,
    };
}

#[doc(hidden)]
pub mod unstable {
    //! Unstable interfaces not ready for the prime time.
    //!
    //! These may change incompatibly without a major version bump.
    pub use crate::db_connection::set_client_address;
    pub use spacetimedb_client_api_messages::websocket::CallReducerFlags;
}
