//! The SpacetimeDB Rust client SDK, which enables native Rust applications
//! to communicate with SpacetimeDB modules.
//!
//! This library depends on a set of module-specific definitions
//! autogenerated by [the SpacetimeDB CLI](https://spacetimedb.com/install).
//! See [the SpacetimeDB Rust client SDK reference](https://spacetimedb.com/docs/sdks/rust#generate-module-bindings)
//! for more oh how to generate these bindings.

// Any `#[doc(hidden)]` modules or uses are public because
// code generated by the CLI's codegen references them,
// but users should not.

#[doc(hidden)]
pub mod callbacks;
#[doc(hidden)]
pub mod client_cache;
#[doc(hidden)]
pub mod db_connection;
#[doc(hidden)]
pub mod spacetime_module;
#[doc(hidden)]
pub mod subscription;
#[doc(hidden)]
pub mod websocket;

#[doc(hidden)]
pub use anyhow;
#[doc(hidden)]
pub use http;
#[doc(hidden)]
pub use log;
#[doc(hidden)]
pub use spacetimedb_client_api_messages::websocket as ws_messages;
#[doc(hidden)]
pub use spacetimedb_lib as lib;
#[doc(hidden)]
pub use spacetimedb_sats as sats;

pub mod credentials;
pub mod db_context;
pub mod event;
pub mod table;

<<<<<<< HEAD
pub use db_connection::{DbConnectionBuilder, DisconnectedError};
pub use db_context::DbContext;
pub use event::{Event, ReducerEvent, Status};
pub use table::{Table, TableWithPrimaryKey};
=======
/// Subscribe to a set of queries,
/// to be notified when rows which match those queries are altered.
///
/// The `queries` should be a `Vec` of `String`s representing SQL queries.
///
/// A new call to `subscribe_owned` (or [`subscribe`]) will remove all previous subscriptions
/// and replace them with the new `queries`.
/// If any rows matched the previous subscribed queries but do not match the new queries,
/// those rows will be removed from the client cache,
/// and `TableType::on_delete` callbacks will be invoked for them.
///
/// `subscribe_owned` will return an error if called before establishing a connection
/// with the autogenerated `connect` function.
/// In that case, the queries are not registered.
pub fn subscribe_owned(queries: Box<[Box<str>]>) -> anyhow::Result<()> {
    with_connection(|conn| conn.subscribe_owned(queries))
}
>>>>>>> f816d745 (new websocket api: clippy passes)

pub use spacetimedb_lib::{Address, Identity, ScheduleAt};
