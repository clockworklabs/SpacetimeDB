"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4774],{623:(e,s,l)=>{l.d(s,{A:()=>N});var n=l(3303),c=l(3372),r=l(9607),a=l(2592),o=l(8368),i=l(1711),t=l(4541),d=l(4930),h=l(6022);function F(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:s,children:l}=e;return(0,n.useMemo)(()=>{const e=s??function(e){return F(e).map(({props:{value:e,label:s,attributes:l,default:n}})=>({value:e,label:s,attributes:l,default:n}))}(l);return function(e){const s=(0,d.XI)(e,(e,s)=>e.value===s.value);if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[s,l])}function x({value:e,tabValues:s}){return s.some(s=>s.value===e)}function j({queryString:e=!1,groupId:s}){const l=(0,o.W6)(),c=function({queryString:e=!1,groupId:s}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:e,groupId:s});return[(0,t.aZ)(c),(0,n.useCallback)(e=>{if(!c)return;const s=new URLSearchParams(l.location.search);s.set(c,e),l.replace({...l.location,search:s.toString()})},[c,l])]}function y(e){const{defaultValue:s,queryString:l=!1,groupId:c}=e,r=p(e),[a,o]=(0,n.useState)(()=>function({defaultValue:e,tabValues:s}){if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${s.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const l=s.find(e=>e.default)??s[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:s,tabValues:r})),[t,d]=j({queryString:l,groupId:c}),[F,y]=function({groupId:e}){const s=function(e){return e?`docusaurus.tab.${e}`:null}(e),[l,c]=(0,h.Dv)(s);return[l,(0,n.useCallback)(e=>{s&&c.set(e)},[s,c])]}({groupId:c}),u=(()=>{const e=t??F;return x({value:e,tabValues:r})?e:null})();(0,i.A)(()=>{u&&o(u)},[u]);return{selectedValue:a,selectValue:(0,n.useCallback)(e=>{if(!x({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),y(e)},[d,y,r]),tabValues:r}}var u=l(93);const m={tabList:"tabList_MbSD",tabItem:"tabItem_Ssy3"};var b=l(7711);function C({className:e,block:s,selectedValue:l,selectValue:n,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:i}=(0,a.a_)(),t=e=>{const s=e.currentTarget,c=o.indexOf(s),a=r[c].value;a!==l&&(i(s),n(a))},d=e=>{let s=null;switch(e.key){case"Enter":t(e);break;case"ArrowRight":{const l=o.indexOf(e.currentTarget)+1;s=o[l]??o[0];break}case"ArrowLeft":{const l=o.indexOf(e.currentTarget)-1;s=o[l]??o[o.length-1];break}}s?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.A)("tabs",{"tabs--block":s},e),children:r.map(({value:e,label:s,attributes:n})=>(0,b.jsx)("li",{role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:t,...n,className:(0,c.A)("tabs__item",m.tabItem,n?.className,{"tabs__item--active":l===e}),children:s??e},e))})}function g({lazy:e,children:s,selectedValue:l}){const r=(Array.isArray(s)?s:[s]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===l);return e?(0,n.cloneElement)(e,{className:(0,c.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map((e,s)=>(0,n.cloneElement)(e,{key:s,hidden:e.props.value!==l}))})}function f(e){const s=y(e);return(0,b.jsxs)("div",{className:(0,c.A)(r.G.tabs.container,"tabs-container",m.tabList),children:[(0,b.jsx)(C,{...s,...e}),(0,b.jsx)(g,{...s,...e})]})}function N(e){const s=(0,u.A)();return(0,b.jsx)(f,{...e,children:F(e.children)},String(s))}},6119:(e,s,l)=>{l.d(s,{R:()=>a,x:()=>o});var n=l(3303);const c={},r=n.createContext(c);function a(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),n.createElement(r.Provider,{value:s},e.children)}},8126:(e,s,l)=>{l.r(s),l.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"Unity tutorial/part-2","title":"2 - Connecting to SpacetimeDB","description":"Need help with the tutorial? Join our Discord server!","source":"@site/docs/03-Unity tutorial/03-part-2.mdx","sourceDirName":"03-Unity tutorial","slug":"/unity/part-2","permalink":"/unity/part-2","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"2 - Connecting to SpacetimeDB","slug":"/unity/part-2"},"sidebar":"sidebar","previous":{"title":"1 - Setup","permalink":"/unity/part-1"},"next":{"title":"3 - Gameplay","permalink":"/unity/part-3"}}');var c=l(7711),r=l(6119),a=l(623),o=l(8720);const i={title:"2 - Connecting to SpacetimeDB",slug:"/unity/part-2"},t="Unity Tutorial - Part 2 - Connecting to SpacetimeDB",d={},h=[{value:"Create a Server Module",id:"create-a-server-module",level:2},{value:"SpacetimeDB Tables",id:"spacetimedb-tables",level:3},{value:"Creating Entities",id:"creating-entities",level:3},{value:"Representing Players",id:"representing-players",level:3},{value:"Writing a Reducer",id:"writing-a-reducer",level:3},{value:"Publishing the Module",id:"publishing-the-module",level:3},{value:"Connecting our Client",id:"connecting-our-client",level:3},{value:"Generating the Client",id:"generating-the-client",level:3},{value:"Connecting to the Database",id:"connecting-to-the-database",level:3},{value:"Next Steps",id:"next-steps",level:3}];function F(e){const s={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.header,{children:(0,c.jsx)(s.h1,{id:"unity-tutorial---part-2---connecting-to-spacetimedb",children:"Unity Tutorial - Part 2 - Connecting to SpacetimeDB"})}),"\n",(0,c.jsxs)(s.p,{children:["Need help with the tutorial? ",(0,c.jsx)(s.a,{href:"https://discord.gg/spacetimedb",children:"Join our Discord server"}),"!"]}),"\n",(0,c.jsxs)(s.p,{children:["This progressive tutorial is continued from ",(0,c.jsx)(s.a,{href:"/unity/part-1",children:"part 1"}),"."]}),"\n",(0,c.jsx)(s.h2,{id:"create-a-server-module",children:"Create a Server Module"}),"\n",(0,c.jsxs)(s.p,{children:["If you have not already installed the ",(0,c.jsx)(s.code,{children:"spacetime"})," CLI, check out our ",(0,c.jsx)(s.a,{href:"/getting-started",children:"Getting Started"})," guide for instructions on how to install."]}),"\n",(0,c.jsxs)(s.p,{children:["In your ",(0,c.jsx)(s.code,{children:"blackholio"})," directory, run the following command to initialize the SpacetimeDB server module project with your desired language:"]}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsx)(s.p,{children:"Run the following command to initialize the SpacetimeDB server module project with Rust as the language:"}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" init"}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" --lang=rust"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" server-rust"})]})})})}),(0,c.jsxs)(s.p,{children:["This command creates a new folder named ",(0,c.jsx)(s.code,{children:"server-rust"})," alongside your Unity project ",(0,c.jsx)(s.code,{children:"client-unity"})," directory and sets up the SpacetimeDB server project with Rust as the programming language."]})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsx)(s.p,{children:"Run the following command to initialize the SpacetimeDB server module project with C# as the language:"}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" init"}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" --lang=csharp"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" server-csharp"})]})})})}),(0,c.jsxs)(s.p,{children:["This command creates a new folder named ",(0,c.jsx)(s.code,{children:"server-csharp"})," alongside your Unity project ",(0,c.jsx)(s.code,{children:"client-unity"})," directory and sets up the SpacetimeDB server project with C# as the programming language."]})]})]}),"\n",(0,c.jsx)(s.h3,{id:"spacetimedb-tables",children:"SpacetimeDB Tables"}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(s.p,{children:["In this section we'll be making some edits to the file ",(0,c.jsx)(s.code,{children:"server-rust/src/lib.rs"}),". We recommend you open up this file in an IDE like VSCode or RustRover."]}),(0,c.jsx)(s.p,{children:(0,c.jsxs)(s.strong,{children:["Important: Open the ",(0,c.jsx)(s.code,{children:"server-rust/src/lib.rs"})," file and delete its contents. We will be writing it from scratch here."]})})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(s.p,{children:["In this section we'll be making some edits to the file ",(0,c.jsx)(s.code,{children:"server-csharp/Lib.cs"}),". We recommend you open up this file in an IDE like VSCode or Rider."]}),(0,c.jsx)(s.p,{children:(0,c.jsxs)(s.strong,{children:["Important: Open the ",(0,c.jsx)(s.code,{children:"server-csharp/Lib.cs"})," file and delete its contents. We will be writing it from scratch here."]})})]})]}),"\n",(0,c.jsx)(s.p,{children:"First we need to add some imports at the top of the file. Some will remain unused for now."}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsx)(s.p,{children:(0,c.jsx)(s.strong,{children:"Copy and paste into lib.rs:"})}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"use"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" std"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"time"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Duration"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"use"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{rand"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Rng"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Identity"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeType"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ScheduleAt"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Timestamp"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"};"})]})]})})})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsx)(s.p,{children:(0,c.jsx)(s.strong,{children:"Copy and paste into Lib.cs:"})}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD"},children:" Module"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]})]}),"\n",(0,c.jsxs)(s.p,{children:["We are going to start by defining a SpacetimeDB ",(0,c.jsx)(s.em,{children:"table"}),". A ",(0,c.jsx)(s.em,{children:"table"})," in SpacetimeDB is a relational database table which stores rows, similar to something you might find in SQL. SpacetimeDB tables differ from normal relational database tables in that they are stored fully in memory, are blazing fast to access, and are defined in your module code, rather than in SQL."]}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(s.p,{children:["Each row in a SpacetimeDB table is associated with a ",(0,c.jsx)(s.code,{children:"struct"})," type in Rust."]}),(0,c.jsxs)(s.p,{children:["Let's start by defining the ",(0,c.jsx)(s.code,{children:"Config"})," table. This is a simple table which will store some metadata about our game's state. Add the following code to ",(0,c.jsx)(s.code,{children:"lib.rs"}),"."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"// We're using this table as a singleton, so in this table"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"// there only be one element where the `id` is 0."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" config, public)]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Config"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[primary_key]"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" id"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" world_size"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u64"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(s.p,{children:["Let's break down this code. This defines a normal Rust ",(0,c.jsx)(s.code,{children:"struct"})," with two fields: ",(0,c.jsx)(s.code,{children:"id"})," and ",(0,c.jsx)(s.code,{children:"world_size"}),". We have decorated the struct with the ",(0,c.jsx)(s.code,{children:"spacetimedb::table"})," macro. This procedural Rust macro signals to SpacetimeDB that it should create a new SpacetimeDB table with the row type defined by the ",(0,c.jsx)(s.code,{children:"Config"})," type's fields."]}),(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"spacetimedb::table"})," macro takes two parameters, a ",(0,c.jsx)(s.code,{children:"name"})," which is the name of the table and what you will use to query the table in SQL, and a ",(0,c.jsx)(s.code,{children:"public"})," visibility modifier which ensures that the rows of this table are visible to everyone."]}),(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"#[primary_key]"})," attribute, specifies that the ",(0,c.jsx)(s.code,{children:"id"})," field should be used as the primary key of the table."]})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(s.p,{children:["Each row in a SpacetimeDB table is associated with a ",(0,c.jsx)(s.code,{children:"struct"})," type in C#."]}),(0,c.jsxs)(s.p,{children:["Let's start by defining the ",(0,c.jsx)(s.code,{children:"Config"})," table. This is a simple table which will store some metadata about our game's state. Add the following code inside the ",(0,c.jsx)(s.code,{children:"Module"})," class in ",(0,c.jsx)(s.code,{children:"Lib.cs"}),"."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"// We're using this table as a singleton, so in this table"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"// there will only be one element where the `id` is 0."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"config"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", Public "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" true"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Config"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    ["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" id;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" ulong"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" world_size;"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(s.p,{children:["Let's break down this code. This defines a normal C# ",(0,c.jsx)(s.code,{children:"struct"})," with two fields: ",(0,c.jsx)(s.code,{children:"id"})," and ",(0,c.jsx)(s.code,{children:"world_size"}),". We have added the ",(0,c.jsx)(s.code,{children:'[Table(Name = "config", Public = true)]'})," attribute the struct. This attribute signals to SpacetimeDB that it should create a new SpacetimeDB table with the row type defined by the ",(0,c.jsx)(s.code,{children:"Config"})," type's fields."]}),(0,c.jsxs)(s.blockquote,{children:["\n",(0,c.jsxs)(s.p,{children:["Although we're using ",(0,c.jsx)(s.code,{children:"lower_snake_case"})," for our column names to have consistent column names across languages in this tutorial, you can also use ",(0,c.jsx)(s.code,{children:"camelCase"})," or ",(0,c.jsx)(s.code,{children:"PascalCase"})," if you prefer. See ",(0,c.jsx)(s.a,{href:"https://github.com/clockworklabs/SpacetimeDB/issues/2168",children:"#2168"})," for more information."]}),"\n"]}),(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"Table"})," attribute takes two parameters, a ",(0,c.jsx)(s.code,{children:"Name"})," which is the name of the table and what you will use to query the table in SQL, and a ",(0,c.jsx)(s.code,{children:"Public"})," visibility modifier which ensures that the rows of this table are visible to everyone."]}),(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"[PrimaryKey]"})," attribute, specifies that the ",(0,c.jsx)(s.code,{children:"id"})," field should be used as the primary key of the table."]})]})]}),"\n",(0,c.jsxs)(s.blockquote,{children:["\n",(0,c.jsx)(s.p,{children:'NOTE: The primary key of a row defines the "identity" of the row. A change to a row which doesn\'t modify the primary key is considered an update, but if you change the primary key, then you have deleted the old row and inserted a new one.'}),"\n"]}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(o.A,{value:"rust",label:"Rust",children:(0,c.jsxs)(s.p,{children:["You can learn more the ",(0,c.jsx)(s.code,{children:"table"})," macro in our ",(0,c.jsx)(s.a,{href:"/modules/rust",children:"Rust module reference"}),"."]})}),(0,c.jsx)(o.A,{value:"csharp",label:"C#",children:(0,c.jsxs)(s.p,{children:["You can learn more the ",(0,c.jsx)(s.code,{children:"Table"})," attribute in our ",(0,c.jsx)(s.a,{href:"/modules/c-sharp",children:"C# module reference"}),"."]})})]}),"\n",(0,c.jsx)(s.h3,{id:"creating-entities",children:"Creating Entities"}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(s.p,{children:["Next, we're going to define a new ",(0,c.jsx)(s.code,{children:"SpacetimeType"})," called ",(0,c.jsx)(s.code,{children:"DbVector2"})," which we're going to use to store positions. The difference between a ",(0,c.jsx)(s.code,{children:"#[derive(SpacetimeType)]"})," and a ",(0,c.jsx)(s.code,{children:"#[spacetimedb(table)]"})," is that tables actually store data, whereas the deriving ",(0,c.jsx)(s.code,{children:"SpacetimeType"})," just allows you to create a new column of that type in a SpacetimeDB table. Therefore, ",(0,c.jsx)(s.code,{children:"DbVector2"})," is only a type, and does not define a table."]}),(0,c.jsx)(s.p,{children:(0,c.jsx)(s.strong,{children:"Append to the bottom of lib.rs:"})}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"// This allows us to store 2D points in tables."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[derive("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeType"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Clone"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Debug"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" x"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" y"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsx)(s.p,{children:"Let's create a few tables to represent entities in our game."}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" entity, public)]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[derive("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Debug"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Clone"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Entity"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"    // The `auto_inc` attribute indicates to SpacetimeDB that"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"    // this value should be determined by SpacetimeDB on insert."})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[auto_inc]"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[primary_key]"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" entity_id"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" position"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" mass"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" circle, public)]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Circle"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[primary_key]"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" entity_id"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[index(btree)]"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" player_id"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" direction"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" speed"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" last_split_time"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Timestamp"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" food, public)]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Food"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[primary_key]"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    pub"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" entity_id"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(s.p,{children:["Next, we're going to define a new ",(0,c.jsx)(s.code,{children:"SpacetimeType"})," called ",(0,c.jsx)(s.code,{children:"DbVector2"})," which we're going to use to store positions. The difference between a ",(0,c.jsx)(s.code,{children:"[SpacetimeDB.Type]"})," and a ",(0,c.jsx)(s.code,{children:"[SpacetimeDB.Table]"})," is that tables actually store data, whereas the deriving ",(0,c.jsx)(s.code,{children:"SpacetimeType"})," just allows you to create a new column of that type in a SpacetimeDB table. Therefore, ",(0,c.jsx)(s.code,{children:"DbVector2"})," is only a type, and does not define a table."]}),(0,c.jsx)(s.p,{children:(0,c.jsx)(s.strong,{children:"Append to the bottom of Lib.cs:"})}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"// This allows us to store 2D points in tables."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Type"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" x;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" y;"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" DbVector2"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"float"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" x"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"float"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" y"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:"        this"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:".x "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" x;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:"        this"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:".y "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" y;"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(s.p,{children:["Let's create a few tables to represent entities in our game by adding the following to the end of the ",(0,c.jsx)(s.code,{children:"Module"})," class."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"entity"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", Public "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" true"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Entity"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" ["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"AutoInc"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" entity_id;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" position;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" mass;"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"circle"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", Public "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" true"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Circle"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    ["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" entity_id;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    ["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Index"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"BTree"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" player_id;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" direction;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" speed;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Timestamp"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" last_split_time;"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"food"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", Public "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" true"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Food"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" ["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" entity_id;"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]})]}),"\n",(0,c.jsxs)(s.p,{children:["The first table we defined is the ",(0,c.jsx)(s.code,{children:"entity"})," table. An entity represents an object in our game world. We have decided, for convenience, that all entities in our game should share some common fields, namely ",(0,c.jsx)(s.code,{children:"position"})," and ",(0,c.jsx)(s.code,{children:"mass"}),"."]}),"\n",(0,c.jsxs)(s.p,{children:["We can create different types of entities with additional data by creating new tables with additional fields that have an ",(0,c.jsx)(s.code,{children:"entity_id"})," which references a row in the ",(0,c.jsx)(s.code,{children:"entity"})," table."]}),"\n",(0,c.jsxs)(s.p,{children:["We've created two types of entities in our game world: ",(0,c.jsx)(s.code,{children:"Food"}),"s and ",(0,c.jsx)(s.code,{children:"Circle"}),"s. ",(0,c.jsx)(s.code,{children:"Food"})," does not have any additional fields beyond the attributes in the ",(0,c.jsx)(s.code,{children:"entity"})," table, so the ",(0,c.jsx)(s.code,{children:"food"})," table simply represents the set of ",(0,c.jsx)(s.code,{children:"entity_id"}),"s that we want to recognize as food."]}),"\n",(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"Circle"})," table, however, represents an entity that is controlled by a player. We've added a few additional fields to a ",(0,c.jsx)(s.code,{children:"Circle"})," like ",(0,c.jsx)(s.code,{children:"player_id"})," so that we know which player that circle belongs to."]}),"\n",(0,c.jsx)(s.h3,{id:"representing-players",children:"Representing Players"}),"\n",(0,c.jsx)(s.p,{children:"Next, let's create a table to store our player data."}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" player, public)]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[derive("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Debug"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Clone"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[primary_key]"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    identity"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Identity"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[unique]"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    #[auto_inc]"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    player_id"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    name"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" String"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(s.p,{children:["There's a few new concepts we should touch on. First of all, we are using the ",(0,c.jsx)(s.code,{children:"#[unique]"})," attribute on the ",(0,c.jsx)(s.code,{children:"player_id"})," field. This attribute adds a constraint to the table that ensures that only one row in the player table has a particular ",(0,c.jsx)(s.code,{children:"player_id"}),"."]})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"player"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", Public "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" true"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" ["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Identity"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" identity;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" ["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Unique"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"AutoInc"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" player_id;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" string"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" name;"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(s.p,{children:["There are a few new concepts we should touch on. First of all, we are using the ",(0,c.jsx)(s.code,{children:"[Unique]"})," attribute on the ",(0,c.jsx)(s.code,{children:"player_id"})," field. This attribute adds a constraint to the table that ensures that only one row in the player table has a particular ",(0,c.jsx)(s.code,{children:"player_id"}),". We are also using the ",(0,c.jsx)(s.code,{children:"[AutoInc]"})," attribute on the ",(0,c.jsx)(s.code,{children:"player_id"}),' field, which indicates "this field should get automatically assigned an auto-incremented value".']})]})]}),"\n",(0,c.jsxs)(s.p,{children:["We also have an ",(0,c.jsx)(s.code,{children:"identity"})," field which uses the ",(0,c.jsx)(s.code,{children:"Identity"})," type. The ",(0,c.jsx)(s.code,{children:"Identity"})," type is an identifier that SpacetimeDB uses to uniquely assign and authenticate SpacetimeDB users."]}),"\n",(0,c.jsx)(s.h3,{id:"writing-a-reducer",children:"Writing a Reducer"}),"\n",(0,c.jsx)(s.p,{children:"Next, we write our very first reducer. A reducer is a module function which can be called by clients. Let's write a simple debug reducer to see how they work."}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(o.A,{value:"rust",label:"Rust",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"reducer]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" debug"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    log"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"debug!"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:'"This reducer was called by {}."'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", ctx"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"sender);"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(s.p,{children:["Add this function to the ",(0,c.jsx)(s.code,{children:"Module"})," class in ",(0,c.jsx)(s.code,{children:"Lib.cs"}),":"]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" Debug"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    Log."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Info"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"This reducer was called by "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"ctx"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"Sender"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]})]}),"\n",(0,c.jsxs)(s.p,{children:["This reducer doesn't update any tables, it just prints out the ",(0,c.jsx)(s.code,{children:"Identity"})," of the client that called it."]}),"\n",(0,c.jsx)(s.hr,{}),"\n",(0,c.jsx)(s.p,{children:(0,c.jsx)(s.strong,{children:"SpacetimeDB Reducers"})}),"\n",(0,c.jsxs)(s.p,{children:['"Reducer" is a term coined by Clockwork Labs that refers to a function which when executed "reduces" a set of inserts and deletes into the database state. The term derives from functional programming and is closely related to ',(0,c.jsx)(s.a,{href:"https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow#reducers",children:"similarly named concepts"})," in other frameworks like React Redux. Reducers can be called remotely using the CLI, client SDK or can be scheduled to be called at some future time from another reducer call."]}),"\n",(0,c.jsxs)(s.p,{children:["All reducers execute ",(0,c.jsx)(s.em,{children:"transactionally"})," and ",(0,c.jsx)(s.em,{children:"atomically"}),", meaning that from within the reducer it will appear as though all changes are being applied to the database immediately, however from the outside changes made in a reducer will only be applied to the database once the reducer completes successfully. If you return an error from a reducer or panic within a reducer, all changes made to the database will be rolled back, as if the function had never been called. If you're unfamiliar with atomic transactions, it may not be obvious yet just how useful and important this feature is, but once you build a somewhat complex application it will become clear just how invaluable this feature is."]}),"\n",(0,c.jsx)(s.hr,{}),"\n",(0,c.jsx)(s.h3,{id:"publishing-the-module",children:"Publishing the Module"}),"\n",(0,c.jsx)(s.p,{children:"Now that we have some basic functionality, let's publish the module to SpacetimeDB and call our debug reducer."}),"\n",(0,c.jsx)(s.p,{children:"In a new terminal window, run a local version of SpacetimeDB with the command:"}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" start"})]})})})}),"\n",(0,c.jsx)(s.p,{children:"This following log output indicates that SpacetimeDB is successfully running on your machine."}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"Starting SpacetimeDB listening on 127.0.0.1:3000\n"})}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(o.A,{value:"rust",label:"Rust",children:(0,c.jsxs)(s.p,{children:["Now that SpacetimeDB is running we can publish our module to the SpacetimeDB\nhost. In a separate terminal window, navigate to the\n",(0,c.jsx)(s.code,{children:"blackholio/server-rust"})," directory."]})}),(0,c.jsx)(o.A,{value:"csharp",label:"C#",children:(0,c.jsxs)(s.p,{children:["Now that SpacetimeDB is running we can publish our module to the SpacetimeDB\nhost. In a separate terminal window, navigate to the\n",(0,c.jsx)(s.code,{children:"blackholio/server-csharp"})," directory."]})})]}),"\n",(0,c.jsxs)(s.p,{children:["If you are not already logged in to the ",(0,c.jsx)(s.code,{children:"spacetime"})," CLI, run the ",(0,c.jsx)(s.code,{children:"spacetime login"})," command to log in to your SpacetimeDB website account. Once you are logged in, run ",(0,c.jsx)(s.code,{children:"spacetime publish --server local blackholio"}),". This will publish our Blackholio server logic to SpacetimeDB."]}),"\n",(0,c.jsx)(s.p,{children:"If the publish completed successfully, you will see something like the following in the logs:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"Build finished successfully.\nUploading to local => http://127.0.0.1:3000\nPublishing module...\nCreated new database with name: blackholio, identity: c200d2c69b4524292b91822afac8ab016c15968ac993c28711f68c6bc40b89d5\n"})}),"\n",(0,c.jsxs)(s.blockquote,{children:["\n",(0,c.jsxs)(s.p,{children:["If you sign into ",(0,c.jsx)(s.code,{children:"spacetime login"})," via GitHub, the token you get will be issued by ",(0,c.jsx)(s.code,{children:"auth.spacetimedb.com"}),". This will also ensure that you can recover your identity in case you lose it. On the other hand, if you do ",(0,c.jsx)(s.code,{children:"spacetime login --server-issued-login local"}),", you will get an identity which is issued directly by your local server. Do note, however, that ",(0,c.jsx)(s.code,{children:"--server-issued-login"})," tokens are not recoverable if lost, and are only recognized by the server that issued them."]}),"\n"]}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(s.p,{children:["Next, use the ",(0,c.jsx)(s.code,{children:"spacetime"})," command to call our newly defined ",(0,c.jsx)(s.code,{children:"debug"})," reducer:"]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" call"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" blackholio"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" debug"})]})})})})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(s.p,{children:["Next, use the ",(0,c.jsx)(s.code,{children:"spacetime"})," command to call our newly defined ",(0,c.jsx)(s.code,{children:"Debug"})," reducer:"]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" call"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" blackholio"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" Debug"})]})})})})]})]}),"\n",(0,c.jsx)(s.p,{children:"If the call completed successfully, that command will have no output, but we can see the debug logs by running:"}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" logs"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" blackholio"})]})})})}),"\n",(0,c.jsx)(s.p,{children:"You should see something like the following output:"}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-09T16:08:38.144299Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"  INFO:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" spacetimedb:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" Creating"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" table"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" `"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"circle"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"`"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-09T16:08:38.144438Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"  INFO:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" spacetimedb:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" Creating"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" table"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" `"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"config"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"`"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-09T16:08:38.144451Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"  INFO:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" spacetimedb:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" Creating"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" table"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" `"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"entity"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"`"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-09T16:08:38.144470Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"  INFO:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" spacetimedb:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" Creating"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" table"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" `"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"food"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"`"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-09T16:08:38.144479Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"  INFO:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" spacetimedb:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" Creating"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" table"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" `"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"`"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-09T16:08:38.144841Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"  INFO:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" spacetimedb:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" Database"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" initialized"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-09T16:08:47.306823Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"  INFO:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" src/lib.rs:68:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" This"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" reducer"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" was"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" called"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" by"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" c200e1a6494dbeeb0bbf49590b8778abf94fae4ea26faf9769c9a8d69a3ec348."})]})]})})}),"\n",(0,c.jsx)(s.h3,{id:"connecting-our-client",children:"Connecting our Client"}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(o.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(s.p,{children:["Next let's connect our client to our database. Let's start by modifying our ",(0,c.jsx)(s.code,{children:"debug"})," reducer. Rename the reducer to be called ",(0,c.jsx)(s.code,{children:"connect"})," and add ",(0,c.jsx)(s.code,{children:"client_connected"})," in parentheses after ",(0,c.jsx)(s.code,{children:"spacetimedb::reducer"}),". The end result should look like this:"]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"reducer(client_connected)]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" connect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    log"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"debug!"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:'"{} just connected."'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", ctx"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"sender);"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"client_connected"})," argument to the ",(0,c.jsx)(s.code,{children:"spacetimedb::reducer"})," macro indicates to SpacetimeDB that this is a special reducer. This reducer is only ever called by SpacetimeDB itself when a client connects to your database."]}),(0,c.jsxs)(s.blockquote,{children:["\n",(0,c.jsx)(s.p,{children:"SpacetimeDB gives you the ability to define custom reducers that automatically trigger when certain events occur."}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"init"})," - Called the first time you publish your module and anytime you clear the database with ",(0,c.jsx)(s.code,{children:"spacetime publish <name> --delete-data"}),"."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"client_connected"})," - Called when a user connects to the SpacetimeDB database. Their identity can be found in the ",(0,c.jsx)(s.code,{children:"sender"})," value of the ",(0,c.jsx)(s.code,{children:"ReducerContext"}),"."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"client_disconnected"})," - Called when a user disconnects from the SpacetimeDB database."]}),"\n"]}),"\n"]})]}),(0,c.jsxs)(o.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(s.p,{children:["Next let's connect our client to our database. Let's start by modifying our ",(0,c.jsx)(s.code,{children:"Debug"})," reducer. Rename the reducer to be called ",(0,c.jsx)(s.code,{children:"Connect"})," and add ",(0,c.jsx)(s.code,{children:"ReducerKind.ClientConnected"})," in parentheses after ",(0,c.jsx)(s.code,{children:"SpacetimeDB.Reducer"}),". The end result should look like this:"]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ReducerKind.ClientConnected)]"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" Connect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    Log."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Info"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"ctx"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"Sender"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" just connected."}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"ReducerKind.ClientConnected"})," argument to the ",(0,c.jsx)(s.code,{children:"SpacetimeDB.Reducer"})," attribute indicates to SpacetimeDB that this is a special reducer. This reducer is only ever called by SpacetimeDB itself when a client connects to your database."]}),(0,c.jsxs)(s.blockquote,{children:["\n",(0,c.jsx)(s.p,{children:"SpacetimeDB gives you the ability to define custom reducers that automatically trigger when certain events occur."}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"ReducerKind.Init"})," - Called the first time you publish your module and anytime you clear the database with ",(0,c.jsx)(s.code,{children:"spacetime publish <name> --delete-data"}),"."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"ReducerKind.ClientConnected"})," - Called when a user connects to the SpacetimeDB database. Their identity can be found in the ",(0,c.jsx)(s.code,{children:"Sender"})," value of the ",(0,c.jsx)(s.code,{children:"ReducerContext"}),"."]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"ReducerKind.ClientDisconnected"})," - Called when a user disconnects from the SpacetimeDB database."]}),"\n"]}),"\n"]})]})]}),"\n",(0,c.jsx)(s.p,{children:"Publish your module again by running:"}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" publish"}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" --server"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" local"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" blackholio"})]})})})}),"\n",(0,c.jsx)(s.h3,{id:"generating-the-client",children:"Generating the Client"}),"\n",(0,c.jsxs)(s.p,{children:["The ",(0,c.jsx)(s.code,{children:"spacetime"})," CLI has built in functionality to let us generate C# types that correspond to our tables, types, and reducers that we can use from our Unity client."]}),"\n",(0,c.jsxs)(a.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(o.A,{value:"rust",label:"Rust",children:(0,c.jsxs)(s.p,{children:["Let's generate our types for our module. In the ",(0,c.jsx)(s.code,{children:"blackholio/server-rust"}),"\ndirectory run the following command:"]})}),(0,c.jsx)(o.A,{value:"csharp",label:"C#",children:(0,c.jsxs)(s.p,{children:["Let's generate our types for our module. In the ",(0,c.jsx)(s.code,{children:"blackholio/server-csharp"}),"\ndirectory run the following command:"]})})]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" generate"}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" --lang"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" csharp"}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" --out-dir"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" ../client-unity/Assets/autogen"}),(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:" # you can call this anything, I have chosen `autogen`"})]})})})}),"\n",(0,c.jsxs)(s.p,{children:["This will generate a set of files in the ",(0,c.jsx)(s.code,{children:"client-unity/Assets/autogen"})," directory which contain the code generated types and reducer functions that are defined in your module, but usable on the client."]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"\u251c\u2500\u2500 Reducers\n\u2502   \u2514\u2500\u2500 Connect.g.cs\n\u251c\u2500\u2500 Tables\n\u2502   \u251c\u2500\u2500 Circle.g.cs\n\u2502   \u251c\u2500\u2500 Config.g.cs\n\u2502   \u251c\u2500\u2500 Entity.g.cs\n\u2502   \u251c\u2500\u2500 Food.g.cs\n\u2502   \u2514\u2500\u2500 Player.g.cs\n\u251c\u2500\u2500 Types\n\u2502   \u251c\u2500\u2500 Circle.g.cs\n\u2502   \u251c\u2500\u2500 Config.g.cs\n\u2502   \u251c\u2500\u2500 DbVector2.g.cs\n\u2502   \u251c\u2500\u2500 Entity.g.cs\n\u2502   \u251c\u2500\u2500 Food.g.cs\n\u2502   \u2514\u2500\u2500 Player.g.cs\n\u2514\u2500\u2500 SpacetimeDBClient.g.cs\n"})}),"\n",(0,c.jsxs)(s.p,{children:["This will also generate a file in the ",(0,c.jsx)(s.code,{children:"client-unity/Assets/autogen/SpacetimeDBClient.g.cs"})," directory with a type aware ",(0,c.jsx)(s.code,{children:"DbConnection"})," class. We will use this class to connect to your database from Unity."]}),"\n",(0,c.jsxs)(s.blockquote,{children:["\n",(0,c.jsxs)(s.p,{children:["IMPORTANT! At this point there will be an error in your Unity project. Due to a ",(0,c.jsx)(s.a,{href:"https://docs.unity3d.com/6000.0/Documentation/Manual/csharp-compiler.html",children:"known issue"})," with Unity and C# 9 you need to insert the following code into your Unity project."]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"namespace"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Runtime"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"CompilerServices"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    internal"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD"},children:" IsExternalInit"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" { }"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(s.p,{children:["Add this snippet to the bottom of your ",(0,c.jsx)(s.code,{children:"GameManager.cs"})," file in your Unity project. This will hopefully be resolved in Unity soon."]}),"\n"]}),"\n",(0,c.jsx)(s.h3,{id:"connecting-to-the-database",children:"Connecting to the Database"}),"\n",(0,c.jsxs)(s.p,{children:["At this point we can set up Unity to connect your Unity client to the server. Replace your imports at the top of the ",(0,c.jsx)(s.code,{children:"GameManager.cs"})," file with:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Generic"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]})]})})}),"\n",(0,c.jsxs)(s.p,{children:["Replace the implementation of the ",(0,c.jsx)(s.code,{children:"GameManager"})," class with the following."]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD"},children:" GameManager"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" : "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"MonoBehaviour"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    const"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" string"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" SERVER_URL "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"http://127.0.0.1:3000"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    const"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" string"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" MODULE_NAME "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"blackholio"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" event"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Action"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" OnConnected;"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" event"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Action"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" OnSubscriptionApplied;"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Material"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" borderMaterial;"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" GameManager"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" Instance { "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"get"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"; "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"private"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" set"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"; }"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Identity"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" LocalIdentity { "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"get"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"; "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"private"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" set"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"; }"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbConnection"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" Conn { "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"get"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"; "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"private"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" set"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"; }"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" Start"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Instance "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:" this"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Application.targetFrameRate "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" 60"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"        // In order to build a connection to SpacetimeDB we need to register"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"        // our callbacks and specify a SpacetimeDB server URI and module name."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" builder "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" DbConnection."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Builder"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"OnConnect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(HandleConnect)"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"OnConnectError"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(HandleConnectError)"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"OnDisconnect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(HandleDisconnect)"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"WithUri"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(SERVER_URL)"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"WithModuleName"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(MODULE_NAME);"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"        // If the user has a SpacetimeDB auth token stored in the Unity PlayerPrefs,"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"        // we can use it to authenticate the connection."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" (AuthToken.Token "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"!="}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:' ""'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            builder "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" builder."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"WithToken"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(AuthToken.Token);"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"        // Building the connection will establish a connection to the SpacetimeDB"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"        // server."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Conn "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" builder."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Build"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"    // Called when we connect to SpacetimeDB and receive our client identity"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" HandleConnect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"DbConnection"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" _conn"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Identity"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" identity"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"string"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" token"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Debug."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Log"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"Connected."}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        AuthToken."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"SaveToken"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(token);"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        LocalIdentity "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" identity;"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        OnConnected"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Invoke"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#6272A4"},children:"        // Request all tables"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Conn."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"SubscriptionBuilder"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"OnApplied"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(HandleSubscriptionApplied)"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"SubscribeToAllTables"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" HandleConnectError"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Exception"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ex"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Debug."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"LogError"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"Connection error: "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"ex"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" HandleDisconnect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"DbConnection"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" _conn"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Exception"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ex"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Debug."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Log"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"Disconnected."}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" (ex "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"!="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" null"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"            Debug."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"LogException"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ex);"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" HandleSubscriptionApplied"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SubscriptionEventContext"}),(0,c.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Debug."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Log"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:"Subscription applied!"}),(0,c.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        OnSubscriptionApplied"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Invoke"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" bool"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" IsConnected"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"        return"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" Conn "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"!="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" null"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" &&"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" Conn.IsActive;"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line"}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:" Disconnect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Conn."}),(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"Disconnect"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"        Conn "}),(0,c.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#BD93F9"},children:" null"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(s.p,{children:["Here we configure the connection to the database, by passing it some callbacks in addition to providing the ",(0,c.jsx)(s.code,{children:"SERVER_URI"})," and ",(0,c.jsx)(s.code,{children:"MODULE_NAME"})," to the connection. When the client connects, the SpacetimeDB SDK will call the ",(0,c.jsx)(s.code,{children:"HandleConnect"})," method, allowing us to start up the game."]}),"\n",(0,c.jsxs)(s.p,{children:["In our ",(0,c.jsx)(s.code,{children:"HandleConnect"})," callback we build a subscription and are calling ",(0,c.jsx)(s.code,{children:"Subscribe"})," and subscribing to all data in the database. This will cause SpacetimeDB to synchronize the state of all your tables with your Unity client's SpacetimeDB SDK's \"client cache\". You can also subscribe to specific tables using SQL syntax, e.g. ",(0,c.jsx)(s.code,{children:"SELECT * FROM my_table"}),". Our ",(0,c.jsx)(s.a,{href:"/sql",children:"SQL documentation"})," enumerates the operations that are accepted in our SQL syntax."]}),"\n",(0,c.jsx)(s.hr,{}),"\n",(0,c.jsx)(s.p,{children:(0,c.jsx)(s.strong,{children:"SDK Client Cache"})}),"\n",(0,c.jsxs)(s.p,{children:['The "SDK client cache" is a client-side view of the database defined by the supplied queries to the ',(0,c.jsx)(s.code,{children:"Subscribe"})," function. SpacetimeDB ensures that the results of subscription queries are automatically updated and pushed to the client cache as they change which allows efficient access without unnecessary server queries."]}),"\n",(0,c.jsx)(s.hr,{}),"\n",(0,c.jsx)(s.p,{children:"Now we're ready to connect the client and server. Press the play button in Unity."}),"\n",(0,c.jsx)(s.p,{children:"If all went well you should see the below output in your Unity logs."}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"SpacetimeDBClient: Connecting to ws://127.0.0.1:3000 blackholio\nConnected.\nSubscription applied!\n"})}),"\n",(0,c.jsx)(s.p,{children:"Subscription applied indicates that the SpacetimeDB SDK has evaluated your subscription queries and synchronized your local cache with your database's tables."}),"\n",(0,c.jsx)(s.p,{children:"We can also see that the server has logged the connection as well."}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" logs"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" blackholio"})]}),"\n",(0,c.jsx)(s.span,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#8BE9FD"},children:"..."})}),"\n",(0,c.jsxs)(s.span,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#50FA7B"},children:"2025-01-10T03:51:02.078700Z"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" DEBUG:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" src/lib.rs:63:"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" c200fb5be9524bfb8289c351516a1d9ea800f70a17a9a6937f11c0ed3854087d"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" just"}),(0,c.jsx)(s.span,{style:{color:"#F1FA8C"},children:" connected."})]})]})})}),"\n",(0,c.jsx)(s.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,c.jsx)(s.p,{children:"You've learned how to setup a Unity project with the SpacetimeDB SDK, write a basic SpacetimeDB server module, and how to connect your Unity client to SpacetimeDB. That's pretty much all there is to the setup. You're now ready to start building the game."}),"\n",(0,c.jsxs)(s.p,{children:["In the ",(0,c.jsx)(s.a,{href:"/unity/part-3",children:"next part"}),", we'll build out the functionality of the game and you'll learn how to access your table data and call reducers in Unity."]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(F,{...e})}):F(e)}},8720:(e,s,l)=>{l.d(s,{A:()=>a});l(3303);var n=l(3372);const c={tabItem:"tabItem_sydm"};var r=l(7711);function a({children:e,hidden:s,className:l}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,n.A)(c.tabItem,l),hidden:s,children:e})}}}]);