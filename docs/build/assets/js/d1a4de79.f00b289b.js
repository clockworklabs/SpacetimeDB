"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6956],{623:(s,l,e)=>{e.d(l,{A:()=>b});var n=e(3303),c=e(3372),r=e(9607),o=e(2592),a=e(8368),i=e(1711),t=e(4541),F=e(4930),d=e(6022);function h(s){return n.Children.toArray(s).filter(s=>"\n"!==s).map(s=>{if(!s||(0,n.isValidElement)(s)&&function(s){const{props:l}=s;return!!l&&"object"==typeof l&&"value"in l}(s))return s;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof s.type?s.type:s.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(s){const{values:l,children:e}=s;return(0,n.useMemo)(()=>{const s=l??function(s){return h(s).map(({props:{value:s,label:l,attributes:e,default:n}})=>({value:s,label:l,attributes:e,default:n}))}(e);return function(s){const l=(0,F.XI)(s,(s,l)=>s.value===l.value);if(l.length>0)throw new Error(`Docusaurus error: Duplicate values "${l.map(s=>s.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(s),s},[l,e])}function x({value:s,tabValues:l}){return l.some(l=>l.value===s)}function j({queryString:s=!1,groupId:l}){const e=(0,a.W6)(),c=function({queryString:s=!1,groupId:l}){if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!l)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return l??null}({queryString:s,groupId:l});return[(0,t.aZ)(c),(0,n.useCallback)(s=>{if(!c)return;const l=new URLSearchParams(e.location.search);l.set(c,s),e.replace({...e.location,search:l.toString()})},[c,e])]}function y(s){const{defaultValue:l,queryString:e=!1,groupId:c}=s,r=p(s),[o,a]=(0,n.useState)(()=>function({defaultValue:s,tabValues:l}){if(0===l.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!x({value:s,tabValues:l}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${l.map(s=>s.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const e=l.find(s=>s.default)??l[0];if(!e)throw new Error("Unexpected error: 0 tabValues");return e.value}({defaultValue:l,tabValues:r})),[t,F]=j({queryString:e,groupId:c}),[h,y]=function({groupId:s}){const l=function(s){return s?`docusaurus.tab.${s}`:null}(s),[e,c]=(0,d.Dv)(l);return[e,(0,n.useCallback)(s=>{l&&c.set(s)},[l,c])]}({groupId:c}),C=(()=>{const s=t??h;return x({value:s,tabValues:r})?s:null})();(0,i.A)(()=>{C&&a(C)},[C]);return{selectedValue:o,selectValue:(0,n.useCallback)(s=>{if(!x({value:s,tabValues:r}))throw new Error(`Can't select invalid tab value=${s}`);a(s),F(s),y(s)},[F,y,r]),tabValues:r}}var C=e(93);const m={tabList:"tabList_MbSD",tabItem:"tabItem_Ssy3"};var u=e(7711);function N({className:s,block:l,selectedValue:e,selectValue:n,tabValues:r}){const a=[],{blockElementScrollPositionUntilNextRender:i}=(0,o.a_)(),t=s=>{const l=s.currentTarget,c=a.indexOf(l),o=r[c].value;o!==e&&(i(l),n(o))},F=s=>{let l=null;switch(s.key){case"Enter":t(s);break;case"ArrowRight":{const e=a.indexOf(s.currentTarget)+1;l=a[e]??a[0];break}case"ArrowLeft":{const e=a.indexOf(s.currentTarget)-1;l=a[e]??a[a.length-1];break}}l?.focus()};return(0,u.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.A)("tabs",{"tabs--block":l},s),children:r.map(({value:s,label:l,attributes:n})=>(0,u.jsx)("li",{role:"tab",tabIndex:e===s?0:-1,"aria-selected":e===s,ref:s=>{a.push(s)},onKeyDown:F,onClick:t,...n,className:(0,c.A)("tabs__item",m.tabItem,n?.className,{"tabs__item--active":e===s}),children:l??s},s))})}function f({lazy:s,children:l,selectedValue:e}){const r=(Array.isArray(l)?l:[l]).filter(Boolean);if(s){const s=r.find(s=>s.props.value===e);return s?(0,n.cloneElement)(s,{className:(0,c.A)("margin-top--md",s.props.className)}):null}return(0,u.jsx)("div",{className:"margin-top--md",children:r.map((s,l)=>(0,n.cloneElement)(s,{key:l,hidden:s.props.value!==e}))})}function B(s){const l=y(s);return(0,u.jsxs)("div",{className:(0,c.A)(r.G.tabs.container,"tabs-container",m.tabList),children:[(0,u.jsx)(N,{...l,...s}),(0,u.jsx)(f,{...l,...s})]})}function b(s){const l=(0,C.A)();return(0,u.jsx)(B,{...s,children:h(s.children)},String(l))}},5484:(s,l,e)=>{e.d(l,{A:()=>n});const n=e.p+"assets/images/part-3-player-on-screen-2e752a62db574760fbdc41c9fa52992b.png"},6119:(s,l,e)=>{e.d(l,{R:()=>o,x:()=>a});var n=e(3303);const c={},r=n.createContext(c);function o(s){const l=n.useContext(r);return n.useMemo(function(){return"function"==typeof s?s(l):{...l,...s}},[l,s])}function a(s){let l;return l=s.disableParentContext?"function"==typeof s.components?s.components(c):s.components||c:o(s.components),n.createElement(r.Provider,{value:l},s.children)}},8720:(s,l,e)=>{e.d(l,{A:()=>o});e(3303);var n=e(3372);const c={tabItem:"tabItem_sydm"};var r=e(7711);function o({children:s,hidden:l,className:e}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,n.A)(c.tabItem,e),hidden:l,children:s})}},9813:(s,l,e)=>{e.r(l),e.d(l,{assets:()=>F,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"Unity tutorial/part-3","title":"3 - Gameplay","description":"Need help with the tutorial? Join our Discord server!","source":"@site/docs/03-Unity tutorial/04-part-3.mdx","sourceDirName":"03-Unity tutorial","slug":"/unity/part-3","permalink":"/unity/part-3","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"3 - Gameplay","slug":"/unity/part-3"},"sidebar":"sidebar","previous":{"title":"2 - Connecting to SpacetimeDB","permalink":"/unity/part-2"},"next":{"title":"4 - Moving and Colliding","permalink":"/unity/part-4"}}');var c=e(7711),r=e(6119),o=e(623),a=e(8720);const i={title:"3 - Gameplay",slug:"/unity/part-3"},t="Unity Tutorial - Part 3 - Gameplay",F={},d=[{value:"Spawning Food",id:"spawning-food",level:3},{value:"Logging Players In",id:"logging-players-in",level:3},{value:"Spawning Player Circles",id:"spawning-player-circles",level:3},{value:"Creating the Arena",id:"creating-the-arena",level:3},{value:"Creating GameObjects",id:"creating-gameobjects",level:3},{value:"EntityController",id:"entitycontroller",level:4},{value:"CircleController",id:"circlecontroller",level:4},{value:"FoodController",id:"foodcontroller",level:4},{value:"PlayerController",id:"playercontroller",level:4},{value:"Hooking up the Data",id:"hooking-up-the-data",level:3},{value:"Camera Controller",id:"camera-controller",level:3},{value:"Entering the Game",id:"entering-the-game",level:3},{value:"Trying it out",id:"trying-it-out",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"Next Steps",id:"next-steps",level:3}];function h(s){const l={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,r.R)(),...s.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.header,{children:(0,c.jsx)(l.h1,{id:"unity-tutorial---part-3---gameplay",children:"Unity Tutorial - Part 3 - Gameplay"})}),"\n",(0,c.jsxs)(l.p,{children:["Need help with the tutorial? ",(0,c.jsx)(l.a,{href:"https://discord.gg/spacetimedb",children:"Join our Discord server"}),"!"]}),"\n",(0,c.jsxs)(l.p,{children:["This progressive tutorial is continued from ",(0,c.jsx)(l.a,{href:"/unity/part-2",children:"part 2"}),"."]}),"\n",(0,c.jsx)(l.h3,{id:"spawning-food",children:"Spawning Food"}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(a.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(l.p,{children:["Let's start by spawning food into the map. The first thing we need to do is create a new, special reducer called the ",(0,c.jsx)(l.code,{children:"init"})," reducer. SpacetimeDB calls the ",(0,c.jsx)(l.code,{children:"init"})," reducer automatically when first publish your module, and also after any time you run with ",(0,c.jsx)(l.code,{children:"publish --delete-data"}),". It gives you an opportunity to initialize the state of your database before any clients connect."]}),(0,c.jsxs)(l.p,{children:["Add this new reducer above our ",(0,c.jsx)(l.code,{children:"connect"})," reducer."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"// Note the `init` parameter passed to the reducer macro."})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"// That indicates to SpacetimeDB that it should be called"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"// once upon database creation."})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer(init)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" init"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    log"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"info!"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Initializing..."'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        world_size"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1000"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(l.p,{children:["This reducer also demonstrates how to insert new rows into a table. Here we are adding a single ",(0,c.jsx)(l.code,{children:"Config"})," row to the ",(0,c.jsx)(l.code,{children:"config"})," table with the ",(0,c.jsx)(l.code,{children:"try_insert"})," function. ",(0,c.jsx)(l.code,{children:"try_insert"})," returns an error if inserting the row into the table would violate any constraints, like unique constraints, on the table. You can also use ",(0,c.jsx)(l.code,{children:"insert"})," which panics on constraint violations if you know for sure that you will not violate any constraints."]}),(0,c.jsxs)(l.p,{children:["Now that we've ensured that our database always has a valid ",(0,c.jsx)(l.code,{children:"world_size"})," let's spawn some food into the map. Add the following code to the end of the file."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" FOOD_MASS_MIN"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" ="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" FOOD_MASS_MAX"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" ="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 4"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" TARGET_FOOD_COUNT"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" usize"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" ="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 600"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" mass_to_radius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(mass"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    (mass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"as"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"sqrt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" spawn_food"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"count"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"() "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Are there no logged in players? Skip food spawn."})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        return"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(());"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"id"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"ok_or"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Config not found"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"world_size;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" mut"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"rng"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" mut"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"food"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"count"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    while"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" TARGET_FOOD_COUNT"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" as"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u64"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_mass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"gen_range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"FOOD_MASS_MIN"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:".."}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"FOOD_MASS_MAX"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_radius "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" mass_to_radius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food_mass);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" x "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"gen_range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food_radius"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:".."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"as"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" -"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_radius);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" y "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"gen_range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food_radius"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:".."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"as"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" -"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_radius);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            entity_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            position"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" { x, y },"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            mass"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_mass,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"food"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Food"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            entity_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"entity_id,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        food_count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        log"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"info!"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Spawned food! {}"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", entity"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"entity_id);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(l.p,{children:["In this reducer, we are using the ",(0,c.jsx)(l.code,{children:"world_size"})," we configured along with the ",(0,c.jsx)(l.code,{children:"ReducerContext"}),"'s random number generator ",(0,c.jsx)(l.code,{children:".rng()"})," function to place 600 food uniformly randomly throughout the map. We've also chosen the ",(0,c.jsx)(l.code,{children:"mass"})," of the food to be a random number between 2 and 4 inclusive."]})]}),(0,c.jsxs)(a.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(l.p,{children:["Let's start by spawning food into the map. The first thing we need to do is create a new, special reducer called the ",(0,c.jsx)(l.code,{children:"Init"})," reducer. SpacetimeDB calls the ",(0,c.jsx)(l.code,{children:"Init"})," reducer automatically when you first publish your module, and also after any time you run with ",(0,c.jsx)(l.code,{children:"publish --delete-data"}),". It gives you an opportunity to initialize the state of your database before any clients connect."]}),(0,c.jsxs)(l.p,{children:["Add this new reducer above our ",(0,c.jsx)(l.code,{children:"Connect"})," reducer."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"// Note the `init` parameter passed to the reducer macro."})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"// That indicates to SpacetimeDB that it should be called"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"// once upon database creation."})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ReducerKind.Init)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Init"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    Log."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Info"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Initializing..."}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.config."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" { world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1000"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" });"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(l.p,{children:["This reducer also demonstrates how to insert new rows into a table. Here we are adding a single ",(0,c.jsx)(l.code,{children:"Config"})," row to the ",(0,c.jsx)(l.code,{children:"config"})," table with the ",(0,c.jsx)(l.code,{children:"Insert"})," function."]}),(0,c.jsxs)(l.p,{children:["Now that we've ensured that our database always has a valid ",(0,c.jsx)(l.code,{children:"world_size"})," let's spawn some food into the map. Add the following code to the end of the ",(0,c.jsx)(l.code,{children:"Module"})," class."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" FOOD_MASS_MIN "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" FOOD_MASS_MAX "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 4"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" TARGET_FOOD_COUNT "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 600"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToRadius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" mass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" MathF."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Sqrt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(mass);"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnFood"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (ctx.Db.player.Count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//Are there no players yet?"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (ctx.Db.config.id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"??"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" throw"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Exception"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Config not found"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")).world_size;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Rng;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.food.Count;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    while"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (food_count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" TARGET_FOOD_COUNT)"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_mass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(FOOD_MASS_MIN, FOOD_MASS_MAX);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_radius "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToRadius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food_mass);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" x "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food_radius, world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_radius);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" y "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food_radius, world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_radius);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.entity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(x, y),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            mass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" food_mass,"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        });"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Db.food."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Food"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            entity_id "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity.entity_id,"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        });"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        food_count"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"++"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Log."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Info"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Spawned food! "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"entity"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"entity_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"this"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Random"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" rng"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"float"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" min"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"float"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" max"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"NextSingle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"() "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (max "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" min) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" min;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"this"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Random"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" rng"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" min"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" max"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")rng."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"NextInt64"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(min, max);"})]})]})})}),(0,c.jsxs)(l.p,{children:["In this reducer, we are using the ",(0,c.jsx)(l.code,{children:"world_size"})," we configured along with the ",(0,c.jsx)(l.code,{children:"ReducerContext"}),"'s random number generator ",(0,c.jsx)(l.code,{children:".Rng"})," function to place 600 food uniformly randomly throughout the map. We've also chosen the ",(0,c.jsx)(l.code,{children:"mass"})," of the food to be a random number between 2 and 4 inclusive."]}),(0,c.jsxs)(l.p,{children:["We also added two helper functions so we can get a random range as either a ",(0,c.jsx)(l.code,{children:"uint"})," or a ",(0,c.jsx)(l.code,{children:"float"}),"."]})]})]}),"\n",(0,c.jsx)(l.p,{children:"Although, we've written the reducer to spawn food, no food will actually be spawned until we call the function while players are logged in. This raises the question, who should call this function and when?"}),"\n",(0,c.jsx)(l.p,{children:'We would like for this function to be called periodically to "top up" the amount of food on the map so that it never falls very far below our target amount of food. SpacetimeDB has built in functionality for exactly this. With SpacetimeDB you can schedule your module to call itself in the future or repeatedly with reducers.'}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(a.A,{value:"rust",label:"Rust",children:[(0,c.jsx)(l.p,{children:"In order to schedule a reducer to be called we have to create a new table which specifies when and how a reducer should be called. Add this new table to the top of the file, below your imports."}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" spawn_food_timer, scheduled(spawn_food))]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpawnFoodTimer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    #[primary_key]"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    #[auto_inc]"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    scheduled_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u64"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    scheduled_at"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ScheduleAt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(l.p,{children:["Note the ",(0,c.jsx)(l.code,{children:"scheduled(spawn_food)"})," parameter in the table macro. This tells SpacetimeDB that the rows in this table specify a schedule for when the ",(0,c.jsx)(l.code,{children:"spawn_food"})," reducer should be called. Each scheduled table requires a ",(0,c.jsx)(l.code,{children:"scheduled_id"})," and a ",(0,c.jsx)(l.code,{children:"scheduled_at"})," field so that SpacetimeDB can call your reducer, however you can also add your own fields to these rows as well."]})]}),(0,c.jsxs)(a.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(l.p,{children:["In order to schedule a reducer to be called we have to create a new table which specifies when an how a reducer should be called. Add this new table to the top of the ",(0,c.jsx)(l.code,{children:"Module"})," class."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"spawn_food_timer"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", Scheduled "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" nameof"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(SpawnFood), ScheduledAt "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" nameof"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(scheduled_at))]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpawnFoodTimer"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"AutoInc"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" ulong"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" scheduled_id;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" ScheduleAt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" scheduled_at;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(l.p,{children:["Note the ",(0,c.jsx)(l.code,{children:"Scheduled = nameof(SpawnFood)"})," parameter in the table macro. This tells SpacetimeDB that the rows in this table specify a schedule for when the ",(0,c.jsx)(l.code,{children:"SpawnFood"})," reducer should be called. Each scheduled table requires a ",(0,c.jsx)(l.code,{children:"scheduled_id"})," and a ",(0,c.jsx)(l.code,{children:"scheduled_at"})," field so that SpacetimeDB can call your reducer, however you can also add your own fields to these rows as well."]})]})]}),"\n",(0,c.jsx)(l.p,{children:"You can create, delete, or change a schedule by inserting, deleting, or updating rows in this table."}),"\n",(0,c.jsxs)(l.p,{children:["You will see an error telling you that the ",(0,c.jsx)(l.code,{children:"spawn_food"})," reducer needs to take two arguments, but currently only takes one. This is because the schedule row must be passed in to all scheduled reducers. Modify your ",(0,c.jsx)(l.code,{children:"spawn_food"})," reducer to take the scheduled row as an argument."]}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(a.A,{value:"rust",label:"Rust",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" spawn_food"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", _timer"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpawnFoodTimer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"    // ..."})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})}),(0,c.jsx)(a.A,{value:"csharp",label:"C#",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnFood"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpawnFoodTimer"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" _timer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"    // ..."})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})})]}),"\n",(0,c.jsxs)(l.p,{children:["In our case we aren't interested in the data on the row, so we name the argument ",(0,c.jsx)(l.code,{children:"_timer"}),"."]}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(a.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(l.p,{children:["Let's modify our ",(0,c.jsx)(l.code,{children:"init"})," reducer to schedule our ",(0,c.jsx)(l.code,{children:"spawn_food"})," reducer to be called every 500 milliseconds."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer(init)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" init"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    log"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"info!"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Initializing..."'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        world_size"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1000"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"spawn_food_timer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpawnFoodTimer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        scheduled_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        scheduled_at"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ScheduleAt"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Interval"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Duration"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"from_millis"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"500"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"into"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsx)(l.admonition,{type:"note",children:(0,c.jsxs)(l.p,{children:["You can use ",(0,c.jsx)(l.code,{children:"ScheduleAt::Interval"})," to schedule a reducer call at an interval like we're doing here. SpacetimeDB will continue to call the reducer at this interval until you remove the row. You can also use ",(0,c.jsx)(l.code,{children:"ScheduleAt::Time()"})," to specify a specific at which to call a reducer once. SpacetimeDB will remove that row automatically after the reducer has been called."]})})]}),(0,c.jsxs)(a.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(l.p,{children:["Let's modify our ",(0,c.jsx)(l.code,{children:"Init"})," reducer to schedule our ",(0,c.jsx)(l.code,{children:"SpawnFood"})," reducer to be called every 500 milliseconds."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ReducerKind.Init)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Init"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    Log."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Info"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Initializing..."}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.config."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" { world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1000"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" });"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.spawn_food_timer."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpawnFoodTimer"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        scheduled_at "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" ScheduleAt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Interval"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(TimeSpan."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"FromMilliseconds"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"500"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"))"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    });"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsx)(l.admonition,{type:"note",children:(0,c.jsxs)(l.p,{children:["You can use ",(0,c.jsx)(l.code,{children:"ScheduleAt.Interval"})," to schedule a reducer call at an interval like we're doing here. SpacetimeDB will continue to call the reducer at this interval until you remove the row. You can also use ",(0,c.jsx)(l.code,{children:"ScheduleAt.Time()"})," to specify a specific at which to call a reducer once. SpacetimeDB will remove that row automatically after the reducer has been called."]})})]})]}),"\n",(0,c.jsx)(l.h3,{id:"logging-players-in",children:"Logging Players In"}),"\n",(0,c.jsx)(l.p,{children:"Let's continue building out our server module by modifying it to log in a player when they connect to the database, or to create a new player if they've never connected before."}),"\n",(0,c.jsxs)(l.p,{children:["Let's add a second table to our ",(0,c.jsx)(l.code,{children:"Player"})," struct. Modify the ",(0,c.jsx)(l.code,{children:"Player"})," struct by adding this above the struct:"]}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(a.A,{value:"rust",label:"Rust",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(l.code,{children:(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" logged_out_player)]"})]})})})})}),(0,c.jsx)(a.A,{value:"csharp",label:"C#",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(l.code,{children:(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"logged_out_player"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")]"})]})})})})})]}),"\n",(0,c.jsx)(l.p,{children:"Your struct should now look like this:"}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(a.A,{value:"rust",label:"Rust",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player, public)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" logged_out_player)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[derive("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Debug"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Clone"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    #[primary_key]"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    identity"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    #[unique]"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    #[auto_inc]"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    player_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    name"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})}),(0,c.jsx)(a.A,{value:"csharp",label:"C#",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", Public "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" true"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"logged_out_player"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" struct"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" identity;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Unique"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"AutoInc"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_id;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" string"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" name;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})})]}),"\n",(0,c.jsxs)(l.p,{children:["This line creates an additional tabled called ",(0,c.jsx)(l.code,{children:"logged_out_player"})," whose rows share the same ",(0,c.jsx)(l.code,{children:"Player"})," type as in the ",(0,c.jsx)(l.code,{children:"player"})," table."]}),"\n",(0,c.jsxs)(l.admonition,{type:"note",children:[(0,c.jsxs)(l.p,{children:["IMPORTANT! Note that this new table is not marked ",(0,c.jsx)(l.code,{children:"public"}),". This means that it can only be accessed by the database owner (which is almost always the database creator). In order to prevent any unintended data access, all SpacetimeDB tables are private by default."]}),(0,c.jsx)(l.p,{children:"If your client isn't syncing rows from the server, check that your table is not accidentally marked private."})]}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(a.A,{value:"rust",label:"Rust",children:[(0,c.jsxs)(l.p,{children:["Next, modify your ",(0,c.jsx)(l.code,{children:"connect"})," reducer and add a new ",(0,c.jsx)(l.code,{children:"disconnect"})," reducer below it:"]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer(client_connected)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" connect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    if"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" let"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Some"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"logged_out_player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"sender) {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"clone"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"());"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"logged_out_player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"identity);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    } "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"else"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            identity"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"sender,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            player_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            name"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" String"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer(client_disconnected)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" disconnect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"sender)"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"ok_or"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Player not found"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_id "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"player_id;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"logged_out_player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"sender);"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]}),(0,c.jsxs)(a.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(l.p,{children:["Next, modify your ",(0,c.jsx)(l.code,{children:"Connect"})," reducer and add a new ",(0,c.jsx)(l.code,{children:"Disconnect"})," reducer below it:"]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ReducerKind.ClientConnected)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Connect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.logged_out_player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx.Sender);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"!="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" null"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Db.player."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player.Value);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Db.logged_out_player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player.Value.identity);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    else"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Db.player."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            identity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Sender,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' ""'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        });"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ReducerKind.ClientDisconnected)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Disconnect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx.Sender) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"??"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" throw"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Exception"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Player not found"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.logged_out_player."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player.identity);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]})]}),"\n",(0,c.jsxs)(l.p,{children:["Now when a client connects, if the player corresponding to the client is in the ",(0,c.jsx)(l.code,{children:"logged_out_player"})," table, we will move them into the ",(0,c.jsx)(l.code,{children:"player"})," table, thus indicating that they are logged in and connected. For any new unrecognized client connects we will create a ",(0,c.jsx)(l.code,{children:"Player"})," and insert it into the ",(0,c.jsx)(l.code,{children:"player"})," table."]}),"\n",(0,c.jsxs)(l.p,{children:["When a player disconnects, we will transfer their player row from the ",(0,c.jsx)(l.code,{children:"player"})," table to the ",(0,c.jsx)(l.code,{children:"logged_out_player"})," table to indicate they're offline."]}),"\n",(0,c.jsxs)(l.admonition,{type:"note",children:[(0,c.jsxs)(l.p,{children:["Note that we could have added a ",(0,c.jsx)(l.code,{children:"logged_in"})," boolean to the ",(0,c.jsx)(l.code,{children:"Player"})," type to indicated whether the player is logged in. There's nothing incorrect about that approach, however for several reasons we recommend this two table approach:"]}),(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:["We can iterate over all logged in players without any ",(0,c.jsx)(l.code,{children:"if"})," statements or branching"]}),"\n",(0,c.jsxs)(l.li,{children:["The ",(0,c.jsx)(l.code,{children:"Player"})," type now uses less program memory improving cache efficiency"]}),"\n",(0,c.jsxs)(l.li,{children:["We can easily check whether a player is logged in, based on whether their row exists in the ",(0,c.jsx)(l.code,{children:"player"})," table"]}),"\n"]}),(0,c.jsxs)(l.p,{children:["This approach is more generally referred to as ",(0,c.jsx)(l.a,{href:"https://www.dataorienteddesign.com/dodmain/node4.html",children:"existence based processing"})," and it is a common technique in data-oriented design."]})]}),"\n",(0,c.jsx)(l.h3,{id:"spawning-player-circles",children:"Spawning Player Circles"}),"\n",(0,c.jsx)(l.p,{children:"Now that we've got our food spawning and our players set up, let's create a match and spawn player circle entities into it. The first thing we should do before spawning a player into a match is give them a name."}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsxs)(a.A,{value:"rust",label:"Rust",children:[(0,c.jsx)(l.p,{children:"Add the following to the bottom of your file."}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" START_PLAYER_MASS"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" ="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 15"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" enter_game"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", name"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    log"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"info!"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Creating player with name {}"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", name);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" mut"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" ="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"sender)"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"ok_or"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'""'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_id "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"player_id;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" name;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"update"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"    spawn_player_initial_circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx, player_id)"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" spawn_player_initial_circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", player_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" mut"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"rng"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"config"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"id"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"ok_or"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Config not found"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"world_size;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_start_radius "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" mass_to_radius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"START_PLAYER_MASS"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" x "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"gen_range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player_start_radius"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:".."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"as"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" -"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_start_radius));"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" y "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"gen_range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player_start_radius"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:".."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"as"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" f32"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" -"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_start_radius));"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"    spawn_circle_at"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx,"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        player_id,"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"        START_PLAYER_MASS"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"        DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" { x, y },"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"timestamp,"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    )"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" spawn_circle_at"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    player_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    mass"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    position"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    timestamp"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Timestamp"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        entity_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        position,"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        mass,"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"try_insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        entity_id"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"entity_id,"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        player_id,"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        direction"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" { x"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0.0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", y"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1.0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" },"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        speed"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0.0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        last_split_time"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" timestamp,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    })"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(entity)"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(l.p,{children:["The ",(0,c.jsx)(l.code,{children:"enter_game"})," reducer takes one argument, the player's ",(0,c.jsx)(l.code,{children:"name"}),". We can use this name to display as a label for the player in the match, by storing the name on the player's row. We are also spawning some circles for the player to control now that they are entering the game. To do this, we choose a random position within the bounds of the arena and create a new entity and corresponding circle row."]})]}),(0,c.jsxs)(a.A,{value:"csharp",label:"C#",children:[(0,c.jsxs)(l.p,{children:["Add the following to the end of the ",(0,c.jsx)(l.code,{children:"Module"})," class."]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"const"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" START_PLAYER_MASS "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 15"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" EnterGame"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"string"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" name"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    Log."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Info"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Creating player with name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"name"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx.Sender) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"??"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" throw"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Exception"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Player not found"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    player.name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" name;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Update"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"    SpawnPlayerInitialCircle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx, player.player_id);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Entity"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnPlayerInitialCircle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" player_id"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Rng;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (ctx.Db.config.id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"??"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" throw"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Exception"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Config not found"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")).world_size;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_start_radius "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToRadius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(START_PLAYER_MASS);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" x "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player_start_radius, world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_start_radius);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" y "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" rng."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Range"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player_start_radius, world_size "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_start_radius);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    return"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnCircleAt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx,"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        player_id,"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        START_PLAYER_MASS,"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(x, y),"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Timestamp"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    );"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Entity"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnCircleAt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" player_id"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" mass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" position"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Timestamp"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" timestamp"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.entity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Entity"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" position,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        mass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" mass,"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    });"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.circle."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Circle"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        entity_id "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity.entity_id,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        player_id "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_id,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        direction "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"1"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        speed "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        last_split_time "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" timestamp,"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    });"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,c.jsxs)(l.p,{children:["The ",(0,c.jsx)(l.code,{children:"EnterGame"})," reducer takes one argument, the player's ",(0,c.jsx)(l.code,{children:"name"}),". We can use this name to display as a label for the player in the match, by storing the name on the player's row. We are also spawning some circles for the player to control now that they are entering the game. To do this, we choose a random position within the bounds of the arena and create a new entity and corresponding circle row."]})]})]}),"\n",(0,c.jsxs)(l.p,{children:["Let's also modify our ",(0,c.jsx)(l.code,{children:"disconnect"})," reducer to remove the circles from the arena when the player disconnects from the database server."]}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(a.A,{value:"rust",label:"Rust",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"::"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"reducer(client_disconnected)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"pub"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" fn"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" disconnect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:":"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" &"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"->"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"sender)"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"ok_or"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:'"Player not found"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    let"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player_id "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"player_id;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"logged_out_player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"sender);"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"    // Remove any circles from the arena"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    for"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" circle "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"in"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"player_id"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"filter"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"player_id) {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"entity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"entity_id"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"circle"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"entity_id);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"db"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"entity_id"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"circle"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"entity_id);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Ok"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})}),(0,c.jsx)(a.A,{value:"csharp",label:"C#",children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ReducerKind.ClientDisconnected)]"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Disconnect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ctx.Sender) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"??"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" throw"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Exception"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Player not found"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"    // Remove any circles from the arena"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    foreach"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" circle "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"in"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.circle.player_id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Filter"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player.player_id))"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ctx.Db.entity.entity_id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(circle.entity_id) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"??"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" throw"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Exception"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Could not find circle"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Db.entity.entity_id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(entity.entity_id);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Db.circle.entity_id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(entity.entity_id);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.logged_out_player."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Insert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    ctx.Db.player.identity."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Delete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player.identity);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})})]}),"\n",(0,c.jsx)(l.p,{children:"Finally, publish the new module to SpacetimeDB with this command:"}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(l.code,{children:(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:" publish"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" --server"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:" local"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:" blackholio"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" --delete-data"})]})})})}),"\n",(0,c.jsx)(l.p,{children:"Deleting the data is optional in this case, but in case you've been messing around with the module we can just start fresh."}),"\n",(0,c.jsx)(l.h3,{id:"creating-the-arena",children:"Creating the Arena"}),"\n",(0,c.jsx)(l.p,{children:"Now that we've set up our server logic to spawn food and players, let's continue developing our Unity client to display what we have so far."}),"\n",(0,c.jsxs)(l.p,{children:["Start by adding ",(0,c.jsx)(l.code,{children:"SetupArena"})," and ",(0,c.jsx)(l.code,{children:"CreateBorderCube"})," methods to your ",(0,c.jsx)(l.code,{children:"GameManager"})," class:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SetupArena"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"float"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" worldSize"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", borderThickness)); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//North"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", borderThickness)); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//South"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(borderThickness, worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//East"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(borderThickness, worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//West"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Vector2"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" position"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Vector2"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" scale"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" cube "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" GameObject."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"CreatePrimitive"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(PrimitiveType.Cube);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        cube.name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' "'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Border"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        cube.transform.localScale "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(scale.x, scale.y, "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"1"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        cube.transform.position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(position.x, position.y, "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"1"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        cube."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"GetComponent"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"MeshRenderer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:">().material "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderMaterial;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["In your ",(0,c.jsx)(l.code,{children:"HandleSubscriptionApplied"})," let's now call ",(0,c.jsx)(l.code,{children:"SetupArena"})," method. Modify your ",(0,c.jsx)(l.code,{children:"HandleSubscriptionApplied"})," method as in the below."]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" HandleSubscriptionApplied"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SubscriptionEventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Debug."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Log"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Subscription applied!"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        OnSubscriptionApplied"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Invoke"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Once we have the initial subscription sync'd to the client cache"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Get the world size from the config table and set up the arena"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Conn.Db.Config.Id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:").WorldSize;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        SetupArena"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["The ",(0,c.jsx)(l.code,{children:"OnApplied"})," callback will be called after the server synchronizes the initial state of your tables with your client. Once the sync has happened, we can look up the world size from the ",(0,c.jsx)(l.code,{children:"config"})," table and use it to set up our arena."]}),"\n",(0,c.jsxs)(l.p,{children:["In the scene view, select the ",(0,c.jsx)(l.code,{children:"GameManager"})," object. Click on the ",(0,c.jsx)(l.code,{children:"Border Material"})," property and choose ",(0,c.jsx)(l.code,{children:"Sprites-Default"}),"."]}),"\n",(0,c.jsx)(l.h3,{id:"creating-gameobjects",children:"Creating GameObjects"}),"\n",(0,c.jsxs)(l.p,{children:["Now that we have our arena all set up, we need to take the row data that SpacetimeDB syncs with our client and use it to create and draw ",(0,c.jsx)(l.code,{children:"GameObject"}),"s on the screen."]}),"\n",(0,c.jsxs)(l.p,{children:["Let's start by making some controller scripts for each of the game objects we'd like to have in our scene. In the project window, right-click and select ",(0,c.jsx)(l.code,{children:"Create > C# Script"}),". Name the new script ",(0,c.jsx)(l.code,{children:"PlayerController.cs"}),". Repeat that process for ",(0,c.jsx)(l.code,{children:"CircleController.cs"})," and ",(0,c.jsx)(l.code,{children:"FoodController.cs"}),". We'll modify the contents of these files later."]}),"\n",(0,c.jsxs)(l.p,{children:["Now let's make some prefabs for our game objects. In the scene hierarchy window, create a new ",(0,c.jsx)(l.code,{children:"GameObject"})," by right-clicking and selecting:"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{children:"2D Object > Sprites > Circle\n"})}),"\n",(0,c.jsxs)(l.p,{children:["Rename the new game object in the scene to ",(0,c.jsx)(l.code,{children:"CirclePrefab"}),". Next in the ",(0,c.jsx)(l.code,{children:"Inspector"})," window click the ",(0,c.jsx)(l.code,{children:"Add Component"})," button and add the ",(0,c.jsx)(l.code,{children:"Circle Controller"})," script component that we just created. Finally drag the object into the ",(0,c.jsx)(l.code,{children:"Project"})," folder. Once the prefab file is created, delete the ",(0,c.jsx)(l.code,{children:"CirclePrefab"})," object from the scene. We'll use this prefab to draw the circles that a player controls."]}),"\n",(0,c.jsxs)(l.p,{children:["Next repeat that same process for the ",(0,c.jsx)(l.code,{children:"FoodPrefab"})," and ",(0,c.jsx)(l.code,{children:"Food Controller"})," component."]}),"\n",(0,c.jsxs)(l.p,{children:["In the ",(0,c.jsx)(l.code,{children:"Project"})," view, double click the ",(0,c.jsx)(l.code,{children:"CirclePrefab"})," to bring it up in the scene view. Right-click anywhere in the hierarchy and navigate to:"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{children:"UI > Text - Text Mesh Pro\n"})}),"\n",(0,c.jsxs)(l.p,{children:['This will add a label to the circle prefab. You may need to import "TextMeshPro Essential Resources" into Unity in order to add the TextMeshPro element. Your logs will say "[TMP Essential Resources] have been imported." if it has worked correctly. Don\'t forget to set the transform position of the label to ',(0,c.jsx)(l.code,{children:"Pos X: 0, Pos Y: 0, Pos Z: 0"}),"."]}),"\n",(0,c.jsxs)(l.p,{children:["Finally we need to make the ",(0,c.jsx)(l.code,{children:"PlayerPrefab"}),". In the hierarchy window, create a new ",(0,c.jsx)(l.code,{children:"GameObject"})," by right-clicking and selecting:"]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{children:"Create Empty\n"})}),"\n",(0,c.jsxs)(l.p,{children:["Rename the game object to ",(0,c.jsx)(l.code,{children:"PlayerPrefab"}),". Next in the ",(0,c.jsx)(l.code,{children:"Inspector"})," window click the ",(0,c.jsx)(l.code,{children:"Add Component"})," button and add the ",(0,c.jsx)(l.code,{children:"Player Controller"})," script component that we just created. Next drag the object into the ",(0,c.jsx)(l.code,{children:"Project"})," folder. Once the prefab file is created, delete the ",(0,c.jsx)(l.code,{children:"PlayerPrefab"})," object from the scene."]}),"\n",(0,c.jsx)(l.h4,{id:"entitycontroller",children:"EntityController"}),"\n",(0,c.jsxs)(l.p,{children:["Let's also create an ",(0,c.jsx)(l.code,{children:"EntityController"})," script which will serve as a base class for both our ",(0,c.jsx)(l.code,{children:"CircleController"})," and ",(0,c.jsx)(l.code,{children:"FoodController"})," classes since both ",(0,c.jsx)(l.code,{children:"Circle"}),"s and ",(0,c.jsx)(l.code,{children:"Food"})," are entities."]}),"\n",(0,c.jsxs)(l.p,{children:["Create a new file called ",(0,c.jsx)(l.code,{children:"EntityController.cs"})," and replace its contents with:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Generic"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Linq"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Unity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"VisualScripting"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" abstract"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD"},children:" EntityController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" : "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"MonoBehaviour"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" const"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" LERP_DURATION_SEC "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0.1f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" readonly"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" int"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ShaderColorProperty "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Shader."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"PropertyToID"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"_Color"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ["}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"DoNotSerialize"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"] "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" EntityId;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" protected"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" LerpTime;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" protected"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" LerpStartPosition;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" protected"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" LerpTargetPosition;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" protected"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" TargetScale;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" protected"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" virtual"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Spawn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" entityId"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  EntityId "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityId;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" GameManager.Conn.Db.Entity.EntityId."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(entityId);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  LerpStartPosition "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" LerpTargetPosition "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" transform.position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")entity.Position;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  transform.localScale "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Vector3.one;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  TargetScale "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToScale"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(entity.Mass);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SetColor"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"  GetComponent"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpriteRenderer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:">().material."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"SetColor"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ShaderColorProperty, color);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" virtual"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" OnEntityUpdated"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" newVal"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  LerpTime "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  LerpStartPosition "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" transform.position;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  LerpTargetPosition "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")newVal.Position;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  TargetScale "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToScale"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(newVal.Mass);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" virtual"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" OnDelete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"  Destroy"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(gameObject);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" virtual"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Update"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"  // Interpolate position and scale"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  LerpTime "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Mathf."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Min"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(LerpTime "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Time.deltaTime, LERP_DURATION_SEC);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  transform.position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Vector3."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Lerp"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(LerpStartPosition, LerpTargetPosition, LerpTime "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" LERP_DURATION_SEC);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  transform.localScale "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Vector3."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Lerp"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(transform.localScale, TargetScale, Time.deltaTime "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 8"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToScale"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" mass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" diameter "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToDiameter"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(mass);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  return"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(diameter, diameter, "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"1"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToRadius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" mass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Mathf."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Sqrt"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(mass);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToDiameter"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" mass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" MassToRadius"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(mass) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["The ",(0,c.jsx)(l.code,{children:"EntityController"})," script just provides some helper functions and basic functionality to manage our game objects based on entity updates."]}),"\n",(0,c.jsxs)(l.blockquote,{children:["\n",(0,c.jsx)(l.p,{children:"One notable feature is that we linearly interpolate (lerp) between the position where the server says the entity is, and where we actually draw it. This is a common technique which provides for smoother movement."}),"\n",(0,c.jsxs)(l.p,{children:["If you're interested in learning more checkout ",(0,c.jsx)(l.a,{href:"https://gabrielgambetta.com/client-side-prediction-live-demo.html",children:"this demo"})," from Gabriel Gambetta."]}),"\n"]}),"\n",(0,c.jsxs)(l.p,{children:["At this point you'll have a compilation error because we can't yet convert from ",(0,c.jsx)(l.code,{children:"SpacetimeDB.Types.DbVector2"})," to ",(0,c.jsx)(l.code,{children:"UnityEngine.Vector2"}),". To fix this, let's also create a new ",(0,c.jsx)(l.code,{children:"Extensions.cs"})," script and replace the contents with:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"namespace"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" partial"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD"},children:" DbVector2"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" implicit"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" operator"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" vec"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"   return"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(vec.X, vec.Y);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" implicit"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" operator"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Vector2"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" vec"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"   return"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" DbVector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(vec.x, vec.y);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["This just allows us to implicitly convert between our ",(0,c.jsx)(l.code,{children:"DbVector2"})," type and the Unity ",(0,c.jsx)(l.code,{children:"Vector2"})," type."]}),"\n",(0,c.jsx)(l.h4,{id:"circlecontroller",children:"CircleController"}),"\n",(0,c.jsxs)(l.p,{children:["Now open the ",(0,c.jsx)(l.code,{children:"CircleController"})," script and modify the contents of the ",(0,c.jsx)(l.code,{children:"CircleController"})," script to be:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Generic"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD"},children:" CircleController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" : "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EntityController"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"[] ColorPalette "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"[]"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        //Yellow"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"175"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"159"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"49"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"175"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"116"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"49"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        //Purple"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"112"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"47"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"252"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"51"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"91"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"252"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        //Red"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"176"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"54"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"54"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"176"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"109"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"54"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"141"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"43"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"99"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        //Blue"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"188"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"250"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"7"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"50"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"251"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"28"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"146"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" };"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Owner;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Spawn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Circle"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" owner"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:"        base"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Spawn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(circle.EntityId);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"  SetColor"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ColorPalette[circle.PlayerId "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"%"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ColorPalette.Length]);"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:"        this"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:".Owner "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" owner;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        GetComponentInChildren"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"TMPro"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"TextMeshProUGUI"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:">().text "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" owner.Username;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" override"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" OnDelete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:"  base"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"OnDelete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(context);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Owner."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"OnCircleDeleted"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:"this"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["At the top, we're just defining some possible colors for our circle. We've also created a spawn function which takes a ",(0,c.jsx)(l.code,{children:"Circle"})," (same type that's in our ",(0,c.jsx)(l.code,{children:"circle"})," table) and a ",(0,c.jsx)(l.code,{children:"PlayerController"})," which sets the color based on the circle's player ID, as well as setting the text of the Cricle to be the player's username."]}),"\n",(0,c.jsxs)(l.p,{children:["Note that the ",(0,c.jsx)(l.code,{children:"CircleController"})," inherits from the ",(0,c.jsx)(l.code,{children:"EntityController"}),", not ",(0,c.jsx)(l.code,{children:"MonoBehavior"}),"."]}),"\n",(0,c.jsx)(l.h4,{id:"foodcontroller",children:"FoodController"}),"\n",(0,c.jsxs)(l.p,{children:["Next open the ",(0,c.jsx)(l.code,{children:"FoodController.cs"})," file and replace the contents with:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Unity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"VisualScripting"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD"},children:" FoodController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" : "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EntityController"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"[] ColorPalette "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"[]"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"119"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"252"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"173"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"76"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"250"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"146"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"35"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"246"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"120"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"119"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"251"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"201"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"76"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"249"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"184"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Color"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Color32"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"35"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"245"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"165"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"255"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" };"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Spawn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Food"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" food"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:"        base"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Spawn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food.EntityId);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"  SetColor"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(ColorPalette[EntityId "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"%"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ColorPalette.Length]);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsx)(l.h4,{id:"playercontroller",children:"PlayerController"}),"\n",(0,c.jsxs)(l.p,{children:["Open the ",(0,c.jsx)(l.code,{children:"PlayerController"})," script and modify the contents of the ",(0,c.jsx)(l.code,{children:"PlayerController"})," script to be:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Generic"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Linq"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD"},children:" PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" : "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"MonoBehaviour"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" const"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" int"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" SEND_UPDATES_PER_SEC "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 20"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" const"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" SEND_UPDATES_FREQUENCY "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1f"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" /"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" SEND_UPDATES_PER_SEC;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Local { "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"get"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"; "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" set"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"; }"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PlayerId;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" LastMovementSendTimestamp;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"? LockInputPosition;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" List"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"CircleController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> OwnedCircles "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" List"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"CircleController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:">();"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" string"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Username "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" GameManager.Conn.Db.Player.PlayerId."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(PlayerId).Name;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" int"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" NumberOfOwnedCircles "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" OwnedCircles.Count;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" bool"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" IsLocalPlayer "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:" this"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" =="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Local;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Initialize"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Player"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        PlayerId "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player.PlayerId;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (player.Identity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" GameManager.LocalIdentity)"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            Local "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:" this"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" OnDestroy"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // If we have any circles, destroy them"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        foreach"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" circle "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"in"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" OwnedCircles)"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (circle "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"!="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" null"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"                Destroy"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(circle.gameObject);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        OwnedCircles."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Clear"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" OnCircleSpawned"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"CircleController"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        OwnedCircles."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Add"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(circle);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" OnCircleDeleted"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"CircleController"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" deletedCircle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"  // This means we got eaten"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (OwnedCircles."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Remove"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(deletedCircle) "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" IsLocalPlayer "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"&&"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" OwnedCircles.Count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  {"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"   // DeathScreen.Instance.SetVisible(true);"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" uint"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" TotalMass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")OwnedCircles"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Select"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:"circle"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" =>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" GameManager.Conn.Db.Entity.EntityId."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(circle.EntityId))"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"   ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Sum"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:"e"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" =>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" e"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:".Mass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"??"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//If this entity is being deleted on the same frame that we're moving, we can have a null entity here."})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"? "}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"CenterOfMass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (OwnedCircles.Count "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            return"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" null"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"        Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" totalPos "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Vector2.zero;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        float"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" totalMass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        foreach"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" circle "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"in"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" OwnedCircles)"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" GameManager.Conn.Db.Entity.EntityId."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(circle.EntityId);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" circle.transform.position;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            totalPos "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity.Mass;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            totalMass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entity.Mass;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" totalPos "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" totalMass;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" OnGUI"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"!"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"IsLocalPlayer "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"||"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" !"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"GameManager."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"IsConnected"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"   return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  GUI."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Label"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Rect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"100"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"50"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"), "}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'$"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Total Mass: "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"TotalMass"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"()"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:" //Automated testing members"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" bool"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" testInputEnabled;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" testInput;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SetTestInput"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Vector2"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" input"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" testInput "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" input;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" EnableTestInput"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"() "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=>"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" testInputEnabled "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" true"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["Let's also add a new ",(0,c.jsx)(l.code,{children:"PrefabManager.cs"})," script which we can use as a factory for creating prefabs. Replace the contents of the file with:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" SpacetimeDB"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Types"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Generic"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD"},children:" PrefabManager"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" : "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"MonoBehaviour"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" PrefabManager"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Instance;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" CircleController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" CirclePrefab;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" FoodController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" FoodPrefab;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PlayerPrefab;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Awake"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  Instance "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9",fontStyle:"italic"},children:" this"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" CircleController"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnCircle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Circle"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" circle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" owner"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Instantiate"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Instance.CirclePrefab);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  entityController.name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' $"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Circle - "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"circle"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"EntityId"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  entityController."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Spawn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(circle, owner);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  owner."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"OnCircleSpawned"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(entityController);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" FoodController"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnFood"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Food"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" food"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Instantiate"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Instance.FoodPrefab);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  entityController.name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' $"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Food - "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"food"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"EntityId"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  entityController."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Spawn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(food);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SpawnPlayer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Player"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" playerController "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" Instantiate"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Instance.PlayerPrefab);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  playerController.name "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:' $"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"PlayerController - "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"{"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"player"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"Name"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"}"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  playerController."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Initialize"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" playerController;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["In the scene hierarchy, select the ",(0,c.jsx)(l.code,{children:"GameManager"})," object and add the ",(0,c.jsx)(l.code,{children:"Prefab Manager"})," script as a component to the ",(0,c.jsx)(l.code,{children:"GameManager"})," object. Drag the corresponding ",(0,c.jsx)(l.code,{children:"CirclePrefab"}),", ",(0,c.jsx)(l.code,{children:"FoodPrefab"}),", and ",(0,c.jsx)(l.code,{children:"PlayerPrefab"})," prefabs we created earlier from the project view into their respective slots in the ",(0,c.jsx)(l.code,{children:"Prefab Manager"}),". Save the scene."]}),"\n",(0,c.jsx)(l.h3,{id:"hooking-up-the-data",children:"Hooking up the Data"}),"\n",(0,c.jsx)(l.p,{children:"We've now prepared our Unity project so that we can hook up the data from our tables to the Unity game objects and have them drawn on the screen."}),"\n",(0,c.jsxs)(l.p,{children:["Add a couple dictionaries at the top of your ",(0,c.jsx)(l.code,{children:"GameManager"})," class which we'll use to hold onto the game objects we create for our scene. Add these two lines just below your ",(0,c.jsx)(l.code,{children:"DbConnection"})," like so:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" DbConnection Conn { get; "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"private"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" set; }"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Dictionary"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EntityController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> Entities "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Dictionary"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EntityController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:">();"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Dictionary"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"> Players "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Dictionary"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"<"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:">();"})]})]})})}),"\n",(0,c.jsxs)(l.p,{children:["Next lets add some callbacks when rows change in the database. Modify the ",(0,c.jsx)(l.code,{children:"HandleConnect"})," method as below."]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"    // Called when we connect to SpacetimeDB and receive our client identity"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" HandleConnect"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"DbConnection"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" conn"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Identity"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" identity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"string"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" token"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Debug."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Log"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Connected."}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        AuthToken."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"SaveToken"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(token);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        LocalIdentity "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" identity;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        conn.Db.Circle.OnInsert "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" CircleOnInsert;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        conn.Db.Entity.OnUpdate "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" EntityOnUpdate;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        conn.Db.Entity.OnDelete "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" EntityOnDelete;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        conn.Db.Food.OnInsert "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" FoodOnInsert;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        conn.Db.Player.OnInsert "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PlayerOnInsert;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        conn.Db.Player.OnDelete "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PlayerOnDelete;"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        OnConnected"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Invoke"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Request all tables"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Conn."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"SubscriptionBuilder"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"OnApplied"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(HandleSubscriptionApplied)"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            ."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"SubscribeToAllTables"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["Next add the following implementations for those callbacks to the ",(0,c.jsx)(l.code,{children:"GameManager"})," class."]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" CircleOnInsert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Circle"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" insertedValue"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" GetOrCreatePlayer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(insertedValue.PlayerId);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PrefabManager."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"SpawnCircle"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(insertedValue, player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Entities."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Add"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(insertedValue.EntityId, entityController);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" EntityOnUpdate"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" oldEntity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" newEntity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"!"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"Entities."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"TryGetValue"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(newEntity.EntityId, "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"out"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController))"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        entityController."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"OnEntityUpdated"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(newEntity);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" EntityOnDelete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Entity"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" oldEntity"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (Entities."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Remove"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(oldEntity.EntityId, "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"out"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController))"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            entityController."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"OnDelete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(context);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" FoodOnInsert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Food"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" insertedValue"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" entityController "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PrefabManager."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"SpawnFood"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(insertedValue);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Entities."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Add"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(insertedValue.EntityId, entityController);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" PlayerOnInsert"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Player"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" insertedPlayer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        GetOrCreatePlayer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(insertedPlayer.PlayerId);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" PlayerOnDelete"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"EventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" context"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Player"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" deletedvalue"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (Players."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Remove"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(deletedvalue.PlayerId, "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"out"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" playerController))"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            GameObject."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Destroy"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(playerController.gameObject);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" GetOrCreatePlayer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"uint"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" playerId"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"!"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"Players."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"TryGetValue"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(playerId, "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"out"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" playerController))"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" player "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Conn.Db.Player.PlayerId."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(playerId);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            playerController "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PrefabManager."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"SpawnPlayer"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            Players."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Add"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(playerId, playerController);"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" playerController;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})})]})})}),"\n",(0,c.jsx)(l.h3,{id:"camera-controller",children:"Camera Controller"}),"\n",(0,c.jsxs)(l.p,{children:["One of the last steps is to create a camera controller to make sure the camera moves around with the player. Create a script called ",(0,c.jsx)(l.code,{children:"CameraController.cs"})," and add it to your project. Replace the contents of the file with this:"]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" System"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Collections"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Generic"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"using"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" UnityEngine"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" class"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD"},children:" CameraController"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" : "}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"MonoBehaviour"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    public"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" static"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" WorldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 0.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" LateUpdate"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"()"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" arenaCenterTransform "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(WorldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", WorldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"10.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (PlayerController.Local "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"=="}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" null"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" ||"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" !"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"GameManager."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"IsConnected"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"())"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"            // Set the camera to be in middle of the arena if we are not connected or"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"            // there is no local player"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            transform.position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" arenaCenterTransform;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            return"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" centerOfMass "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" PlayerController.Local."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"CenterOfMass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        if"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" (centerOfMass.HasValue)"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        {"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"            // Set the camera to be the center of mass of the local player"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"            // if the local player has one"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            transform.position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector3"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"                x "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" centerOfMass.Value.x,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"                y "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" centerOfMass.Value.y,"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"                z "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" transform.position.z"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            };"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        } "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"else"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            transform.position "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" arenaCenterTransform;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  float"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" targetCameraSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" CalculateCameraSize"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(PlayerController.Local);"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  Camera.main.orthographicSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Mathf."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Lerp"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Camera.main.orthographicSize, targetCameraSize, Time.deltaTime "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" float"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" CalculateCameraSize"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PlayerController"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" player"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"  return"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 50f"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" +"}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:" //Base size"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            Mathf."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Min"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"50"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", player."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"TotalMass"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"() "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 5"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:" //Increase camera size with mass"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"            Mathf."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Min"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(player.NumberOfOwnedCircles "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 1"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"1"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 30"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"; "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//Zoom out when player splits"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,c.jsxs)(l.p,{children:["Add the ",(0,c.jsx)(l.code,{children:"CameraController"})," as a component to the ",(0,c.jsx)(l.code,{children:"Main Camera"})," object in the scene."]}),"\n",(0,c.jsxs)(l.p,{children:["Lastly modify the ",(0,c.jsx)(l.code,{children:"GameManager.SetupArena"})," method to set the ",(0,c.jsx)(l.code,{children:"WorldSize"})," on the ",(0,c.jsx)(l.code,{children:"CameraController"}),"."]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" SetupArena"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"float"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" worldSize"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", borderThickness)); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//North"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", borderThickness)); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//South"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(borderThickness, worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//East"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        CreateBorderCube"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"-"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:", worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"/"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"),"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"            new"}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Vector2"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(borderThickness, worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"+"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" borderThickness "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"*"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" 2.0f"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")); "}),(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"//West"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Set the world size for the camera controller"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        CameraController.WorldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" worldSize;"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})})]})})}),"\n",(0,c.jsx)(l.h3,{id:"entering-the-game",children:"Entering the Game"}),"\n",(0,c.jsxs)(o.A,{groupId:"server-language",defaultValue:"rust",children:[(0,c.jsx)(a.A,{value:"rust",label:"Rust",children:(0,c.jsxs)(l.p,{children:["At this point, you may need to regenerate your bindings the following\ncommand from the ",(0,c.jsx)(l.code,{children:"server-rust"})," directory."]})}),(0,c.jsx)(a.A,{value:"csharp",label:"C#",children:(0,c.jsxs)(l.p,{children:["At this point, you may need to regenerate your bindings the following\ncommand from the ",(0,c.jsx)(l.code,{children:"server-csharp"})," directory."]})})]}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsx)(l.code,{children:(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:" generate"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" --lang"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:" csharp"}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:" --out-dir"}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:" ../client-unity/Assets/autogen"})]})})})}),"\n",(0,c.jsxs)(l.p,{children:["The last step is to call the ",(0,c.jsx)(l.code,{children:"enter_game"})," reducer on the server, passing in a username for our player, which will spawn a circle for our player. For the sake of simplicity, let's call the ",(0,c.jsx)(l.code,{children:"enter_game"})," reducer from the ",(0,c.jsx)(l.code,{children:"HandleSubscriptionApplied"}),' callback with the name "3Blave".']}),"\n",(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,c.jsxs)(l.code,{children:[(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"    private"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:" void"}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:" HandleSubscriptionApplied"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SubscriptionEventContext"}),(0,c.jsx)(l.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    {"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        Debug."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Log"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"Subscription applied!"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        OnSubscriptionApplied"}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"?"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Invoke"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"();"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Once we have the initial subscription sync'd to the client cache"})}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Get the world size from the config table and set up the arena"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"        var"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" worldSize "}),(0,c.jsx)(l.span,{style:{color:"#FF79C6"},children:"="}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Conn.Db.Config.Id."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"Find"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#BD93F9"},children:"0"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:").WorldSize;"})]}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"        SetupArena"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(worldSize);"})]}),"\n",(0,c.jsx)(l.span,{className:"line"}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#6272A4"},children:"        // Call enter game with the player name 3Blave"})}),"\n",(0,c.jsxs)(l.span,{className:"line",children:[(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"        ctx.Reducers."}),(0,c.jsx)(l.span,{style:{color:"#50FA7B"},children:"EnterGame"}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F1FA8C"},children:"3Blave"}),(0,c.jsx)(l.span,{style:{color:"#E9F284"},children:'"'}),(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,c.jsx)(l.span,{className:"line",children:(0,c.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    }"})})]})})}),"\n",(0,c.jsx)(l.h3,{id:"trying-it-out",children:"Trying it out"}),"\n",(0,c.jsx)(l.p,{children:"At this point, after publishing our module we can press the play button to see the fruits of our labor! You should be able to see your player's circle, with its username label, surrounded by food."}),"\n",(0,c.jsx)(l.p,{children:(0,c.jsx)(l.img,{alt:"Player on screen",src:e(5484).A+"",width:"2134",height:"1110"})}),"\n",(0,c.jsx)(l.admonition,{type:"note",children:(0,c.jsx)(l.p,{children:"The label won't be centered at this point. Feel free to adjust it if you like. We just didn't want to complicate the tutorial."})}),"\n",(0,c.jsx)(l.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:["\n",(0,c.jsxs)(l.p,{children:["If you get an error when running the generate command, make sure you have an empty subfolder in your Unity project Assets folder called ",(0,c.jsx)(l.code,{children:"autogen"})]}),"\n"]}),"\n",(0,c.jsxs)(l.li,{children:["\n",(0,c.jsxs)(l.p,{children:["If you get an error in your Unity console when starting the game, double check that you have published your module and you have the correct module name specified in your ",(0,c.jsx)(l.code,{children:"GameManager"}),"."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(l.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,c.jsx)(l.p,{children:"It's pretty cool to see our player in game surrounded by food, but there's a problem! We can't move yet. In the next part, we'll explore how to get your player moving and interacting with food and other objects."})]})}function p(s={}){const{wrapper:l}={...(0,r.R)(),...s.components};return l?(0,c.jsx)(l,{...s,children:(0,c.jsx)(h,{...s})}):h(s)}}}]);