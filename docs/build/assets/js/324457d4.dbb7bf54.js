"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1832],{6119:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>l});var i=n(3303);const s={},d=i.createContext(s);function r(e){const t=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(d.Provider,{value:t},e.children)}},6163:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"HTTP API/identity","title":"/v1/identity","description":"The HTTP endpoints in /v1/identity allow clients to generate and manage Spacetime public identities and private tokens.","source":"@site/docs/13-HTTP API/02-identity.md","sourceDirName":"13-HTTP API","slug":"/http/identity","permalink":"/http/identity","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"slug":"/http/identity"},"sidebar":"sidebar","previous":{"title":"Authorization","permalink":"/http/authorization"},"next":{"title":"/v1/database","permalink":"/http/database"}}');var s=n(7711),d=n(6119);const r={slug:"/http/identity"},l="/v1/identity",c={},a=[{value:"At a glance",id:"at-a-glance",level:2},{value:"<code>POST /v1/identity</code>",id:"post-v1identity",level:2},{value:"Returns",id:"returns",level:4},{value:"<code>POST /v1/identity/websocket-token</code>",id:"post-v1identitywebsocket-token",level:2},{value:"Required Headers",id:"required-headers",level:4},{value:"Returns",id:"returns-1",level:4},{value:"<code>GET /v1/identity/public-key</code>",id:"get-v1identitypublic-key",level:2},{value:"Returns",id:"returns-2",level:4},{value:"<code>POST /v1/identity/:identity/set-email</code>",id:"post-v1identityidentityset-email",level:2},{value:"Parameters",id:"parameters",level:4},{value:"Query Parameters",id:"query-parameters",level:4},{value:"Required Headers",id:"required-headers-1",level:4},{value:"<code>GET /v1/identity/:identity/databases</code>",id:"get-v1identityidentitydatabases",level:2},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-3",level:4},{value:"<code>GET /v1/identity/:identity/verify</code>",id:"get-v1identityidentityverify",level:2},{value:"Parameters",id:"parameters-2",level:4},{value:"Required Headers",id:"required-headers-2",level:4},{value:"Returns",id:"returns-4",level:4}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"v1identity",children:(0,s.jsx)(t.code,{children:"/v1/identity"})})}),"\n",(0,s.jsxs)(t.p,{children:["The HTTP endpoints in ",(0,s.jsx)(t.code,{children:"/v1/identity"})," allow clients to generate and manage Spacetime public identities and private tokens."]}),"\n",(0,s.jsx)(t.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Route"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"#post-v1identity",children:(0,s.jsx)(t.code,{children:"POST /v1/identity"})})}),(0,s.jsx)(t.td,{children:"Generate a new identity and token."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"#post-v1identitywebsocket-token",children:(0,s.jsx)(t.code,{children:"POST /v1/identity/websocket-token"})})}),(0,s.jsx)(t.td,{children:"Generate a short-lived access token for use in untrusted contexts."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"#get-v1identitypublic-key",children:(0,s.jsx)(t.code,{children:"GET /v1/identity/public-key"})})}),(0,s.jsx)(t.td,{children:"Get the public key used for verifying tokens."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"#get-v1identityidentitydatabases",children:(0,s.jsx)(t.code,{children:"GET /v1/identity/:identity/databases"})})}),(0,s.jsx)(t.td,{children:"List databases owned by an identity."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"#get-v1identityidentityverify",children:(0,s.jsx)(t.code,{children:"GET /v1/identity/:identity/verify"})})}),(0,s.jsx)(t.td,{children:"Verify an identity and token."})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"post-v1identity",children:(0,s.jsx)(t.code,{children:"POST /v1/identity"})}),"\n",(0,s.jsx)(t.p,{children:"Create a new identity."}),"\n",(0,s.jsx)(t.h4,{id:"returns",children:"Returns"}),"\n",(0,s.jsx)(t.p,{children:"Returns JSON in the form:"}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(t.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,s.jsxs)(t.code,{children:[(0,s.jsx)(t.span,{className:"line",children:(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,s.jsxs)(t.span,{className:"line",children:[(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'    "'}),(0,s.jsx)(t.span,{style:{color:"#F1FA8C"},children:"identity"}),(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'"'}),(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:": string,"})]}),"\n",(0,s.jsxs)(t.span,{className:"line",children:[(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'    "'}),(0,s.jsx)(t.span,{style:{color:"#F1FA8C"},children:"token"}),(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'"'}),(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:": string"})]}),"\n",(0,s.jsx)(t.span,{className:"line",children:(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,s.jsx)(t.h2,{id:"post-v1identitywebsocket-token",children:(0,s.jsx)(t.code,{children:"POST /v1/identity/websocket-token"})}),"\n",(0,s.jsx)(t.p,{children:"Generate a short-lived access token which can be used in untrusted contexts, e.g. embedded in URLs."}),"\n",(0,s.jsx)(t.h4,{id:"required-headers",children:"Required Headers"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Authorization"})}),(0,s.jsxs)(t.td,{children:["A Spacetime token ",(0,s.jsx)(t.a,{href:"/http/authorization",children:"encoded as Basic authorization"}),"."]})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"returns-1",children:"Returns"}),"\n",(0,s.jsx)(t.p,{children:"Returns JSON in the form:"}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(t.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,s.jsxs)(t.code,{children:[(0,s.jsx)(t.span,{className:"line",children:(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,s.jsxs)(t.span,{className:"line",children:[(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'    "'}),(0,s.jsx)(t.span,{style:{color:"#F1FA8C"},children:"token"}),(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'"'}),(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:": string"})]}),"\n",(0,s.jsx)(t.span,{className:"line",children:(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"token"})," value is a short-lived ",(0,s.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/rfc7519",children:"JSON Web Token"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"get-v1identitypublic-key",children:(0,s.jsx)(t.code,{children:"GET /v1/identity/public-key"})}),"\n",(0,s.jsx)(t.p,{children:"Fetches the public key used by the database to verify tokens."}),"\n",(0,s.jsx)(t.h4,{id:"returns-2",children:"Returns"}),"\n",(0,s.jsxs)(t.p,{children:["Returns a response of content-type ",(0,s.jsx)(t.code,{children:"application/pem-certificate-chain"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"post-v1identityidentityset-email",children:(0,s.jsx)(t.code,{children:"POST /v1/identity/:identity/set-email"})}),"\n",(0,s.jsx)(t.p,{children:"Associate an email with a Spacetime identity."}),"\n",(0,s.jsx)(t.h4,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:":identity"})}),(0,s.jsx)(t.td,{children:"The identity to associate with the email."})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"email"})}),(0,s.jsx)(t.td,{children:"An email address."})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"required-headers-1",children:"Required Headers"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Authorization"})}),(0,s.jsxs)(t.td,{children:["A Spacetime token ",(0,s.jsx)(t.a,{href:"/http/authorization",children:"encoded as Basic authorization"}),"."]})]})})]}),"\n",(0,s.jsx)(t.h2,{id:"get-v1identityidentitydatabases",children:(0,s.jsx)(t.code,{children:"GET /v1/identity/:identity/databases"})}),"\n",(0,s.jsx)(t.p,{children:"List all databases owned by an identity."}),"\n",(0,s.jsx)(t.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:":identity"})}),(0,s.jsx)(t.td,{children:"A Spacetime identity."})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"returns-3",children:"Returns"}),"\n",(0,s.jsx)(t.p,{children:"Returns JSON in the form:"}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(t.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,s.jsxs)(t.code,{children:[(0,s.jsx)(t.span,{className:"line",children:(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,s.jsxs)(t.span,{className:"line",children:[(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'    "'}),(0,s.jsx)(t.span,{style:{color:"#F1FA8C"},children:"addresses"}),(0,s.jsx)(t.span,{style:{color:"#E9F284"},children:'"'}),(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:": array"}),(0,s.jsx)(t.span,{style:{color:"#FF79C6"},children:"<"}),(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:"string"}),(0,s.jsx)(t.span,{style:{color:"#FF79C6"},children:">"})]}),"\n",(0,s.jsx)(t.span,{className:"line",children:(0,s.jsx)(t.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"addresses"})," value is an array of zero or more strings, each of which is the address of a database owned by the identity passed as a parameter."]}),"\n",(0,s.jsx)(t.h2,{id:"get-v1identityidentityverify",children:(0,s.jsx)(t.code,{children:"GET /v1/identity/:identity/verify"})}),"\n",(0,s.jsx)(t.p,{children:"Verify the validity of an identity/token pair."}),"\n",(0,s.jsx)(t.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:":identity"})}),(0,s.jsx)(t.td,{children:"The identity to verify."})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"required-headers-2",children:"Required Headers"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Authorization"})}),(0,s.jsxs)(t.td,{children:["A Spacetime token ",(0,s.jsx)(t.a,{href:"/http/authorization",children:"encoded as Basic authorization"}),"."]})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"returns-4",children:"Returns"}),"\n",(0,s.jsx)(t.p,{children:"Returns no data."}),"\n",(0,s.jsxs)(t.p,{children:["If the token is valid and matches the identity, returns ",(0,s.jsx)(t.code,{children:"204 No Content"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["If the token is valid but does not match the identity, returns ",(0,s.jsx)(t.code,{children:"400 Bad Request"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["If the token is invalid, or no ",(0,s.jsx)(t.code,{children:"Authorization"})," header is included in the request, returns ",(0,s.jsx)(t.code,{children:"401 Unauthorized"}),"."]})]})}function o(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);