"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3971],{623:(e,s,n)=>{n.d(s,{A:()=>w});var l=n(3303),r=n(3372),a=n(9607),t=n(2592),c=n(8368),i=n(1711),o=n(4541),d=n(4930),h=n(6022);function p(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function F(e){const{values:s,children:n}=e;return(0,l.useMemo)(()=>{const e=s??function(e){return p(e).map(({props:{value:e,label:s,attributes:n,default:l}})=>({value:e,label:s,attributes:n,default:l}))}(n);return function(e){const s=(0,d.XI)(e,(e,s)=>e.value===s.value);if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[s,n])}function x({value:e,tabValues:s}){return s.some(s=>s.value===e)}function j({queryString:e=!1,groupId:s}){const n=(0,c.W6)(),r=function({queryString:e=!1,groupId:s}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:e,groupId:s});return[(0,o.aZ)(r),(0,l.useCallback)(e=>{if(!r)return;const s=new URLSearchParams(n.location.search);s.set(r,e),n.replace({...n.location,search:s.toString()})},[r,n])]}function u(e){const{defaultValue:s,queryString:n=!1,groupId:r}=e,a=F(e),[t,c]=(0,l.useState)(()=>function({defaultValue:e,tabValues:s}){if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${s.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=s.find(e=>e.default)??s[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:s,tabValues:a})),[o,d]=j({queryString:n,groupId:r}),[p,u]=function({groupId:e}){const s=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,r]=(0,h.Dv)(s);return[n,(0,l.useCallback)(e=>{s&&r.set(e)},[s,r])]}({groupId:r}),y=(()=>{const e=o??p;return x({value:e,tabValues:a})?e:null})();(0,i.A)(()=>{y&&c(y)},[y]);return{selectedValue:t,selectValue:(0,l.useCallback)(e=>{if(!x({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),u(e)},[d,u,a]),tabValues:a}}var y=n(93);const m={tabList:"tabList_MbSD",tabItem:"tabItem_Ssy3"};var b=n(7711);function f({className:e,block:s,selectedValue:n,selectValue:l,tabValues:a}){const c=[],{blockElementScrollPositionUntilNextRender:i}=(0,t.a_)(),o=e=>{const s=e.currentTarget,r=c.indexOf(s),t=a[r].value;t!==n&&(i(s),l(t))},d=e=>{let s=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;s=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;s=c[n]??c[c.length-1];break}}s?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":s},e),children:a.map(({value:e,label:s,attributes:l})=>(0,b.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{c.push(e)},onKeyDown:d,onClick:o,...l,className:(0,r.A)("tabs__item",m.tabItem,l?.className,{"tabs__item--active":n===e}),children:s??e},e))})}function g({lazy:e,children:s,selectedValue:n}){const a=(Array.isArray(s)?s:[s]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===n);return e?(0,l.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:a.map((e,s)=>(0,l.cloneElement)(e,{key:s,hidden:e.props.value!==n}))})}function v(e){const s=u(e);return(0,b.jsxs)("div",{className:(0,r.A)(a.G.tabs.container,"tabs-container",m.tabList),children:[(0,b.jsx)(f,{...s,...e}),(0,b.jsx)(g,{...s,...e})]})}function w(e){const s=(0,y.A)();return(0,b.jsx)(v,{...e,children:p(e.children)},String(s))}},6119:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var l=n(3303);const r={},a=l.createContext(r);function t(e){const s=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(a.Provider,{value:s},e.children)}},7476:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>F,frontMatter:()=>i,metadata:()=>l,toc:()=>h});const l=JSON.parse('{"id":"Intro/overview","title":"Overview","description":"Installation","source":"@site/docs/01-Intro/01-overview.mdx","sourceDirName":"01-Intro","slug":"/","permalink":"/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Overview","slug":"/"},"sidebar":"sidebar","next":{"title":"Getting Started","permalink":"/getting-started"}}');var r=n(7711),a=n(6119),t=n(623),c=n(8720);const i={title:"Overview",slug:"/"},o="SpacetimeDB Documentation",d={},h=[{value:"Installation",id:"installation",level:2},{value:"What is SpacetimeDB?",id:"what-is-spacetimedb",level:2},{value:"Application Workflow Preview",id:"application-workflow-preview",level:2},{value:"State Mirroring",id:"state-mirroring",level:2},{value:"Language Support",id:"language-support",level:2},{value:"Module Libraries",id:"module-libraries",level:3},{value:"Client-side SDKs",id:"client-side-sdks",level:3},{value:"Unity",id:"unity",level:3},{value:"Key architectural concepts",id:"key-architectural-concepts",level:2},{value:"Host",id:"host",level:3},{value:"Database",id:"database",level:3},{value:"Table",id:"table",level:3},{value:"Reducer",id:"reducer",level:3},{value:"Client",id:"client",level:3},{value:"Identity",id:"identity",level:3},{value:"ConnectionId",id:"connectionid",level:3},{value:"Energy",id:"energy",level:3},{value:"FAQ",id:"faq",level:2}];function p(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"spacetimedb-documentation",children:"SpacetimeDB Documentation"})}),"\n",(0,r.jsx)(s.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(s.p,{children:["You can run SpacetimeDB as a standalone database server via the ",(0,r.jsx)(s.code,{children:"spacetime"})," CLI tool."]}),"\n",(0,r.jsxs)(s.p,{children:["You can find the instructions to install the CLI tool for your platform ",(0,r.jsx)(s.a,{href:"https://spacetimedb.com/install",children:"here"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["To get started running your own standalone instance of SpacetimeDB check out our ",(0,r.jsx)(s.a,{href:"/getting-started",children:"Getting Started Guide"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"what-is-spacetimedb",children:"What is SpacetimeDB?"}),"\n",(0,r.jsx)(s.p,{children:"SpacetimeDB is a database that is also a server."}),"\n",(0,r.jsxs)(s.p,{children:["SpacetimeDB is a full-featured relational database system that lets you run your application logic ",(0,r.jsx)(s.strong,{children:"inside"})," the database. You no longer need to deploy a separate web or game server. ",(0,r.jsx)(s.a,{href:"#module-libraries",children:"Several programming languages"})," are supported, including C# and Rust. You can still write authorization logic, just like you would in a traditional server."]}),"\n",(0,r.jsx)(s.p,{children:"This means that you can write your entire application in a single language and deploy it as a single binary. No more microservices, no more containers, no more Kubernetes, no more Docker, no more VMs, no more DevOps, no more infrastructure, no more ops, no more servers."}),"\n",(0,r.jsxs)("figure",{children:[(0,r.jsx)("img",{src:"/images/basic-architecture-diagram.png",alt:"SpacetimeDB Architecture",style:{width:"100%"}}),(0,r.jsxs)("figcaption",{style:{marginTop:"10px",textAlign:"center"},align:"center",children:[(0,r.jsx)("b",{align:"center",children:"SpacetimeDB application architecture"}),(0,r.jsxs)("span",{style:{fontSize:"14px"},children:[" ",(0,r.jsx)(s.p,{children:"(elements in white are provided by SpacetimeDB)"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:["This is similar to ",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Smart_contract",children:'"smart contracts"'}),", except that SpacetimeDB is a ",(0,r.jsx)(s.strong,{children:"database"}),' and has nothing to do with blockchain. Because it isn\'t a blockchain, it can be dramatically faster than many "smart contract" systems.']}),"\n",(0,r.jsxs)(s.p,{children:["In fact, it's so fast that we've been able to write the entire backend of our MMORPG ",(0,r.jsx)(s.a,{href:"https://bitcraftonline.com",children:"BitCraft Online"})," as a single SpacetimeDB database. Everything in the game -- chat messages, items, resources, terrain, and player locations -- is stored and processed by the database. SpacetimeDB ",(0,r.jsx)(s.a,{href:"#state-mirroring",children:"automatically mirrors"})," relevant state to connected players in real-time."]}),"\n",(0,r.jsx)(s.p,{children:"SpacetimeDB is optimized for maximum speed and minimum latency, rather than batch processing or analytical workloads. It is designed for real-time applications like games, chat, and collaboration tools."}),"\n",(0,r.jsx)(s.p,{children:"Speed and latency is achieved by holding all of your application state in memory, while persisting data to a commit log which is used to recover data after restarts and system crashes."}),"\n",(0,r.jsx)(s.h2,{id:"application-workflow-preview",children:"Application Workflow Preview"}),"\n",(0,r.jsxs)("figure",{children:[(0,r.jsx)("img",{src:"/images/workflow-preview-diagram.png",alt:"SpacetimeDB Application Workflow Preview",style:{width:"100%"}}),(0,r.jsx)("figcaption",{style:{marginTop:"10px",textAlign:"center"},align:"center",children:(0,r.jsx)("b",{align:"center",children:"SpacetimeDB Application Workflow Preview"})})]}),"\n",(0,r.jsx)(s.p,{children:"The above illustrates the workflow when using SpacetimeDB."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"All client-side reads happen with the data view that is cached locally."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Client-side subscriptions tell the server what data client cares about and wants to be synced within its data view. Changes to data will be pushed by the server to the client cache."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"RLS filters restrict the data view server-side before subscriptions are evaluated. These filters can be used for access control or client scoping."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Reducers are effectively async RPC's. The request is sent off and if the results of that reducer makes changes to data, it will be written to the database directly. As a result of that, if those changes make it through the two layers above, then the client will see the result when it queries its local cache."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"state-mirroring",children:"State Mirroring"}),"\n",(0,r.jsxs)(s.p,{children:["SpacetimeDB can generate client code in a ",(0,r.jsx)(s.a,{href:"#client-side-sdks",children:"variety of languages"}),". This creates a client library custom-designed to talk to your database. It provides easy-to-use interfaces for connecting to the database and submitting requests. It can also ",(0,r.jsx)(s.strong,{children:"automatically mirror state"})," from your database to client applications."]}),"\n",(0,r.jsxs)(s.p,{children:["You write SQL queries specifying what information a client is interested in -- for instance, the terrain and items near a player's avatar. SpacetimeDB will generate types in your client language for the relevant tables, and feed clients a stream of live updates whenever the database state changes. Note that this is a ",(0,r.jsx)(s.strong,{children:"read-only"})," mirror -- the only way to change the database is to submit requests, which are validated on the server."]}),"\n",(0,r.jsx)(s.h2,{id:"language-support",children:"Language Support"}),"\n",(0,r.jsx)(s.h3,{id:"module-libraries",children:"Module Libraries"}),"\n",(0,r.jsxs)(s.p,{children:["Every SpacetimeDB database contains a collection of ",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Stored_procedure",children:"stored procedures"})," and schema definitions. Such a collection is called a ",(0,r.jsx)(s.strong,{children:"module"}),", which can be written in C# or Rust. They specify a database schema and the business logic that responds to client requests. Modules are administered using the ",(0,r.jsx)(s.code,{children:"spacetime"})," CLI tool."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/modules/rust",children:"Rust"})," - ",(0,r.jsx)(s.a,{href:"/modules/rust/quickstart",children:"(Quickstart)"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/modules/c-sharp",children:"C#"})," - ",(0,r.jsx)(s.a,{href:"/modules/c-sharp/quickstart",children:"(Quickstart)"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"client-side-sdks",children:"Client-side SDKs"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Clients"})," are applications that connect to SpacetimeDB databases. The ",(0,r.jsx)(s.code,{children:"spacetime"})," CLI tool supports automatically generating interface code that makes it easy to interact with a particular database."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/sdks/rust",children:"Rust"})," - ",(0,r.jsx)(s.a,{href:"/sdks/rust/quickstart",children:"(Quickstart)"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/sdks/c-sharp",children:"C#"})," - ",(0,r.jsx)(s.a,{href:"/sdks/c-sharp/quickstart",children:"(Quickstart)"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/sdks/typescript",children:"TypeScript"})," - ",(0,r.jsx)(s.a,{href:"/sdks/typescript/quickstart",children:"(Quickstart)"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"unity",children:"Unity"}),"\n",(0,r.jsxs)(s.p,{children:["SpacetimeDB was designed first and foremost as the backend for multiplayer Unity games. To learn more about using SpacetimeDB with Unity, jump on over to the ",(0,r.jsx)(s.a,{href:"/unity/part-1",children:"SpacetimeDB Unity Tutorial"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"key-architectural-concepts",children:"Key architectural concepts"}),"\n",(0,r.jsx)(s.h3,{id:"host",children:"Host"}),"\n",(0,r.jsxs)(s.p,{children:["A SpacetimeDB ",(0,r.jsx)(s.strong,{children:"host"})," is a server that hosts ",(0,r.jsx)(s.a,{href:"#database",children:"databases"}),". You can run your own host, or use the SpacetimeDB maincloud. Many databases can run on a single host."]}),"\n",(0,r.jsx)(s.h3,{id:"database",children:"Database"}),"\n",(0,r.jsxs)(s.p,{children:["A SpacetimeDB ",(0,r.jsx)(s.strong,{children:"database"})," is an application that runs on a ",(0,r.jsx)(s.a,{href:"#host",children:"host"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["A database exports ",(0,r.jsx)(s.a,{href:"#table",children:"tables"}),", which store data, and ",(0,r.jsx)(s.a,{href:"#reducer",children:"reducers"}),", which allow ",(0,r.jsx)(s.a,{href:"#client",children:"clients"})," to make requests."]}),"\n",(0,r.jsxs)(s.p,{children:["A database's schema and business logic is specified by a piece of software called a ",(0,r.jsx)(s.strong,{children:"module"}),". Modules can be written in C# or Rust."]}),"\n",(0,r.jsxs)(s.p,{children:["(Technically, a SpacetimeDB module is a ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/WebAssembly",children:"WebAssembly module"})," that imports a specific low-level ",(0,r.jsx)(s.a,{href:"/webassembly-abi",children:"WebAssembly ABI"})," and exports a small number of special functions. However, the SpacetimeDB ",(0,r.jsx)(s.a,{href:"#module-libraries",children:"server-side libraries"})," hide these low-level details. As a developer, writing a module is mostly like writing any other C# or Rust application, except for the fact that a ",(0,r.jsx)(s.a,{href:"https://spacetimedb.com/install",children:"special CLI tool"})," is used to deploy the application.)"]}),"\n",(0,r.jsx)(s.h3,{id:"table",children:"Table"}),"\n",(0,r.jsxs)(s.p,{children:["A SpacetimeDB ",(0,r.jsx)(s.strong,{children:"table"})," is a SQL database table. Tables are declared in a module's native language. For instance, in C#, a table is declared like so:"]}),"\n",(0,r.jsxs)(t.A,{groupId:"syntax",queryString:!0,children:[(0,r.jsx)(c.A,{value:"rust",label:"Rust",children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"table(name "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" players, public)]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   #[primary_key]"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   id"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u64"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   name"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" String"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   age"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u32"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   user"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Identity"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})}),(0,r.jsx)(c.A,{value:"csharp",label:"C#",children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Table"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(Name "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,r.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,r.jsx)(s.span,{style:{color:"#F1FA8C"},children:"players"}),(0,r.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", Public "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:" true"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:")]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" partial"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" struct"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Player"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    ["}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"PrimaryKey"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"    uint"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" playerId;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"    string"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" name;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"    uint"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" age;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"    Identity"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" user;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})})]}),"\n",(0,r.jsxs)(s.p,{children:["The contents of a table can be read and updated by ",(0,r.jsx)(s.a,{href:"#reducer",children:"reducers"}),".\nTables marked ",(0,r.jsx)(s.code,{children:"public"})," can also be read by ",(0,r.jsx)(s.a,{href:"#client",children:"clients"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"reducer",children:"Reducer"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"reducer"})," is a function exported by a ",(0,r.jsx)(s.a,{href:"#database",children:"database"}),".\nConnected ",(0,r.jsx)(s.a,{href:"#client-side-sdks",children:"clients"})," can call reducers to interact with the database.\nThis is a form of ",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Remote_procedure_call",children:"remote procedure call"}),"."]}),"\n",(0,r.jsxs)(t.A,{groupId:"syntax",queryString:!0,children:[(0,r.jsxs)(c.A,{value:"rust",label:"Rust",children:[(0,r.jsx)(s.p,{children:"A reducer can be written in Rust like so:"}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"reducer]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" fn"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" set_player_name"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" &"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"spacetimedb"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", id"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" u64"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", name"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" String"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:") "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#6272A4"},children:"   // ..."})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,r.jsxs)(s.p,{children:["And a Rust ",(0,r.jsx)(s.a,{href:"#client",children:"client"})," can call that reducer:"]}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"fn"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" main"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"() {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#6272A4"},children:"   // ...setup code, then..."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   ctx"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"reducers"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"set_player_name"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"57"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,r.jsx)(s.span,{style:{color:"#F1FA8C"},children:'"Marceline"'}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"into"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"());"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]}),(0,r.jsxs)(c.A,{value:"csharp",label:"C#",children:[(0,r.jsx)(s.p,{children:"A reducer can be written in C# like so:"}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" SetPlayerName"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,r.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"uint"}),(0,r.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" playerId"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" name"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#6272A4"},children:"    // ..."})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,r.jsxs)(s.p,{children:["And a C# ",(0,r.jsx)(s.a,{href:"#client",children:"client"})," can call that reducer:"]}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"void"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" Main"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"() {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#6272A4"},children:"   // ...setup code, then..."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   Connection.Reducer."}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"SetPlayerName"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"57"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,r.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,r.jsx)(s.span,{style:{color:"#F1FA8C"},children:"Marceline"}),(0,r.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:");"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})})]})]}),"\n",(0,r.jsx)(s.p,{children:"These look mostly like regular function calls, but under the hood,\nthe client sends a request over the internet, which the database processes and responds to."}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"ReducerContext"})," is a reducer's only mandatory parameter\nand includes information about the caller's ",(0,r.jsx)(s.a,{href:"#identity",children:"identity"}),".\nThis can be used to authenticate the caller."]}),"\n",(0,r.jsxs)(s.p,{children:["Reducers are run in their own separate and atomic ",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Database_transaction",children:"database transactions"}),".\nWhen a reducer completes successfully, the changes the reducer has made,\nsuch as inserting a table row, are ",(0,r.jsx)(s.em,{children:"committed"})," to the database.\nHowever, if the reducer instead returns an error, or throws an exception,\nthe database will instead reject the request and ",(0,r.jsx)(s.em,{children:"revert"})," all those changes.\nThat is, reducers and transactions are all-or-nothing requests.\nIt's not possible to keep the first half of a reducer's changes and discard the last."]}),"\n",(0,r.jsx)(s.p,{children:"Transactions are only started by requests from outside the database.\nWhen a reducer calls another reducer directly, as in the example below,\nthe changes in the called reducer does not happen in its own child transaction.\nInstead, when the nested reducer gracefully errors,\nand the overall reducer completes successfully,\nthe changes in the nested one are still persisted."}),"\n",(0,r.jsxs)(t.A,{groupId:"syntax",queryString:!0,children:[(0,r.jsxs)(c.A,{value:"rust",label:"Rust",children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"reducer]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" fn"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" hello"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" &"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"spacetimedb"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:") "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"   if"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" world"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx)"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"is_err"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"      other_changes"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx);"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"#[spacetimedb"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"reducer]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"pub"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" fn"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" world"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" &"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"spacetimedb"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:") "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" Result"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"<(), "}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"String"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"> {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"    clear_all_tables"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx);"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line"})]})})}),(0,r.jsxs)(s.p,{children:["While SpacetimeDB doesn't support nested transactions,\na reducer can ",(0,r.jsx)(s.a,{href:"https://docs.rs/spacetimedb/latest/spacetimedb/attr.reducer.html#scheduled-reducers",children:"schedule another reducer"})," to run at an interval,\nor at a specific time."]})]}),(0,r.jsxs)(c.A,{value:"csharp",label:"C#",children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" Hello"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,r.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"   if"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"!"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"World"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx))"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"      OtherChanges"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx);"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"["}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"SpacetimeDB"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"."}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"Reducer"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"public"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" static"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" void"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" World"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:"ReducerContext"}),(0,r.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:" ctx"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:"   ClearAllTables"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(ctx);"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#6272A4"},children:"   // ..."})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),(0,r.jsxs)(s.p,{children:["While SpacetimeDB doesn't support nested transactions,\na reducer can ",(0,r.jsx)(s.a,{href:"/modules/c-sharp#scheduled-reducers",children:"schedule another reducer"})," to run at an interval,\nor at a specific time."]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"client",children:"Client"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"client"})," is an application that connects to a ",(0,r.jsx)(s.a,{href:"#database",children:"database"}),". A client logs in using an ",(0,r.jsx)(s.a,{href:"#identity",children:"identity"})," and receives an ",(0,r.jsx)(s.a,{href:"#connectionid",children:"connection id"})," to identify the connection. After that, it can call ",(0,r.jsx)(s.a,{href:"#reducer",children:"reducers"})," and query public ",(0,r.jsx)(s.a,{href:"#table",children:"tables"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Clients are written using the ",(0,r.jsx)(s.a,{href:"#client-side-sdks",children:"client-side SDKs"}),". The ",(0,r.jsx)(s.code,{children:"spacetime"})," CLI tool allows automatically generating code that works with the client-side SDKs to talk to a particular database."]}),"\n",(0,r.jsx)(s.p,{children:"Clients are regular software applications that developers can choose how to deploy (through Steam, app stores, package managers, or any other software deployment method, depending on the needs of the application.)"}),"\n",(0,r.jsx)(s.h3,{id:"identity",children:"Identity"}),"\n",(0,r.jsxs)(s.p,{children:["A SpacetimeDB ",(0,r.jsx)(s.code,{children:"Identity"})," identifies someone interacting with a database. It is a long lived, public, globally valid identifier that will always refer to the same end user, even across different connections."]}),"\n",(0,r.jsxs)(s.p,{children:["A user's ",(0,r.jsx)(s.code,{children:"Identity"})," is attached to every ",(0,r.jsx)(s.a,{href:"#reducer",children:"reducer call"})," they make, and you can use this to decide what they are allowed to do."]}),"\n",(0,r.jsxs)(s.p,{children:["Modules themselves also have Identities. When you ",(0,r.jsx)(s.code,{children:"spacetime publish"})," a module, it will automatically be issued an ",(0,r.jsx)(s.code,{children:"Identity"})," to distinguish it from other modules. Your client application will need to provide this ",(0,r.jsx)(s.code,{children:"Identity"})," when connecting to the ",(0,r.jsx)(s.a,{href:"#host",children:"host"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Identities are issued using the ",(0,r.jsx)(s.a,{href:"https://openid.net/developers/how-connect-works/",children:"OpenID Connect"})," specification. Database developers are responsible for issuing Identities to their end users. OpenID Connect lets users log in to these accounts through standard services like Google and Facebook."]}),"\n",(0,r.jsxs)(s.p,{children:["Specifically, an identity is derived from the issuer and subject fields of a ",(0,r.jsx)(s.a,{href:"https://jwt.io/",children:"JSON Web Token (JWT)"})," hashed together. The psuedocode for this is as follows:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"def"}),(0,r.jsx)(s.span,{style:{color:"#50FA7B"},children:" identity_from_claims"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:"issuer"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" str"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:", "}),(0,r.jsx)(s.span,{style:{color:"#FFB86C",fontStyle:"italic"},children:"subject"}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#8BE9FD",fontStyle:"italic"},children:" str"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:") "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" [u8; "}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"32"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]:"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   hash1: [u8; "}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"32"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"] "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" blake3_hash(issuer "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"+"}),(0,r.jsx)(s.span,{style:{color:"#E9F284"},children:' "'}),(0,r.jsx)(s.span,{style:{color:"#F1FA8C"},children:"|"}),(0,r.jsx)(s.span,{style:{color:"#E9F284"},children:'"'}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:" +"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" subject)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   id_hash: [u8; "}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"26"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"] "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" hash1["}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"26"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   checksum_hash: [u8; "}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"32"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"] "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" blake3_hash(["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"      0x"}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"C2"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"      0x"}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"00"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"      *"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"id_hash"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   ])"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   identity_big_endian_bytes: [u8; "}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"32"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"] "}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"="}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"      0x"}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"C2"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"      0x"}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"00"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"      *"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"checksum_hash["}),(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:":"}),(0,r.jsx)(s.span,{style:{color:"#BD93F9"},children:"4"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"],"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"      *"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"id_hash"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:"   ]"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"#FF79C6"},children:"   return"}),(0,r.jsx)(s.span,{style:{color:"#F8F8F2"},children:" identity_big_endian_bytes"})]})]})})}),"\n",(0,r.jsxs)(s.p,{children:["You can obtain a JWT from our turnkey identity provider ",(0,r.jsx)(s.a,{href:"/spacetimeauth",children:"SpacetimeAuth"}),", or you can get one from any OpenID Connect compliant identity provider."]}),"\n",(0,r.jsx)(s.h3,{id:"connectionid",children:"ConnectionId"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.code,{children:"ConnectionId"})," identifies client connections to a SpacetimeDB database."]}),"\n",(0,r.jsxs)(s.p,{children:["A user has a single ",(0,r.jsx)(s.a,{href:"#identity",children:(0,r.jsx)(s.code,{children:"Identity"})}),", but may open multiple connections to your database. Each of these will receive a unique ",(0,r.jsx)(s.code,{children:"ConnectionId"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"energy",children:"Energy"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Energy"})," is the currency used to pay for data storage and compute operations in a SpacetimeDB host."]}),"\n",(0,r.jsx)(s.h2,{id:"faq",children:"FAQ"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"What is SpacetimeDB?\nIt's a cloud platform within a database that's fast enough to run real-time games."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["How do I use SpacetimeDB?\nInstall the ",(0,r.jsx)(s.code,{children:"spacetime"})," command line tool, choose your favorite language, import the SpacetimeDB library, write your module, compile it to WebAssembly, and upload it to the SpacetimeDB cloud platform. Once it's uploaded you can call functions directly on your application and subscribe to changes in application state."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"How do I get/install SpacetimeDB?\nJust install our command line tool and then upload your application to the cloud."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["How do I create a new database with SpacetimeDB?\nFollow our ",(0,r.jsx)(s.a,{href:"/getting-started",children:"Quick Start"})," guide!"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["How do I create a Unity game with SpacetimeDB?\nFollow our ",(0,r.jsx)(s.a,{href:"/unity",children:"Unity Tutorial"})," guide!"]}),"\n"]}),"\n"]})]})}function F(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8720:(e,s,n)=>{n.d(s,{A:()=>t});n(3303);var l=n(3372);const r={tabItem:"tabItem_sydm"};var a=n(7711);function t({children:e,hidden:s,className:n}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,l.A)(r.tabItem,n),hidden:s,children:e})}}}]);