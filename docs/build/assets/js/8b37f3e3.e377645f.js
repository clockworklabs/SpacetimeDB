"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2366],{2861:(s,e,l)=>{l.r(e),l.d(e,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"Deploying/self-hosting","title":"Self-Hosting SpacetimeDB","description":"This tutorial will guide you through setting up SpacetimeDB on an Ubuntu 24.04 server, securing it with HTTPS using Nginx and Let\'s Encrypt, and configuring a systemd service to keep it running.","source":"@site/docs/02-Deploying/02-self-hosting.md","sourceDirName":"02-Deploying","slug":"/deploying/spacetimedb-standalone","permalink":"/deploying/spacetimedb-standalone","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Self-Hosting SpacetimeDB","slug":"/deploying/spacetimedb-standalone"},"sidebar":"sidebar","previous":{"title":"Maincloud","permalink":"/deploying/maincloud"},"next":{"title":"Overview","permalink":"/unity"}}');var r=l(7711),c=l(6119);const o={title:"Self-Hosting SpacetimeDB",slug:"/deploying/spacetimedb-standalone"},a="Self-Hosting SpacetimeDB",i={},t=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create a Dedicated User for SpacetimeDB",id:"step-1-create-a-dedicated-user-for-spacetimedb",level:2},{value:"Step 2: Create a Systemd Service for SpacetimeDB",id:"step-2-create-a-systemd-service-for-spacetimedb",level:2},{value:"Step 3: Install and Configure Nginx",id:"step-3-install-and-configure-nginx",level:2},{value:"Install Nginx",id:"install-nginx",level:3},{value:"Configure Nginx Reverse Proxy",id:"configure-nginx-reverse-proxy",level:3},{value:"Configure Firewall",id:"configure-firewall",level:3},{value:"Step 4: Secure with Let&#39;s Encrypt",id:"step-4-secure-with-lets-encrypt",level:2},{value:"Install Certbot",id:"install-certbot",level:3},{value:"Obtain an SSL Certificate",id:"obtain-an-ssl-certificate",level:3},{value:"Auto-Renew SSL Certificates",id:"auto-renew-ssl-certificates",level:3},{value:"Step 5: Verify Installation",id:"step-5-verify-installation",level:2},{value:"Step 6: Updating SpacetimeDB Version",id:"step-6-updating-spacetimedb-version",level:2},{value:"Step 7: Troubleshooting",id:"step-7-troubleshooting",level:2},{value:"SpacetimeDB Service Fails to Start",id:"spacetimedb-service-fails-to-start",level:3},{value:"Let&#39;s Encrypt Certificate Renewal Issues",id:"lets-encrypt-certificate-renewal-issues",level:3},{value:"Nginx Fails to Start",id:"nginx-fails-to-start",level:3}];function d(s){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,c.R)(),...s.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"self-hosting-spacetimedb",children:"Self-Hosting SpacetimeDB"})}),"\n",(0,r.jsx)(e.p,{children:"This tutorial will guide you through setting up SpacetimeDB on an Ubuntu 24.04 server, securing it with HTTPS using Nginx and Let's Encrypt, and configuring a systemd service to keep it running."}),"\n",(0,r.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"A fresh Ubuntu 24.04 server (VM or cloud instance of your choice)"}),"\n",(0,r.jsxs)(e.li,{children:["A domain name (e.g., ",(0,r.jsx)(e.code,{children:"example.com"}),")"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"sudo"})," privileges on the server"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"step-1-create-a-dedicated-user-for-spacetimedb",children:"Step 1: Create a Dedicated User for SpacetimeDB"}),"\n",(0,r.jsxs)(e.p,{children:["For security purposes, create a dedicated ",(0,r.jsx)(e.code,{children:"spacetimedb"})," user to run SpacetimeDB:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" mkdir"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /stdb"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" useradd"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --system"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" chown"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -R"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb:spacetimedb"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /stdb"})]})]})})}),"\n",(0,r.jsx)(e.p,{children:"Install SpacetimeDB as the new user:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -u"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" bash"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -c"}),(0,r.jsx)(e.span,{style:{color:"#E9F284"},children:" '"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:"curl -sSf https://install.spacetimedb.com | sh -s -- --root-dir /stdb --yes"}),(0,r.jsx)(e.span,{style:{color:"#E9F284"},children:"'"})]})})})}),"\n",(0,r.jsx)(e.h2,{id:"step-2-create-a-systemd-service-for-spacetimedb",children:"Step 2: Create a Systemd Service for SpacetimeDB"}),"\n",(0,r.jsx)(e.p,{children:"To ensure SpacetimeDB runs on startup, create a systemd service file:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" nano"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /etc/systemd/system/spacetimedb.service"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"Add the following content:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(e.code,{children:[(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"[Unit]"})}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"Description="}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"SpacetimeDB Server"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"After="}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"network.target"})]}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"[Service]"})}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"ExecStart="}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"/stdb/spacetime --root-dir=/stdb start --listen-addr='127.0.0.1:3000'"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"Restart="}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:"always"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"User="}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"spacetimedb"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"WorkingDirectory="}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"/stdb"})]}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"[Install]"})}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"WantedBy="}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"multi-user.target"})]})]})})}),"\n",(0,r.jsx)(e.p,{children:"Enable and start the service:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" enable"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" start"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"})]})]})})}),"\n",(0,r.jsx)(e.p,{children:"Check the status:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" status"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"})]})})})}),"\n",(0,r.jsx)(e.h2,{id:"step-3-install-and-configure-nginx",children:"Step 3: Install and Configure Nginx"}),"\n",(0,r.jsx)(e.h3,{id:"install-nginx",children:"Install Nginx"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" apt"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" update"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" apt"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" install"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" nginx"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -y"})]})]})})}),"\n",(0,r.jsx)(e.h3,{id:"configure-nginx-reverse-proxy",children:"Configure Nginx Reverse Proxy"}),"\n",(0,r.jsx)(e.p,{children:"Create a new Nginx configuration file:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" nano"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /etc/nginx/sites-available/spacetimedb"})]})})})}),"\n",(0,r.jsxs)(e.p,{children:["Add the following configuration, remember to change ",(0,r.jsx)(e.code,{children:"example.com"})," to your own domain:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"server"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"    listen "}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:"80"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"    server_name "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"example.com;"})]}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #########################################"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # By default SpacetimeDB is completely open so that anyone can publish to it. If you want to block"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # users from creating new databases you should keep this section commented out. Otherwise, if you"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # want to open it up (probably for dev environments) then you can uncomment this section and then"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # also comment out the location / section below."})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #########################################"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # location / {"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_pass http://localhost:3000;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_http_version 1.1;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_set_header Upgrade $http_upgrade;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:'    #     proxy_set_header Connection "Upgrade";'})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_set_header Host $host;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # }"})}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # Anyone can subscribe to any database."})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # Note: This is the only section *required* for the websocket to function properly. Clients will"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # be able to create identities, call reducers, and subscribe to tables through this websocket."})}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"    location"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:" ~"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" ^/v1/database/[^/]+/subscribe$ "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"{"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_pass "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"http://localhost:3000;"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_http_version "}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:"1.1"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_set_header "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"Upgrade $http_upgrade;"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_set_header "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"Connection "}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:'"Upgrade"'}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_set_header "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"Host $host;"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # Uncomment this section to allow all HTTP reducer calls"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # location ~ ^/v1/[^/]+/call/[^/]+$ {"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_pass http://localhost:3000;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_http_version 1.1;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_set_header Upgrade $http_upgrade;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:'    #     proxy_set_header Connection "Upgrade";'})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_set_header Host $host;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # }"})}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # Uncomment this section to allow all HTTP sql requests"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # location ~ ^/v1/[^/]+/sql$ {"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_pass http://localhost:3000;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_http_version 1.1;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_set_header Upgrade $http_upgrade;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:'    #     proxy_set_header Connection "Upgrade";'})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    #     proxy_set_header Host $host;"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # }"})}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # NOTE: This is required for the typescript sdk to function, it is optional"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # for the rust and the C# SDKs."})}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"    location"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:" /v1/identity {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_pass "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"http://localhost:3000;"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_http_version "}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:"1.1"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_set_header "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"Upgrade $http_upgrade;"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_set_header "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"Connection "}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:'"Upgrade"'}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        proxy_set_header "}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"Host $host;"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,r.jsx)(e.span,{className:"line"}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # Block all other routes explicitly. Only localhost can use these routes. If you want to open your"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#6272A4"},children:"    # server up so that anyone can publish to it you should comment this section out."})}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"    location"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:" / {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        allow "}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:"127.0.0.1"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"        deny "}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:"all"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:";"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    }"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"}"})})]})})}),"\n",(0,r.jsxs)(e.p,{children:["This configuration by default blocks all connections other than ",(0,r.jsx)(e.code,{children:"/v1/identity"})," and ",(0,r.jsx)(e.code,{children:"/v1/database/<database-name>/subscribe"})," which only allows the most basic functionality. This will prevent all remote users from publishing to your SpacetimeDB instance."]}),"\n",(0,r.jsx)(e.p,{children:"Enable the configuration:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" ln"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -s"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /etc/nginx/sites-available/spacetimedb"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /etc/nginx/sites-enabled/"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"Restart Nginx:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" restart"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" nginx"})]})})})}),"\n",(0,r.jsx)(e.h3,{id:"configure-firewall",children:"Configure Firewall"}),"\n",(0,r.jsx)(e.p,{children:"Ensure your firewall allows HTTPS traffic:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" ufw"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" allow"}),(0,r.jsx)(e.span,{style:{color:"#E9F284"},children:" '"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:"Nginx Full"}),(0,r.jsx)(e.span,{style:{color:"#E9F284"},children:"'"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" ufw"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" reload"})]})]})})}),"\n",(0,r.jsx)(e.h2,{id:"step-4-secure-with-lets-encrypt",children:"Step 4: Secure with Let's Encrypt"}),"\n",(0,r.jsx)(e.h3,{id:"install-certbot",children:"Install Certbot"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" apt"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" install"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" certbot"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" python3-certbot-nginx"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -y"})]})})})}),"\n",(0,r.jsx)(e.h3,{id:"obtain-an-ssl-certificate",children:"Obtain an SSL Certificate"}),"\n",(0,r.jsxs)(e.p,{children:["Run this command to request a new SSL cert from Let's Encrypt. Remember to replace ",(0,r.jsx)(e.code,{children:"example.com"})," with your own domain:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" certbot"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --nginx"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -d"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" example.com"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"Certbot will automatically configure SSL for Nginx. Restart Nginx to apply changes:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" restart"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" nginx"})]})})})}),"\n",(0,r.jsx)(e.h3,{id:"auto-renew-ssl-certificates",children:"Auto-Renew SSL Certificates"}),"\n",(0,r.jsx)(e.p,{children:"Certbot automatically installs a renewal timer. Verify that it is active:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" status"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" certbot.timer"})]})})})}),"\n",(0,r.jsx)(e.h2,{id:"step-5-verify-installation",children:"Step 5: Verify Installation"}),"\n",(0,r.jsxs)(e.p,{children:["On your local machine, add this new server to your CLI config. Make sure to replace ",(0,r.jsx)(e.code,{children:"example.com"})," with your own domain:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" server"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" add"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" self-hosted"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --url"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" https://example.com"})]})})})}),"\n",(0,r.jsxs)(e.p,{children:["If you have uncommented the ",(0,r.jsx)(e.code,{children:"/v1/publish"})," restriction in Step 3 then you won't be able to publish to this instance unless you copy your module to the host first and then publish. We recommend something like this:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"spacetime"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" build"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"scp"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" target/wasm32-unknown-unknown/release/spacetime_module.wasm"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" ubuntu@"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:"hos"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"t"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:">"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:":/home/ubuntu/"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"ssh"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" ubuntu@"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:"hos"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"t"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:">"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetime"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" publish"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -s"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" local"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --bin-path"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetime_module.wasm"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:" <"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:"database-nam"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"e"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:">"})]})]})})}),"\n",(0,r.jsx)(e.p,{children:"You could put the above commands into a shell script to make publishing to your server easier and faster. It's also possible to integrate a script like this into Github Actions to publish on some event (like a PR merging into master)."}),"\n",(0,r.jsx)(e.h2,{id:"step-6-updating-spacetimedb-version",children:"Step 6: Updating SpacetimeDB Version"}),"\n",(0,r.jsx)(e.p,{children:"To update SpacetimeDB to the latest version, first stop the service:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" stop"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"Then upgrade SpacetimeDB:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -u"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -i"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetime"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --root-dir=/stdb"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" version"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" upgrade"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"To install a specific version, use:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -u"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -i"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetime"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --root-dir=/stdb"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" install"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:" <"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:"version-numbe"}),(0,r.jsx)(e.span,{style:{color:"#F8F8F2"},children:"r"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:">"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"Finally, restart the service:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" systemctl"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" start"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"})]})})})}),"\n",(0,r.jsx)(e.h2,{id:"step-7-troubleshooting",children:"Step 7: Troubleshooting"}),"\n",(0,r.jsx)(e.h3,{id:"spacetimedb-service-fails-to-start",children:"SpacetimeDB Service Fails to Start"}),"\n",(0,r.jsx)(e.p,{children:"Check the logs for errors:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" journalctl"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -u"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" spacetimedb"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --no-pager"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:" |"}),(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:" tail"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -20"})]})})})}),"\n",(0,r.jsxs)(e.p,{children:["Verify that the ",(0,r.jsx)(e.code,{children:"spacetimedb"})," user has the correct permissions:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" ls"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -lah"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /stdb/spacetime"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"If needed, add the executable permission:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" chmod"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" +x"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" /stdb/spacetime"})]})})})}),"\n",(0,r.jsx)(e.h3,{id:"lets-encrypt-certificate-renewal-issues",children:"Let's Encrypt Certificate Renewal Issues"}),"\n",(0,r.jsx)(e.p,{children:"Manually renew the certificate and check for errors:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" certbot"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" renew"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --dry-run"})]})})})}),"\n",(0,r.jsx)(e.h3,{id:"nginx-fails-to-start",children:"Nginx Fails to Start"}),"\n",(0,r.jsx)(e.p,{children:"Test the configuration:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" nginx"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -t"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"If errors are found, check the logs:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki spacetime-dark",style:{backgroundColor:"var(--clockworklabs-code-background-color)",color:"#F8F8F2"},tabIndex:"0",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:"sudo"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" journalctl"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -u"}),(0,r.jsx)(e.span,{style:{color:"#F1FA8C"},children:" nginx"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" --no-pager"}),(0,r.jsx)(e.span,{style:{color:"#FF79C6"},children:" |"}),(0,r.jsx)(e.span,{style:{color:"#50FA7B"},children:" tail"}),(0,r.jsx)(e.span,{style:{color:"#BD93F9"},children:" -20"})]})})})})]})}function h(s={}){const{wrapper:e}={...(0,c.R)(),...s.components};return e?(0,r.jsx)(e,{...s,children:(0,r.jsx)(d,{...s})}):d(s)}},6119:(s,e,l)=>{l.d(e,{R:()=>o,x:()=>a});var n=l(3303);const r={},c=n.createContext(r);function o(s){const e=n.useContext(c);return n.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function a(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(r):s.components||r:o(s.components),n.createElement(c.Provider,{value:e},s.children)}}}]);