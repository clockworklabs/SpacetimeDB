<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Client SDK Languages/Rust-Reference" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Rust Reference | SpacetimeDB docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.spacetimedb.com/sdks/rust"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rust Reference | SpacetimeDB docs"><meta data-rh="true" name="description" content="The SpacetimeDB client SDK for Rust contains all the tools you need to build native clients for SpacetimeDB modules using Rust."><meta data-rh="true" property="og:description" content="The SpacetimeDB client SDK for Rust contains all the tools you need to build native clients for SpacetimeDB modules using Rust."><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.spacetimedb.com/sdks/rust"><link data-rh="true" rel="alternate" href="https://docs.spacetimedb.com/sdks/rust" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.spacetimedb.com/sdks/rust" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QBC7Z9KXS2-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Rust Reference","item":"https://docs.spacetimedb.com/sdks/rust"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="SpacetimeDB docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.0cb9f7a7.css">
<script src="/assets/js/runtime~main.d71df0f5.js" defer="defer"></script>
<script src="/assets/js/main.31d95d83.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="https://spacetimedb.com/images/brand.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_6jFv" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://spacetimedb.com/images/brand.png" alt="SpacetimeDB Logo" class="themedComponent_rvet themedComponent--light_mbAJ"><img src="https://spacetimedb.com/images/brand.png" alt="SpacetimeDB Logo" class="themedComponent_rvet themedComponent--dark_Ncy6"></div></a><div class="navbarSearchContainer_AesG"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://spacetimedb.com/install" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Install</a><a href="https://spacetimedb.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://spacetimedb.com/maincloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Maincloud</a><a href="https://spacetimedb.com/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://spacetimedb.com/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_hV_y"><div class="docsWrapper_f07g"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_MJiz" type="button"></button><div class="docRoot_Gd2s"><aside class="theme-doc-sidebar-container docSidebarContainer_fSpF"><div class="sidebarViewport_YElg"><div class="sidebar_kjg4"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_AG0n"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/"><span title="Intro" class="categoryLinkLabel_EDYQ">Intro</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/deploying/maincloud"><span title="Deploying" class="categoryLinkLabel_EDYQ">Deploying</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/unity"><span title="Unity tutorial" class="categoryLinkLabel_EDYQ">Unity tutorial</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/unreal"><span title="Unreal Tutorial" class="categoryLinkLabel_EDYQ">Unreal Tutorial</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cli-reference"><span title="CLI Reference" class="categoryLinkLabel_EDYQ">CLI Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/modules"><span title="Server Module Languages" class="categoryLinkLabel_EDYQ">Server Module Languages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/sdks"><span title="Client SDK Languages" class="categoryLinkLabel_EDYQ">Client SDK Languages</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks"><span title="Overview" class="linkLabel_dpMB">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/c-sharp/quickstart"><span title="C# Quickstart" class="linkLabel_dpMB">C# Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/c-sharp"><span title="C# Reference" class="linkLabel_dpMB">C# Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/rust/quickstart"><span title="Rust Quickstart" class="linkLabel_dpMB">Rust Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sdks/rust"><span title="Rust Reference" class="linkLabel_dpMB">Rust Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/typescript/quickstart"><span title="TypeScript Quickstart" class="linkLabel_dpMB">TypeScript Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/typescript"><span title="TypeScript Reference" class="linkLabel_dpMB">TypeScript Reference</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/sql"><span title="SQL" class="categoryLinkLabel_EDYQ">SQL</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/subscriptions"><span title="Subscriptions" class="categoryLinkLabel_EDYQ">Subscriptions</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rls"><span title="Row Level Security" class="linkLabel_dpMB">Row Level Security</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/how-to/incremental-migrations"><span title="How-To" class="categoryLinkLabel_EDYQ">How-To</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/spacetimeauth"><span title="SpacetimeAuth" class="categoryLinkLabel_EDYQ">SpacetimeAuth</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/http/authorization"><span title="HTTP API" class="categoryLinkLabel_EDYQ">HTTP API</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/webassembly-abi"><span title="Internals" class="categoryLinkLabel_EDYQ">Internals</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/appendix"><span title="Appendix" class="linkLabel_dpMB">Appendix</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_dkUT"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_w2oE"><div class="docItemContainer_f71m"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_xsLZ" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_oyay"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Client SDK Languages</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Rust Reference</span></li></ul></nav><div class="tocCollapsible_dqme theme-doc-toc-mobile tocMobile_Z34P"><button type="button" class="clean-btn tocCollapsibleButton_QMSE">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>The SpacetimeDB Rust client SDK</h1></header>
<p>The SpacetimeDB client SDK for Rust contains all the tools you need to build native clients for SpacetimeDB modules using Rust.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#project-setup">Project setup</a></td><td>Configure a Rust crate to use the SpacetimeDB Rust client SDK.</td></tr><tr><td><a href="#generate-module-bindings">Generate module bindings</a></td><td>Use the SpacetimeDB CLI to generate module-specific types and interfaces.</td></tr><tr><td><a href="#type-dbconnection"><code>DbConnection</code> type</a></td><td>A connection to a remote database.</td></tr><tr><td><a href="#trait-dbcontext"><code>DbContext</code> trait</a></td><td>Methods for interacting with the remote database. Implemented by <a href="#type-dbconnection"><code>DbConnection</code></a> and various event context types.</td></tr><tr><td><a href="#type-eventcontext"><code>EventContext</code> type</a></td><td><a href="#trait-dbcontext"><code>DbContext</code></a> available in <a href="#callback-on_insert">row callbacks</a>.</td></tr><tr><td><a href="#type-reducereventcontext"><code>ReducerEventContext</code> type</a></td><td><a href="#trait-dbcontext"><code>DbContext</code></a> available in <a href="#observe-and-invoke-reducers">reducer callbacks</a>.</td></tr><tr><td><a href="#type-subscriptioneventcontext"><code>SubscriptionEventContext</code> type</a></td><td><a href="#trait-dbcontext"><code>DbContext</code></a> available in <a href="#subscribe-to-queries">subscription-related callbacks</a>.</td></tr><tr><td><a href="#type-errorcontext"><code>ErrorContext</code> type</a></td><td><a href="#trait-dbcontext"><code>DbContext</code></a> available in error-related callbacks.</td></tr><tr><td><a href="#access-the-client-cache">Access the client cache</a></td><td>Make local queries against subscribed rows, and register <a href="#callback-on_insert">row callbacks</a> to run when subscribed rows change.</td></tr><tr><td><a href="#observe-and-invoke-reducers">Observe and invoke reducers</a></td><td>Send requests to the database to run reducers, and register callbacks to run when notified of reducers.</td></tr><tr><td><a href="#identify-a-client">Identify a client</a></td><td>Types for identifying users and client connections.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="project-setup">Project setup<a href="#project-setup" class="hash-link" aria-label="Direct link to Project setup" title="Direct link to Project setup" translate="no">​</a></h2>
<p>First, create a new project using <code>cargo new</code> and add the SpacetimeDB SDK to your dependencies:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">cargo</span><span style="color:#F1FA8C"> add</span><span style="color:#F1FA8C"> spacetimedb_sdk</span></span></code></pre>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="generate-module-bindings">Generate module bindings<a href="#generate-module-bindings" class="hash-link" aria-label="Direct link to Generate module bindings" title="Direct link to Generate module bindings" translate="no">​</a></h2>
<p>Each SpacetimeDB client depends on some bindings specific to your module. Create a <code>module_bindings</code> directory in your project&#x27;s <code>src</code> directory and generate the Rust interface files using the Spacetime CLI. From your project directory, run:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">mkdir</span><span style="color:#BD93F9"> -p</span><span style="color:#F1FA8C"> src/module_bindings</span></span>
<span class="line"><span style="color:#50FA7B">spacetime</span><span style="color:#F1FA8C"> generate</span><span style="color:#BD93F9"> --lang</span><span style="color:#F1FA8C"> rust</span><span style="color:#FF79C6"> \</span></span>
<span class="line"><span style="color:#BD93F9">    --out-dir</span><span style="color:#F1FA8C"> src/module_bindings</span><span style="color:#FF79C6"> \</span></span>
<span class="line"><span style="color:#BD93F9">    --project-path</span><span style="color:#F1FA8C"> PATH-TO-MODULE-DIRECTORY</span></span></code></pre>
<p>Replace <code>PATH-TO-MODULE-DIRECTORY</code> with the path to your SpacetimeDB module.</p>
<p>Declare a <code>mod</code> for the bindings in your client&#x27;s <code>src/main.rs</code>:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">mod</span><span style="color:#F8F8F2"> module_bindings;</span></span></code></pre>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="type-dbconnection">Type <code>DbConnection</code><a href="#type-dbconnection" class="hash-link" aria-label="Direct link to type-dbconnection" title="Direct link to type-dbconnection" translate="no">​</a></h2>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DbConnection</span></span></code></pre>
<p>A connection to a remote database is represented by the <code>module_bindings::DbConnection</code> type. This type is generated per-module, and contains information about the types, tables and reducers defined by your module.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#connect-to-a-database">Connect to a database</a></td><td>Construct a <code>DbConnection</code>.</td></tr><tr><td><a href="#advance-the-connection-and-process-messages">Advance the connection</a></td><td>Poll the <code>DbConnection</code>, or set up a background worker to run it.</td></tr><tr><td><a href="#access-tables-and-reducers">Access tables and reducers</a></td><td>Access subscribed rows in the client cache, request reducer invocations, and register callbacks.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="connect-to-a-database">Connect to a database<a href="#connect-to-a-database" class="hash-link" aria-label="Direct link to Connect to a database" title="Direct link to Connect to a database" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> builder</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Construct a <code>DbConnection</code> by calling <code>DbConnection::builder()</code> and chaining configuration methods, then calling <code>.build()</code>. You must at least specify <code>with_uri</code>, to supply the URI of the SpacetimeDB to which you published your module, and <code>with_module_name</code>, to supply the human-readable SpacetimeDB domain name or the raw <code>Identity</code> which identifies the database.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#method-with_uri"><code>with_uri</code> method</a></td><td>Set the URI of the SpacetimeDB instance which hosts the remote database.</td></tr><tr><td><a href="#method-with_module_name"><code>with_module_name</code> method</a></td><td>Set the name or <code>Identity</code> of the remote database.</td></tr><tr><td><a href="#callback-on_connect"><code>on_connect</code> callback</a></td><td>Register a callback to run when the connection is successfully established.</td></tr><tr><td><a href="#callback-on_connect_error"><code>on_connect_error</code> callback</a></td><td>Register a callback to run if the connection is rejected or the host is unreachable.</td></tr><tr><td><a href="#callback-on_disconnect"><code>on_disconnect</code> callback</a></td><td>Register a callback to run when the connection ends.</td></tr><tr><td><a href="#method-with_token"><code>with_token</code> method</a></td><td>Supply a token to authenticate with the remote database.</td></tr><tr><td><a href="#method-build"><code>build</code> method</a></td><td>Finalize configuration and connect.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-with_uri">Method <code>with_uri</code><a href="#method-with_uri" class="hash-link" aria-label="Direct link to method-with_uri" title="Direct link to method-with_uri" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> with_uri</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, uri</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#8BE9FD;font-style:italic"> TryInto</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">Uri</span><span style="color:#F8F8F2">&gt;) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Configure the URI of the SpacetimeDB instance or cluster which hosts the remote database containing the module.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-with_module_name">Method <code>with_module_name</code><a href="#method-with_module_name" class="hash-link" aria-label="Direct link to method-with_module_name" title="Direct link to method-with_module_name" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> with_module_name</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, name_or_identity</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#8BE9FD;font-style:italic"> ToString</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Configure the SpacetimeDB domain name or <code>Identity</code> of the remote database which identifies it within the SpacetimeDB instance or cluster.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_connect">Callback <code>on_connect</code><a href="#callback-on_connect" class="hash-link" aria-label="Direct link to callback-on_connect" title="Direct link to callback-on_connect" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_connect</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">DbConnection</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Identity</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">str</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Chain a call to <code>.on_connect(callback)</code> to your builder to register a callback to run when your new <code>DbConnection</code> successfully initiates its connection to the remote database. The callback accepts three arguments: a reference to the <code>DbConnection</code>, the <code>Identity</code> by which SpacetimeDB identifies this connection, and a private access token which can be saved and later passed to <a href="#method-with_token"><code>with_token</code></a> to authenticate the same user in future connections.</p>
<p>This interface may change in an upcoming release as we rework SpacetimeDB&#x27;s authentication model.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_connect_error">Callback <code>on_connect_error</code><a href="#callback-on_connect_error" class="hash-link" aria-label="Direct link to callback-on_connect_error" title="Direct link to callback-on_connect_error" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_connect_error</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">ErrorContext</span><span style="color:#F8F8F2">, spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">    ) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Chain a call to <code>.on_connect_error(callback)</code> to your builder to register a callback to run when your connection fails.</p>
<p>A known bug in the SpacetimeDB Rust client SDK currently causes this callback never to be invoked. <a href="#callback-on_disconnect"><code>on_disconnect</code></a> callbacks are invoked instead.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_disconnect">Callback <code>on_disconnect</code><a href="#callback-on_disconnect" class="hash-link" aria-label="Direct link to callback-on_disconnect" title="Direct link to callback-on_disconnect" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_disconnect</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">ErrorContext</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Option</span><span style="color:#F8F8F2">&lt;spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt;),</span></span>
<span class="line"><span style="color:#F8F8F2">    ) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Chain a call to <code>.on_disconnect(callback)</code> to your builder to register a callback to run when your <code>DbConnection</code> disconnects from the remote database, either as a result of a call to <a href="#method-disconnect"><code>disconnect</code></a> or due to an error.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-with_token">Method <code>with_token</code><a href="#method-with_token" class="hash-link" aria-label="Direct link to method-with_token" title="Direct link to method-with_token" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> with_token</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, token</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Option</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> ToString</span><span style="color:#F8F8F2">&gt;&gt;) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Chain a call to <code>.with_token(token)</code> to your builder to provide an OpenID Connect compliant JSON Web Token to authenticate with, or to explicitly select an anonymous connection. If this method is not called or <code>None</code> is passed, SpacetimeDB will generate a new <code>Identity</code> and sign a new private access token for the connection.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-build">Method <code>build</code><a href="#method-build" class="hash-link" aria-label="Direct link to method-build" title="Direct link to method-build" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnectionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> build</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">DbConnection</span><span style="color:#F8F8F2">, spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>After configuring the connection and registering callbacks, attempt to open the connection.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="advance-the-connection-and-process-messages">Advance the connection and process messages<a href="#advance-the-connection-and-process-messages" class="hash-link" aria-label="Direct link to Advance the connection and process messages" title="Direct link to Advance the connection and process messages" translate="no">​</a></h3>
<p>In the interest of supporting a wide variety of client applications with different execution strategies, the SpacetimeDB SDK allows you to choose when the <code>DbConnection</code> spends compute time and processes messages. If you do not arrange for the connection to advance by calling one of these methods, the <code>DbConnection</code> will never advance, and no callbacks will ever be invoked.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#method-run_threaded"><code>run_threaded</code> method</a></td><td>Spawn a thread to process messages in the background.</td></tr><tr><td><a href="#method-run_async"><code>run_async</code> method</a></td><td>Process messages in an async task.</td></tr><tr><td><a href="#method-frame_tick"><code>frame_tick</code> method</a></td><td>Process messages on the main thread without blocking.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-run_threaded">Method <code>run_threaded</code><a href="#method-run_threaded" class="hash-link" aria-label="Direct link to method-run_threaded" title="Direct link to method-run_threaded" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> run_threaded</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">thread</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">JoinHandle</span><span style="color:#F8F8F2">&lt;()&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p><code>run_threaded</code> spawns a thread which will continuously advance the connection, sleeping when there is no work to do. The thread will panic if the connection disconnects erroneously, or return if it disconnects as a result of a call to <a href="#method-disconnect"><code>disconnect</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-run_async">Method <code>run_async</code><a href="#method-run_async" class="hash-link" aria-label="Direct link to method-run_async" title="Direct link to method-run_async" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    async</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> run_async</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;(), spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p><code>run_async</code> will continuously advance the connection, <code>await</code>-ing when there is no work to do. The task will return an <code>Err</code> if the connection disconnects erroneously, or return <code>Ok(())</code> if it disconnects as a result of a call to <a href="#method-disconnect"><code>disconnect</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-frame_tick">Method <code>frame_tick</code><a href="#method-frame_tick" class="hash-link" aria-label="Direct link to method-frame_tick" title="Direct link to method-frame_tick" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> frame_tick</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;(), spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p><code>frame_tick</code> will advance the connection until no work remains, then return rather than blocking or <code>await</code>-ing. Games might arrange for this message to be called every frame. <code>frame_tick</code> returns <code>Ok</code> if the connection remains active afterwards, or <code>Err</code> if the connection disconnected before or during the call.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="access-tables-and-reducers">Access tables and reducers<a href="#access-tables-and-reducers" class="hash-link" aria-label="Direct link to Access tables and reducers" title="Direct link to Access tables and reducers" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="field-db">Field <code>db</code><a href="#field-db" class="hash-link" aria-label="Direct link to field-db" title="Direct link to field-db" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> db</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteTables</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>db</code> field of the <code>DbConnection</code> provides access to the subscribed view of the remote database&#x27;s tables. See <a href="#access-the-client-cache">Access the client cache</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="field-reducers">Field <code>reducers</code><a href="#field-reducers" class="hash-link" aria-label="Direct link to field-reducers" title="Direct link to field-reducers" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> reducers</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteReducers</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>reducers</code> field of the <code>DbConnection</code> provides access to reducers exposed by the remote module. See <a href="#observe-and-invoke-reducers">Observe and invoke reducers</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="trait-dbcontext">Trait <code>DbContext</code><a href="#trait-dbcontext" class="hash-link" aria-label="Direct link to trait-dbcontext" title="Direct link to trait-dbcontext" translate="no">​</a></h2>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">    /* methods */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p><a href="#type-dbconnection"><code>DbConnection</code></a>, <a href="#type-eventcontext"><code>EventContext</code></a>, <a href="#type-reducereventcontext"><code>ReducerEventContext</code></a>, <a href="#type-subscriptioneventcontext"><code>SubscriptionEventContext</code></a> and <a href="#type-errorcontext"><code>ErrorContext</code></a> all implement <code>DbContext</code>. <code>DbContext</code> has methods for inspecting and configuring your connection to the remote database, including <a href="#method-db"><code>ctx.db()</code></a>, a trait-generic alternative to reading the <code>.db</code> property on a concrete-typed context object.</p>
<p>The <code>DbContext</code> trait is implemented by connections and contexts to <em>every</em> module. This means that its <a href="#method-db"><code>DbView</code></a> and <a href="#method-reducers"><code>Reducers</code></a> are associated types.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#trait-remotedbcontext"><code>RemoteDbContext</code> trait</a></td><td>Module-specific <code>DbContext</code> extension trait with associated types bound.</td></tr><tr><td><a href="#method-db"><code>db</code> method</a></td><td>Trait-generic alternative to the <code>db</code> field of <code>DbConnection</code>.</td></tr><tr><td><a href="#method-reducers"><code>reducers</code> method</a></td><td>Trait-generic alternative to the <code>reducers</code> field of <code>DbConnection</code>.</td></tr><tr><td><a href="#method-disconnect"><code>disconnect</code> method</a></td><td>End the connection.</td></tr><tr><td><a href="#subscribe-to-queries">Subscribe to queries</a></td><td>Register SQL queries to receive updates about matching rows.</td></tr><tr><td><a href="#read-connection-metadata">Read connection metadata</a></td><td>Access the connection&#x27;s <code>Identity</code> and <code>ConnectionId</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="trait-remotedbcontext">Trait <code>RemoteDbContext</code><a href="#trait-remotedbcontext" class="hash-link" aria-label="Direct link to trait-remotedbcontext" title="Direct link to trait-remotedbcontext" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">RemoteDbContext</span></span>
<span class="line"><span style="color:#FF79C6">    :</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DbContext</span><span style="color:#F8F8F2">&lt;</span><span style="color:#6272A4">/* Associated type constraints */</span><span style="color:#F8F8F2">&gt; {}</span></span></code></pre>
<p>Each module&#x27;s <code>module_bindings</code> exports a trait <code>RemoteDbContext</code> which extends <code>DbContext</code>, with the associated types <code>DbView</code> and <code>Reducers</code> bound to the types defined for that module. This can be more convenient when creating functions that can be called from any callback for a specific module, but which access the database or invoke reducers, and so must know the type of the <code>DbView</code> or <code>Reducers</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="method-db">Method <code>db</code><a href="#method-db" class="hash-link" aria-label="Direct link to method-db" title="Direct link to method-db" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> db</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> &amp;</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DbView</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>When operating in trait-generic contexts, it is necessary to call the <code>ctx.db()</code> method, rather than accessing the <code>ctx.db</code> field, as Rust traits cannot expose fields.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">fn</span><span style="color:#50FA7B"> print_users</span><span style="color:#F8F8F2">(ctx</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;impl</span><span style="color:#8BE9FD;font-style:italic"> RemoteDbContext</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FF79C6">    for</span><span style="color:#F8F8F2"> user </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> ctx</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">db</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">user</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">iter</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#50FA7B">        println!</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;{}&quot;</span><span style="color:#F8F8F2">, user</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">name);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="method-reducers">Method <code>reducers</code><a href="#method-reducers" class="hash-link" aria-label="Direct link to method-reducers" title="Direct link to method-reducers" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> reducerrs</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> &amp;</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Reducers</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>When operating in trait-generic contexts, it is necessary to call the <code>ctx.reducers()</code> method, rather than accessing the <code>ctx.reducers</code> field, as Rust traits cannot expose fields.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">fn</span><span style="color:#50FA7B"> call_say_hello</span><span style="color:#F8F8F2">(ctx</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;impl</span><span style="color:#8BE9FD;font-style:italic"> RemoteDbContext</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">    ctx</span><span style="color:#FF79C6">.</span><span style="color:#F8F8F2">reducers</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">say_hello</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="method-disconnect">Method <code>disconnect</code><a href="#method-disconnect" class="hash-link" aria-label="Direct link to method-disconnect" title="Direct link to method-disconnect" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> disconnect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Result</span><span style="color:#F8F8F2">&lt;()&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Gracefully close the <code>DbConnection</code>. Returns an <code>Err</code> if the connection is already disconnected.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="subscribe-to-queries">Subscribe to queries<a href="#subscribe-to-queries" class="hash-link" aria-label="Direct link to Subscribe to queries" title="Direct link to Subscribe to queries" translate="no">​</a></h3>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#type-subscriptionbuilder"><code>SubscriptionBuilder</code> type</a></td><td>Builder-pattern constructor to register subscribed queries.</td></tr><tr><td><a href="#type-subscriptionhandle"><code>SubscriptionHandle</code> type</a></td><td>Manage an active subscripion.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="type-subscriptionbuilder">Type <code>SubscriptionBuilder</code><a href="#type-subscriptionbuilder" class="hash-link" aria-label="Direct link to type-subscriptionbuilder" title="Direct link to type-subscriptionbuilder" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">SubscriptionBuilder</span></span></code></pre>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#constructor-ctxsubscription_builder"><code>ctx.subscription_builder()</code> constructor</a></td><td>Begin configuring a new subscription.</td></tr><tr><td><a href="#callback-on_applied"><code>on_applied</code> callback</a></td><td>Register a callback to run when matching rows become available.</td></tr><tr><td><a href="#callback-on_error"><code>on_error</code> callback</a></td><td>Register a callback to run if the subscription fails.</td></tr><tr><td><a href="#method-subscribe"><code>subscribe</code> method</a></td><td>Finish configuration and subscribe to one or more SQL queries.</td></tr><tr><td><a href="#method-subscribe_to_all_tables"><code>subscribe_to_all_tables</code> method</a></td><td>Convenience method to subscribe to the entire database.</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="constructor-ctxsubscription_builder">Constructor <code>ctx.subscription_builder()</code><a href="#constructor-ctxsubscription_builder" class="hash-link" aria-label="Direct link to constructor-ctxsubscription_builder" title="Direct link to constructor-ctxsubscription_builder" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> subscription_builder</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Subscribe to queries by calling <code>ctx.subscription_builder()</code> and chaining configuration methods, then calling <code>.subscribe(queries)</code>.</p>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_applied">Callback <code>on_applied</code><a href="#callback-on_applied" class="hash-link" aria-label="Direct link to callback-on_applied" title="Direct link to callback-on_applied" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_applied</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">SubscriptionEventContext</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Register a callback to run when the subscription is applied and the matching rows are inserted into the client cache.</p>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_error">Callback <code>on_error</code><a href="#callback-on_error" class="hash-link" aria-label="Direct link to callback-on_error" title="Direct link to callback-on_error" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_error</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">ErrorContext</span><span style="color:#F8F8F2">, spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Register a callback to run if the subscription is rejected or unexpectedly terminated by the server. This is most frequently caused by passing an invalid query to <a href="#method-subscribe"><code>subscribe</code></a>.</p>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="method-subscribe">Method <code>subscribe</code><a href="#method-subscribe" class="hash-link" aria-label="Direct link to method-subscribe" title="Direct link to method-subscribe" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> subscribe</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, queries</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#8BE9FD;font-style:italic"> IntoQueries</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionHandle</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Subscribe to a set of queries. <code>queries</code> should be a string or an array, vec or slice of strings.</p>
<p>See <a href="/sql#subscriptions">the SpacetimeDB SQL Reference</a> for information on the queries SpacetimeDB supports as subscriptions.</p>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="method-subscribe_to_all_tables">Method <code>subscribe_to_all_tables</code><a href="#method-subscribe_to_all_tables" class="hash-link" aria-label="Direct link to method-subscribe_to_all_tables" title="Direct link to method-subscribe_to_all_tables" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionBuilder</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> subscribe_to_all_tables</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Subscribe to all rows from all public tables. This method is provided as a convenience for simple clients. The subscription initiated by <code>subscribe_to_all_tables</code> cannot be canceled after it is initiated. You should <a href="#method-subscribe"><code>subscribe</code> to specific queries</a> if you need fine-grained control over the lifecycle of your subscriptions.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="type-subscriptionhandle">Type <code>SubscriptionHandle</code><a href="#type-subscriptionhandle" class="hash-link" aria-label="Direct link to type-subscriptionhandle" title="Direct link to type-subscriptionhandle" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">SubscriptionHandle</span></span></code></pre>
<p>A <code>SubscriptionHandle</code> represents a subscribed query or a group of subscribed queries.</p>
<p>The <code>SubscriptionHandle</code> does not contain or provide access to the subscribed rows. Subscribed rows of all subscriptions by a connection are contained within that connection&#x27;s <a href="#field-db"><code>ctx.db</code></a>. See <a href="#access-the-client-cache">Access the client cache</a>.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#method-is_ended"><code>is_ended</code> method</a></td><td>Determine whether the subscription has ended.</td></tr><tr><td><a href="#method-is_active"><code>is_active</code> method</a></td><td>Determine whether the subscription is active and its matching rows are present in the client cache.</td></tr><tr><td><a href="#method-unsubscribe"><code>unsubscribe</code> method</a></td><td>Discard a subscription.</td></tr><tr><td><a href="#method-unsubscribe_then"><code>unsubscribe_then</code> method</a></td><td>Discard a subscription, and register a callback to run when its matching rows are removed from the client cache.</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="method-is_ended">Method <code>is_ended</code><a href="#method-is_ended" class="hash-link" aria-label="Direct link to method-is_ended" title="Direct link to method-is_ended" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionHandle</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> is_ended</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> bool</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Returns true if this subscription has been terminated due to an unsubscribe call or an error.</p>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="method-is_active">Method <code>is_active</code><a href="#method-is_active" class="hash-link" aria-label="Direct link to method-is_active" title="Direct link to method-is_active" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionHandle</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> is_active</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> bool</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Returns true if this subscription has been applied and has not yet been unsubscribed.</p>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="method-unsubscribe">Method <code>unsubscribe</code><a href="#method-unsubscribe" class="hash-link" aria-label="Direct link to method-unsubscribe" title="Direct link to method-unsubscribe" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionHandle</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> unsubscribe</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;(), spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Terminate this subscription, causing matching rows to be removed from the client cache. Any rows removed from the client cache this way will have <a href="#callback-on_delete"><code>on_delete</code> callbacks</a> run for them.</p>
<p>Unsubscribing is an asynchronous operation. Matching rows are not removed from the client cache immediately. Use <a href="#method-unsubscribe_then"><code>unsubscribe_then</code></a> to run a callback once the unsubscribe operation is completed.</p>
<p>Returns an error if the subscription has already ended, either due to a previous call to <code>unsubscribe</code> or <a href="#method-unsubscribe_then"><code>unsubscribe_then</code></a>, or due to an error.</p>
<h5 class="anchor anchorWithStickyNavbar_wKCU" id="method-unsubscribe_then">Method <code>unsubscribe_then</code><a href="#method-unsubscribe_then" class="hash-link" aria-label="Direct link to method-unsubscribe_then" title="Direct link to method-unsubscribe_then" translate="no">​</a></h5>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionHandle</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> unsubscribe_then</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        on_end</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnOnce</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">SubscriptionEventContext</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">    ) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;(), spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Terminate this subscription, and run the <code>on_end</code> callback when the subscription is ended and its matching rows are removed from the client cache. Any rows removed from the client cache this way will have <a href="#callback-on_delete"><code>on_delete</code> callbacks</a> run for them.</p>
<p>Returns an error if the subscription has already ended, either due to a previous call to <a href="#method-unsubscribe"><code>unsubscribe</code></a> or <code>unsubscribe_then</code>, or due to an error.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="read-connection-metadata">Read connection metadata<a href="#read-connection-metadata" class="hash-link" aria-label="Direct link to Read connection metadata" title="Direct link to Read connection metadata" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-identity">Method <code>identity</code><a href="#method-identity" class="hash-link" aria-label="Direct link to method-identity" title="Direct link to method-identity" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> identity</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Identity</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Get the <code>Identity</code> with which SpacetimeDB identifies the connection. This method may panic if the connection was initiated anonymously and the newly-generated <code>Identity</code> has not yet been received, i.e. if called before the <a href="#callback-on_connect"><code>on_connect</code> callback</a> is invoked.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-try_identity">Method <code>try_identity</code><a href="#method-try_identity" class="hash-link" aria-label="Direct link to method-try_identity" title="Direct link to method-try_identity" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> try_identity</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Option</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">Identity</span><span style="color:#F8F8F2">&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Like <a href="#method-identity"><code>DbContext::identity</code></a>, but returns <code>None</code> instead of panicking if the <code>Identity</code> is not yet available.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-connection_id">Method <code>connection_id</code><a href="#method-connection_id" class="hash-link" aria-label="Direct link to method-connection_id" title="Direct link to method-connection_id" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> connection_id</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> ConnectionId</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Get the <a href="#type-connectionid"><code>ConnectionId</code></a> with which SpacetimeDB identifies the connection.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-is_active-1">Method <code>is_active</code><a href="#method-is_active-1" class="hash-link" aria-label="Direct link to method-is_active-1" title="Direct link to method-is_active-1" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#8BE9FD;font-style:italic"> DbContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> is_active</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> bool</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p><code>true</code> if the connection has not yet disconnected. Note that a connection <code>is_active</code> when it is constructed, before its <a href="#callback-on_connect"><code>on_connect</code> callback</a> is invoked.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="type-eventcontext">Type <code>EventContext</code><a href="#type-eventcontext" class="hash-link" aria-label="Direct link to type-eventcontext" title="Direct link to type-eventcontext" translate="no">​</a></h2>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">EventContext</span></span></code></pre>
<p>An <code>EventContext</code> is a <a href="#trait-dbcontext"><code>DbContext</code></a> augmented with a field <a href="#enum-event"><code>event: Event</code></a>. <code>EventContext</code>s are passed as the first argument to row callbacks <a href="#callback-on_insert"><code>on_insert</code></a>, <a href="#callback-on_delete"><code>on_delete</code></a> and <a href="#callback-on_update"><code>on_update</code></a>.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#field-event"><code>event</code> field</a></td><td>Enum describing the cause of the current row callback.</td></tr><tr><td><a href="#field-db"><code>db</code> field</a></td><td>Provides access to the client cache.</td></tr><tr><td><a href="#field-reducers"><code>reducers</code> field</a></td><td>Allows requesting reducers run on the remote database.</td></tr><tr><td><a href="#enum-event"><code>Event</code> enum</a></td><td>Possible events which can cause a row callback to be invoked.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-event">Field <code>event</code><a href="#field-event" class="hash-link" aria-label="Direct link to field-event" title="Direct link to field-event" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> EventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> event</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Event</span><span style="color:#F8F8F2">&lt;module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"><span style="color:#6272A4">    /* other fields */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <a href="#enum-event"><code>Event</code></a> contained in the <code>EventContext</code> describes what happened to cause the current row callback to be invoked.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-db-1">Field <code>db</code><a href="#field-db-1" class="hash-link" aria-label="Direct link to field-db-1" title="Direct link to field-db-1" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> EventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> db</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteTables</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>db</code> field of the context provides access to the subscribed view of the remote database&#x27;s tables. See <a href="#access-the-client-cache">Access the client cache</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-reducers-1">Field <code>reducers</code><a href="#field-reducers-1" class="hash-link" aria-label="Direct link to field-reducers-1" title="Direct link to field-reducers-1" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> EventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> reducers</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteReducers</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>reducers</code> field of the context provides access to reducers exposed by the remote module. See <a href="#observe-and-invoke-reducers">Observe and invoke reducers</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="enum-event">Enum <code>Event</code><a href="#enum-event" class="hash-link" aria-label="Direct link to enum-event" title="Direct link to enum-event" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Event</span><span style="color:#F8F8F2">&lt;module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">&gt;</span></span></code></pre>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#variant-reducer"><code>Reducer</code> variant</a></td><td>A reducer ran in the remote database.</td></tr><tr><td><a href="#variant-subscribeapplied"><code>SubscribeApplied</code> variant</a></td><td>A new subscription was applied to the client cache.</td></tr><tr><td><a href="#variant-unsubscribeapplied"><code>UnsubscribeApplied</code> variant</a></td><td>A previous subscription was removed from the client cache after a call to <a href="#method-unsubscribe"><code>unsubscribe</code></a>.</td></tr><tr><td><a href="#variant-subscribeerror"><code>SubscribeError</code> variant</a></td><td>A previous subscription was removed from the client cache due to an error.</td></tr><tr><td><a href="#variant-unknowntransaction"><code>UnknownTransaction</code> variant</a></td><td>A transaction ran in the remote database, but was not attributed to a known reducer.</td></tr><tr><td><a href="#struct-reducerevent"><code>ReducerEvent</code> struct</a></td><td>Metadata about a reducer run. Contained in <a href="#variant-reducer"><code>Event::Reducer</code></a> and <a href="#type-reducereventcontext"><code>ReducerEventContext</code></a>.</td></tr><tr><td><a href="#enum-status"><code>Status</code> enum</a></td><td>Completion status of a reducer run.</td></tr><tr><td><a href="#enum-reducer"><code>Reducer</code> enum</a></td><td>Module-specific generated enum with a variant for each reducer defined by the module.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-reducer">Variant <code>Reducer</code><a href="#variant-reducer" class="hash-link" aria-label="Direct link to variant-reducer" title="Direct link to variant-reducer" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Event</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">Reducer</span><span style="color:#F8F8F2">(spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">ReducerEvent</span><span style="color:#F8F8F2">&lt;module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">&gt;)</span></span></code></pre>
<p>Event when we are notified that a reducer ran in the remote database. The <a href="#struct-reducerevent"><code>ReducerEvent</code></a> contains metadata about the reducer run, including its arguments and termination <a href="#enum-status"><code>Status</code></a>.</p>
<p>This event is passed to row callbacks resulting from modifications by the reducer.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-subscribeapplied">Variant <code>SubscribeApplied</code><a href="#variant-subscribeapplied" class="hash-link" aria-label="Direct link to variant-subscribeapplied" title="Direct link to variant-subscribeapplied" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Event</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">SubscribeApplied</span></span></code></pre>
<p>Event when our subscription is applied and its rows are inserted into the client cache.</p>
<p>This event is passed to <a href="#callback-on_insert">row <code>on_insert</code> callbacks</a> resulting from the new subscription.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-unsubscribeapplied">Variant <code>UnsubscribeApplied</code><a href="#variant-unsubscribeapplied" class="hash-link" aria-label="Direct link to variant-unsubscribeapplied" title="Direct link to variant-unsubscribeapplied" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Event</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">UnsubscribeApplied</span></span></code></pre>
<p>Event when our subscription is removed after a call to <a href="#method-unsubscribe"><code>SubscriptionHandle::unsubscribe</code></a> or <a href="#method-unsubscribe_then"><code>SubscriptionHandle::unsubscribe_then</code></a> and its matching rows are deleted from the client cache.</p>
<p>This event is passed to <a href="#callback-on_delete">row <code>on_delete</code> callbacks</a> resulting from the subscription ending.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-subscribeerror">Variant <code>SubscribeError</code><a href="#variant-subscribeerror" class="hash-link" aria-label="Direct link to variant-subscribeerror" title="Direct link to variant-subscribeerror" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Event</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">SubscribeError</span><span style="color:#F8F8F2">(spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">)</span></span></code></pre>
<p>Event when a subscription ends unexpectedly due to an error.</p>
<p>This event is passed to <a href="#callback-on_delete">row <code>on_delete</code> callbacks</a> resulting from the subscription ending.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-unknowntransaction">Variant <code>UnknownTransaction</code><a href="#variant-unknowntransaction" class="hash-link" aria-label="Direct link to variant-unknowntransaction" title="Direct link to variant-unknowntransaction" translate="no">​</a></h4>
<p>Event when we are notified of a transaction in the remote database which we cannot associate with a known reducer. This may be an ad-hoc SQL query or a reducer for which we do not have bindings.</p>
<p>This event is passed to <a href="#callback-on_insert">row callbacks</a> resulting from modifications by the transaction.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="struct-reducerevent">Struct <code>ReducerEvent</code><a href="#struct-reducerevent" class="hash-link" aria-label="Direct link to struct-reducerevent" title="Direct link to struct-reducerevent" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">ReducerEvent</span><span style="color:#F8F8F2">&lt;module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">&gt;</span></span></code></pre>
<p>A <code>ReducerEvent</code> contains metadata about a reducer run.</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">ReducerEvent</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">R</span><span style="color:#F8F8F2">&gt; {</span></span>
<span class="line"><span style="color:#6272A4">    /// The time at which the reducer was invoked.</span></span>
<span class="line"><span style="color:#F8F8F2">    timestamp</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> SystemTime</span><span style="color:#F8F8F2">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// Whether the reducer committed, was aborted due to insufficient energy, or failed with an error message.</span></span>
<span class="line"><span style="color:#F8F8F2">    status</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Status</span><span style="color:#F8F8F2">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// The `Identity` of the SpacetimeDB actor which invoked the reducer.</span></span>
<span class="line"><span style="color:#F8F8F2">    caller_identity</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Identity</span><span style="color:#F8F8F2">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// The `ConnectionId` of the SpacetimeDB actor which invoked the reducer,</span></span>
<span class="line"><span style="color:#6272A4">    /// or `None` for scheduled reducers.</span></span>
<span class="line"><span style="color:#F8F8F2">    caller_connection_id</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Option</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">ConnectionId</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// The amount of energy consumed by the reducer run, in eV.</span></span>
<span class="line"><span style="color:#6272A4">    /// (Not literal eV, but our SpacetimeDB energy unit eV.)</span></span>
<span class="line"><span style="color:#6272A4">    ///</span></span>
<span class="line"><span style="color:#6272A4">    /// May be `None` if the module is configured not to broadcast energy consumed.</span></span>
<span class="line"><span style="color:#F8F8F2">    energy_consumed</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Option</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">u128</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    /// The `Reducer` enum defined by the `module_bindings`, which encodes which reducer ran and its arguments.</span></span>
<span class="line"><span style="color:#F8F8F2">    reducer</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> R</span><span style="color:#F8F8F2">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // ...private fields</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="enum-status">Enum <code>Status</code><a href="#enum-status" class="hash-link" aria-label="Direct link to enum-status" title="Direct link to enum-status" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Status</span></span></code></pre>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#variant-committed"><code>Committed</code> variant</a></td><td>The reducer ran successfully.</td></tr><tr><td><a href="#variant-failed"><code>Failed</code> variant</a></td><td>The reducer errored.</td></tr><tr><td><a href="#variant-outofenergy"><code>OutOfEnergy</code> variant</a></td><td>The reducer was aborted due to insufficient energy.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-committed">Variant <code>Committed</code><a href="#variant-committed" class="hash-link" aria-label="Direct link to variant-committed" title="Direct link to variant-committed" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Status</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Committed</span></span></code></pre>
<p>The reducer returned successfully and its changes were committed into the database state. An <a href="#variant-reducer"><code>Event::Reducer</code></a> passed to a row callback must have this status in its <a href="#struct-reducerevent"><code>ReducerEvent</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-failed">Variant <code>Failed</code><a href="#variant-failed" class="hash-link" aria-label="Direct link to variant-failed" title="Direct link to variant-failed" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Status</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">Failed</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">Box</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">str</span><span style="color:#F8F8F2">&gt;)</span></span></code></pre>
<p>The reducer returned an error, panicked, or threw an exception. The enum payload is the stringified error message. Formatting of the error message is unstable and subject to change, so clients should use it only as a human-readable diagnostic, and in particular should not attempt to parse the message.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="variant-outofenergy">Variant <code>OutOfEnergy</code><a href="#variant-outofenergy" class="hash-link" aria-label="Direct link to variant-outofenergy" title="Direct link to variant-outofenergy" translate="no">​</a></h4>
<p>The reducer was aborted due to insufficient energy balance of the module owner.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="enum-reducer">Enum <code>Reducer</code><a href="#enum-reducer" class="hash-link" aria-label="Direct link to enum-reducer" title="Direct link to enum-reducer" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Reducer</span></span></code></pre>
<p>The module bindings contains an enum <code>Reducer</code> with a variant for each reducer defined by the module. Each variant has a payload containing the arguments to the reducer.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="type-reducereventcontext">Type <code>ReducerEventContext</code><a href="#type-reducereventcontext" class="hash-link" aria-label="Direct link to type-reducereventcontext" title="Direct link to type-reducereventcontext" translate="no">​</a></h2>
<p>A <code>ReducerEventContext</code> is a <a href="#trait-dbcontext"><code>DbContext</code></a> augmented with a field <a href="#struct-reducerevent"><code>event: ReducerEvent</code></a>. <code>ReducerEventContext</code>s are passed as the first argument to <a href="#observe-and-invoke-reducers">reducer callbacks</a>.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#field-event"><code>event</code> field</a></td><td><a href="#struct-reducerevent"><code>ReducerEvent</code></a> containing reducer metadata.</td></tr><tr><td><a href="#field-db"><code>db</code> field</a></td><td>Provides access to the client cache.</td></tr><tr><td><a href="#field-reducers"><code>reducers</code> field</a></td><td>Allows requesting reducers run on the remote database.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-event-1">Field <code>event</code><a href="#field-event-1" class="hash-link" aria-label="Direct link to field-event-1" title="Direct link to field-event-1" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ReducerEventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> event</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">ReducerEvent</span><span style="color:#F8F8F2">&lt;module_bindings</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Reducer</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"><span style="color:#6272A4">    /* other fields */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <a href="#struct-reducerevent"><code>ReducerEvent</code></a> contained in the <code>ReducerEventContext</code> has metadata about the reducer which ran.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-db-2">Field <code>db</code><a href="#field-db-2" class="hash-link" aria-label="Direct link to field-db-2" title="Direct link to field-db-2" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ReducerEventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> db</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteTables</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>db</code> field of the context provides access to the subscribed view of the remote database&#x27;s tables. See <a href="#access-the-client-cache">Access the client cache</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-reducers-2">Field <code>reducers</code><a href="#field-reducers-2" class="hash-link" aria-label="Direct link to field-reducers-2" title="Direct link to field-reducers-2" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ReducerEventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> reducers</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteReducers</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>reducers</code> field of the context provides access to reducers exposed by the remote module. See <a href="#observe-and-invoke-reducers">Observe and invoke reducers</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="type-subscriptioneventcontext">Type <code>SubscriptionEventContext</code><a href="#type-subscriptioneventcontext" class="hash-link" aria-label="Direct link to type-subscriptioneventcontext" title="Direct link to type-subscriptioneventcontext" translate="no">​</a></h2>
<p>A <code>SubscriptionEventContext</code> is a <a href="#trait-dbcontext"><code>DbContext</code></a>. Unlike the other context types, <code>SubscriptionEventContext</code> doesn&#x27;t have an <code>event</code> field. <code>SubscriptionEventContext</code>s are passed to subscription <a href="#callback-on_applied"><code>on_applied</code></a> and <a href="#method-unsubscribe_then"><code>unsubscribe_then</code></a> callbacks.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#field-db"><code>db</code> field</a></td><td>Provides access to the client cache.</td></tr><tr><td><a href="#field-reducers"><code>reducers</code> field</a></td><td>Allows requesting reducers run on the remote database.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-db-3">Field <code>db</code><a href="#field-db-3" class="hash-link" aria-label="Direct link to field-db-3" title="Direct link to field-db-3" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionEventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> db</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteTables</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>db</code> field of the context provides access to the subscribed view of the remote database&#x27;s tables. See <a href="#access-the-client-cache">Access the client cache</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-reducers-3">Field <code>reducers</code><a href="#field-reducers-3" class="hash-link" aria-label="Direct link to field-reducers-3" title="Direct link to field-reducers-3" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> SubscriptionEventContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> reducers</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteReducers</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>reducers</code> field of the context provides access to reducers exposed by the remote module. See <a href="#observe-and-invoke-reducers">Observe and invoke reducers</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="type-errorcontext">Type <code>ErrorContext</code><a href="#type-errorcontext" class="hash-link" aria-label="Direct link to type-errorcontext" title="Direct link to type-errorcontext" translate="no">​</a></h2>
<p>An <code>ErrorContext</code> is a <a href="#trait-dbcontext"><code>DbContext</code></a> augmented with a field <code>event: spacetimedb_sdk::Error</code>. <code>ErrorContext</code>s are to connections&#x27; <a href="#callback-on_disconnect"><code>on_disconnect</code></a> and <a href="#callback-on_connect_error"><code>on_connect_error</code></a> callbacks, and to subscriptions&#x27; <a href="#callback-on_error"><code>on_error</code></a> callbacks.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#field-event"><code>event</code> field</a></td><td>The error which caused the current error callback.</td></tr><tr><td><a href="#field-db"><code>db</code> field</a></td><td>Provides access to the client cache.</td></tr><tr><td><a href="#field-reducers"><code>reducers</code> field</a></td><td>Allows requesting reducers run on the remote database.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-event-2">Field <code>event</code><a href="#field-event-2" class="hash-link" aria-label="Direct link to field-event-2" title="Direct link to field-event-2" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ErrorContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> event</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other fields */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-db-4">Field <code>db</code><a href="#field-db-4" class="hash-link" aria-label="Direct link to field-db-4" title="Direct link to field-db-4" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ErrorContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> db</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteTables</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>db</code> field of the context provides access to the subscribed view of the remote database&#x27;s tables. See <a href="#access-the-client-cache">Access the client cache</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="field-reducers-4">Field <code>reducers</code><a href="#field-reducers-4" class="hash-link" aria-label="Direct link to field-reducers-4" title="Direct link to field-reducers-4" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ErrorContext</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    pub</span><span style="color:#F8F8F2"> reducers</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> RemoteReducers</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    /* other members */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>reducers</code> field of the context provides access to reducers exposed by the remote module. See <a href="#observe-and-invoke-reducers">Observe and invoke reducers</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="access-the-client-cache">Access the client cache<a href="#access-the-client-cache" class="hash-link" aria-label="Direct link to Access the client cache" title="Direct link to Access the client cache" translate="no">​</a></h2>
<p>All <a href="#trait-dbcontext"><code>DbContext</code></a> implementors, including <a href="#type-dbconnection"><code>DbConnection</code></a> and <a href="#type-eventcontext"><code>EventContext</code></a>, have fields <code>.db</code>, which in turn has methods for accessing tables in the client cache. The trait method <code>DbContext::db(&amp;self)</code> can also be used in contexts with an <code>impl DbContext</code> rather than a concrete-typed <code>EventContext</code> or <code>DbConnection</code>.</p>
<p>Each table defined by a module has an accessor method, whose name is the table name converted to <code>snake_case</code>, on this <code>.db</code> field. The methods are defined via extension traits, which <code>rustc</code> or your IDE should help you identify and import where necessary. The table accessor methods return table handles, which implement <a href="#trait-table"><code>Table</code></a>, may implement <a href="#trait-tablewithprimarykey"><code>TableWithPrimaryKey</code></a>, and have methods for searching by unique index.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#trait-table"><code>Table</code> trait</a></td><td>Provides access to subscribed rows of a specific table within the client cache.</td></tr><tr><td><a href="#trait-tablewithprimarykey"><code>TableWithPrimaryKey</code> trait</a></td><td>Extension trait for tables which have a column designated as a primary key.</td></tr><tr><td><a href="#unique-constraint-index-access">Unique constraint index access</a></td><td>Seek a subscribed row by the value in its unique or primary key column.</td></tr><tr><td><a href="#btree-index-access">BTree index access</a></td><td>Not supported.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="trait-table">Trait <code>Table</code><a href="#trait-table" class="hash-link" aria-label="Direct link to trait-table" title="Direct link to trait-table" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Table</span></span></code></pre>
<p>Implemented by all table handles.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#associated-type-row"><code>Row</code> associated type</a></td><td>The type of rows in the table.</td></tr><tr><td><a href="#method-count"><code>count</code> method</a></td><td>The number of subscribed rows in the table.</td></tr><tr><td><a href="#method-iter"><code>iter</code> method</a></td><td>Iterate over all subscribed rows in the table.</td></tr><tr><td><a href="#callback-on_insert"><code>on_insert</code> callback</a></td><td>Register a callback to run whenever a row is inserted into the client cache.</td></tr><tr><td><a href="#callback-on_delete"><code>on_delete</code> callback</a></td><td>Register a callback to run whenever a row is deleted from the client cache.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="associated-type-row">Associated type <code>Row</code><a href="#associated-type-row" class="hash-link" aria-label="Direct link to associated-type-row" title="Direct link to associated-type-row" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Table</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> Table</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Row</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The type of rows in the table.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-count">Method <code>count</code><a href="#method-count" class="hash-link" aria-label="Direct link to method-count" title="Direct link to method-count" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Table</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> count</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> u64</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Returns the number of rows of this table resident in the client cache, i.e. the total number which match any subscribed query.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="method-iter">Method <code>iter</code><a href="#method-iter" class="hash-link" aria-label="Direct link to method-iter" title="Direct link to method-iter" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Table</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> iter</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> impl</span><span style="color:#8BE9FD;font-style:italic"> Iterator</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">Item</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Row</span><span style="color:#F8F8F2">&gt;;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>An iterator over all the subscribed rows in the client cache, i.e. those which match any subscribed query.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_insert">Callback <code>on_insert</code><a href="#callback-on_insert" class="hash-link" aria-label="Direct link to callback-on_insert" title="Direct link to callback-on_insert" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Table</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> InsertCallbackId</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_insert</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnMut</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">EventContext</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Row</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">InsertCallbackId</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> remove_on_insert</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">InsertCallbackId</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>on_insert</code> callback runs whenever a new row is inserted into the client cache, either when applying a subscription or being notified of a transaction. The passed <a href="#type-eventcontext"><code>EventContext</code></a> contains an <a href="#enum-event"><code>Event</code></a> which can identify the change which caused the insertion, and also allows the callback to interact with the connection, inspect the client cache and invoke reducers.</p>
<p>Registering an <code>on_insert</code> callback returns a callback id, which can later be passed to <code>remove_on_insert</code> to cancel the callback. Newly registered or canceled callbacks do not take effect until the following event.</p>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_delete">Callback <code>on_delete</code><a href="#callback-on_delete" class="hash-link" aria-label="Direct link to callback-on_delete" title="Direct link to callback-on_delete" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Table</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> DeleteCallbackId</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_delete</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnMut</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">EventContext</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Row</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DeleteCallbackId</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> remove_on_delete</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DeleteCallbackId</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>on_delete</code> callback runs whenever a previously-resident row is deleted from the client cache. Registering an <code>on_delete</code> callback returns a callback id, which can later be passed to <code>remove_on_delete</code> to cancel the callback. Newly registered or canceled callbacks do not take effect until the following event.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="trait-tablewithprimarykey">Trait <code>TableWithPrimaryKey</code><a href="#trait-tablewithprimarykey" class="hash-link" aria-label="Direct link to trait-tablewithprimarykey" title="Direct link to trait-tablewithprimarykey" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">TableWithPrimaryKey</span></span></code></pre>
<p>Implemented for table handles whose tables have a primary key.</p>
<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="#callback-on_update"><code>on_update</code> callback</a></td><td>Register a callback to run whenever a subscribed row is replaced with a new version.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_wKCU" id="callback-on_update">Callback <code>on_update</code><a href="#callback-on_update" class="hash-link" aria-label="Direct link to callback-on_update" title="Direct link to callback-on_update" translate="no">​</a></h4>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">trait</span><span style="color:#F8F8F2"> spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">TableWithPrimaryKey</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    type</span><span style="color:#8BE9FD;font-style:italic"> UpdateCallbackId</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> on_update</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> impl</span><span style="color:#50FA7B"> FnMut</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#8BE9FD;font-style:italic">EventContext</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Row</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Row</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">UpdateCallbackId</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> remove_on_update</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">, callback</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9;font-style:italic"> Self</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">UpdateCallbackId</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The <code>on_update</code> callback runs whenever an already-resident row in the client cache is updated, i.e. replaced with a new row that has the same primary key. Registering an <code>on_update</code> callback returns a callback id, which can later be passed to <code>remove_on_update</code> to cancel the callback. Newly registered or canceled callbacks do not take effect until the following event.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="unique-constraint-index-access">Unique constraint index access<a href="#unique-constraint-index-access" class="hash-link" aria-label="Direct link to Unique constraint index access" title="Direct link to Unique constraint index access" translate="no">​</a></h3>
<p>For each unique constraint on a table, its table handle has a method whose name is the unique column name which returns a unique index handle. The unique index handle has a method <code>.find(desired_val: &amp;Col) -&gt; Option&lt;Row&gt;</code>, where <code>Col</code> is the type of the column, and <code>Row</code> the type of rows. If a row with <code>desired_val</code> in the unique column is resident in the client cache, <code>.find</code> returns it.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="btree-index-access">BTree index access<a href="#btree-index-access" class="hash-link" aria-label="Direct link to BTree index access" title="Direct link to BTree index access" translate="no">​</a></h3>
<p>The SpacetimeDB Rust client SDK does not support non-unique BTree indexes.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="observe-and-invoke-reducers">Observe and invoke reducers<a href="#observe-and-invoke-reducers" class="hash-link" aria-label="Direct link to Observe and invoke reducers" title="Direct link to Observe and invoke reducers" translate="no">​</a></h2>
<p>All <a href="#trait-dbcontext"><code>DbContext</code></a> implementors, including <a href="#type-dbconnection"><code>DbConnection</code></a> and <a href="#type-eventcontext"><code>EventContext</code></a>, have fields <code>.reducers</code>, which in turn has methods for invoking reducers defined by the module and registering callbacks on it. The trait method <code>DbContext::reducers(&amp;self)</code> can also be used in contexts with an <code>impl DbContext</code> rather than a concrete-typed <code>EventContext</code> or <code>DbConnection</code>.</p>
<p>Each reducer defined by the module has three methods on the <code>.reducers</code>:</p>
<ul>
<li>An invoke method, whose name is the reducer&#x27;s name converted to snake case, like <code>set_name</code>. This requests that the module run the reducer.</li>
<li>A callback registation method, whose name is prefixed with <code>on_</code>, like <code>on_set_name</code>. This registers a callback to run whenever we are notified that the reducer ran, including successfully committed runs and runs we requested which failed. This method returns a callback id, which can be passed to the callback remove method.</li>
<li>A callback remove method, whose name is prefixed with <code>remove_on_</code>, like <code>remove_on_set_name</code>. This cancels a callback previously registered via the callback registration method.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="identify-a-client">Identify a client<a href="#identify-a-client" class="hash-link" aria-label="Direct link to Identify a client" title="Direct link to Identify a client" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="type-identity">Type <code>Identity</code><a href="#type-identity" class="hash-link" aria-label="Direct link to type-identity" title="Direct link to type-identity" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Identity</span></span></code></pre>
<p>A unique public identifier for a client connected to a database.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="type-connectionid">Type <code>ConnectionId</code><a href="#type-connectionid" class="hash-link" aria-label="Direct link to type-connectionid" title="Direct link to type-connectionid" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#F8F8F2">spacetimedb_sdk</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">ConnectionId</span></span></code></pre>
<p>An opaque identifier for a client connection to a database, intended to differentiate between connections from the same <a href="#type-identity"><code>Identity</code></a>.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sdks/rust/quickstart"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Rust Quickstart</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sdks/typescript/quickstart"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TypeScript Quickstart</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Ea_L thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-setup" class="table-of-contents__link toc-highlight">Project setup</a></li><li><a href="#generate-module-bindings" class="table-of-contents__link toc-highlight">Generate module bindings</a></li><li><a href="#type-dbconnection" class="table-of-contents__link toc-highlight">Type <code>DbConnection</code></a><ul><li><a href="#connect-to-a-database" class="table-of-contents__link toc-highlight">Connect to a database</a><ul><li><a href="#method-with_uri" class="table-of-contents__link toc-highlight">Method <code>with_uri</code></a></li><li><a href="#method-with_module_name" class="table-of-contents__link toc-highlight">Method <code>with_module_name</code></a></li><li><a href="#callback-on_connect" class="table-of-contents__link toc-highlight">Callback <code>on_connect</code></a></li><li><a href="#callback-on_connect_error" class="table-of-contents__link toc-highlight">Callback <code>on_connect_error</code></a></li><li><a href="#callback-on_disconnect" class="table-of-contents__link toc-highlight">Callback <code>on_disconnect</code></a></li><li><a href="#method-with_token" class="table-of-contents__link toc-highlight">Method <code>with_token</code></a></li><li><a href="#method-build" class="table-of-contents__link toc-highlight">Method <code>build</code></a></li></ul></li><li><a href="#advance-the-connection-and-process-messages" class="table-of-contents__link toc-highlight">Advance the connection and process messages</a><ul><li><a href="#method-run_threaded" class="table-of-contents__link toc-highlight">Method <code>run_threaded</code></a></li><li><a href="#method-run_async" class="table-of-contents__link toc-highlight">Method <code>run_async</code></a></li><li><a href="#method-frame_tick" class="table-of-contents__link toc-highlight">Method <code>frame_tick</code></a></li></ul></li><li><a href="#access-tables-and-reducers" class="table-of-contents__link toc-highlight">Access tables and reducers</a><ul><li><a href="#field-db" class="table-of-contents__link toc-highlight">Field <code>db</code></a></li><li><a href="#field-reducers" class="table-of-contents__link toc-highlight">Field <code>reducers</code></a></li></ul></li></ul></li><li><a href="#trait-dbcontext" class="table-of-contents__link toc-highlight">Trait <code>DbContext</code></a><ul><li><a href="#trait-remotedbcontext" class="table-of-contents__link toc-highlight">Trait <code>RemoteDbContext</code></a></li><li><a href="#method-db" class="table-of-contents__link toc-highlight">Method <code>db</code></a><ul><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#method-reducers" class="table-of-contents__link toc-highlight">Method <code>reducers</code></a><ul><li><a href="#example-1" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#method-disconnect" class="table-of-contents__link toc-highlight">Method <code>disconnect</code></a></li><li><a href="#subscribe-to-queries" class="table-of-contents__link toc-highlight">Subscribe to queries</a><ul><li><a href="#type-subscriptionbuilder" class="table-of-contents__link toc-highlight">Type <code>SubscriptionBuilder</code></a><ul><li><a href="#constructor-ctxsubscription_builder" class="table-of-contents__link toc-highlight">Constructor <code>ctx.subscription_builder()</code></a></li><li><a href="#callback-on_applied" class="table-of-contents__link toc-highlight">Callback <code>on_applied</code></a></li><li><a href="#callback-on_error" class="table-of-contents__link toc-highlight">Callback <code>on_error</code></a></li><li><a href="#method-subscribe" class="table-of-contents__link toc-highlight">Method <code>subscribe</code></a></li><li><a href="#method-subscribe_to_all_tables" class="table-of-contents__link toc-highlight">Method <code>subscribe_to_all_tables</code></a></li></ul></li><li><a href="#type-subscriptionhandle" class="table-of-contents__link toc-highlight">Type <code>SubscriptionHandle</code></a><ul><li><a href="#method-is_ended" class="table-of-contents__link toc-highlight">Method <code>is_ended</code></a></li><li><a href="#method-is_active" class="table-of-contents__link toc-highlight">Method <code>is_active</code></a></li><li><a href="#method-unsubscribe" class="table-of-contents__link toc-highlight">Method <code>unsubscribe</code></a></li><li><a href="#method-unsubscribe_then" class="table-of-contents__link toc-highlight">Method <code>unsubscribe_then</code></a></li></ul></li></ul></li><li><a href="#read-connection-metadata" class="table-of-contents__link toc-highlight">Read connection metadata</a><ul><li><a href="#method-identity" class="table-of-contents__link toc-highlight">Method <code>identity</code></a></li><li><a href="#method-try_identity" class="table-of-contents__link toc-highlight">Method <code>try_identity</code></a></li><li><a href="#method-connection_id" class="table-of-contents__link toc-highlight">Method <code>connection_id</code></a></li><li><a href="#method-is_active-1" class="table-of-contents__link toc-highlight">Method <code>is_active</code></a></li></ul></li></ul></li><li><a href="#type-eventcontext" class="table-of-contents__link toc-highlight">Type <code>EventContext</code></a><ul><li><a href="#field-event" class="table-of-contents__link toc-highlight">Field <code>event</code></a></li><li><a href="#field-db-1" class="table-of-contents__link toc-highlight">Field <code>db</code></a></li><li><a href="#field-reducers-1" class="table-of-contents__link toc-highlight">Field <code>reducers</code></a></li><li><a href="#enum-event" class="table-of-contents__link toc-highlight">Enum <code>Event</code></a><ul><li><a href="#variant-reducer" class="table-of-contents__link toc-highlight">Variant <code>Reducer</code></a></li><li><a href="#variant-subscribeapplied" class="table-of-contents__link toc-highlight">Variant <code>SubscribeApplied</code></a></li><li><a href="#variant-unsubscribeapplied" class="table-of-contents__link toc-highlight">Variant <code>UnsubscribeApplied</code></a></li><li><a href="#variant-subscribeerror" class="table-of-contents__link toc-highlight">Variant <code>SubscribeError</code></a></li><li><a href="#variant-unknowntransaction" class="table-of-contents__link toc-highlight">Variant <code>UnknownTransaction</code></a></li></ul></li><li><a href="#struct-reducerevent" class="table-of-contents__link toc-highlight">Struct <code>ReducerEvent</code></a></li><li><a href="#enum-status" class="table-of-contents__link toc-highlight">Enum <code>Status</code></a><ul><li><a href="#variant-committed" class="table-of-contents__link toc-highlight">Variant <code>Committed</code></a></li><li><a href="#variant-failed" class="table-of-contents__link toc-highlight">Variant <code>Failed</code></a></li><li><a href="#variant-outofenergy" class="table-of-contents__link toc-highlight">Variant <code>OutOfEnergy</code></a></li></ul></li><li><a href="#enum-reducer" class="table-of-contents__link toc-highlight">Enum <code>Reducer</code></a></li></ul></li><li><a href="#type-reducereventcontext" class="table-of-contents__link toc-highlight">Type <code>ReducerEventContext</code></a><ul><li><a href="#field-event-1" class="table-of-contents__link toc-highlight">Field <code>event</code></a></li><li><a href="#field-db-2" class="table-of-contents__link toc-highlight">Field <code>db</code></a></li><li><a href="#field-reducers-2" class="table-of-contents__link toc-highlight">Field <code>reducers</code></a></li></ul></li><li><a href="#type-subscriptioneventcontext" class="table-of-contents__link toc-highlight">Type <code>SubscriptionEventContext</code></a><ul><li><a href="#field-db-3" class="table-of-contents__link toc-highlight">Field <code>db</code></a></li><li><a href="#field-reducers-3" class="table-of-contents__link toc-highlight">Field <code>reducers</code></a></li></ul></li><li><a href="#type-errorcontext" class="table-of-contents__link toc-highlight">Type <code>ErrorContext</code></a><ul><li><a href="#field-event-2" class="table-of-contents__link toc-highlight">Field <code>event</code></a></li><li><a href="#field-db-4" class="table-of-contents__link toc-highlight">Field <code>db</code></a></li><li><a href="#field-reducers-4" class="table-of-contents__link toc-highlight">Field <code>reducers</code></a></li></ul></li><li><a href="#access-the-client-cache" class="table-of-contents__link toc-highlight">Access the client cache</a><ul><li><a href="#trait-table" class="table-of-contents__link toc-highlight">Trait <code>Table</code></a><ul><li><a href="#associated-type-row" class="table-of-contents__link toc-highlight">Associated type <code>Row</code></a></li><li><a href="#method-count" class="table-of-contents__link toc-highlight">Method <code>count</code></a></li><li><a href="#method-iter" class="table-of-contents__link toc-highlight">Method <code>iter</code></a></li><li><a href="#callback-on_insert" class="table-of-contents__link toc-highlight">Callback <code>on_insert</code></a></li><li><a href="#callback-on_delete" class="table-of-contents__link toc-highlight">Callback <code>on_delete</code></a></li></ul></li><li><a href="#trait-tablewithprimarykey" class="table-of-contents__link toc-highlight">Trait <code>TableWithPrimaryKey</code></a><ul><li><a href="#callback-on_update" class="table-of-contents__link toc-highlight">Callback <code>on_update</code></a></li></ul></li><li><a href="#unique-constraint-index-access" class="table-of-contents__link toc-highlight">Unique constraint index access</a></li><li><a href="#btree-index-access" class="table-of-contents__link toc-highlight">BTree index access</a></li></ul></li><li><a href="#observe-and-invoke-reducers" class="table-of-contents__link toc-highlight">Observe and invoke reducers</a></li><li><a href="#identify-a-client" class="table-of-contents__link toc-highlight">Identify a client</a><ul><li><a href="#type-identity" class="table-of-contents__link toc-highlight">Type <code>Identity</code></a></li><li><a href="#type-connectionid" class="table-of-contents__link toc-highlight">Type <code>ConnectionId</code></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"></div></footer></div>
</body>
</html>