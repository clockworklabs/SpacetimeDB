<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Client SDK Languages/Typescript-Quickstart" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">TypeScript Quickstart | SpacetimeDB docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.spacetimedb.com/sdks/typescript/quickstart"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TypeScript Quickstart | SpacetimeDB docs"><meta data-rh="true" name="description" content="In this guide, you&#x27;ll learn how to use TypeScript to create a SpacetimeDB client application."><meta data-rh="true" property="og:description" content="In this guide, you&#x27;ll learn how to use TypeScript to create a SpacetimeDB client application."><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.spacetimedb.com/sdks/typescript/quickstart"><link data-rh="true" rel="alternate" href="https://docs.spacetimedb.com/sdks/typescript/quickstart" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.spacetimedb.com/sdks/typescript/quickstart" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QBC7Z9KXS2-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"TypeScript Quickstart","item":"https://docs.spacetimedb.com/sdks/typescript/quickstart"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="SpacetimeDB docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.0cb9f7a7.css">
<script src="/assets/js/runtime~main.d71df0f5.js" defer="defer"></script>
<script src="/assets/js/main.31d95d83.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="https://spacetimedb.com/images/brand.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_6jFv" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://spacetimedb.com/images/brand.png" alt="SpacetimeDB Logo" class="themedComponent_rvet themedComponent--light_mbAJ"><img src="https://spacetimedb.com/images/brand.png" alt="SpacetimeDB Logo" class="themedComponent_rvet themedComponent--dark_Ncy6"></div></a><div class="navbarSearchContainer_AesG"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://spacetimedb.com/install" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Install</a><a href="https://spacetimedb.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://spacetimedb.com/maincloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Maincloud</a><a href="https://spacetimedb.com/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://spacetimedb.com/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_hV_y"><div class="docsWrapper_f07g"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_MJiz" type="button"></button><div class="docRoot_Gd2s"><aside class="theme-doc-sidebar-container docSidebarContainer_fSpF"><div class="sidebarViewport_YElg"><div class="sidebar_kjg4"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_AG0n"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/"><span title="Intro" class="categoryLinkLabel_EDYQ">Intro</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/deploying/maincloud"><span title="Deploying" class="categoryLinkLabel_EDYQ">Deploying</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/unity"><span title="Unity tutorial" class="categoryLinkLabel_EDYQ">Unity tutorial</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/unreal"><span title="Unreal Tutorial" class="categoryLinkLabel_EDYQ">Unreal Tutorial</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cli-reference"><span title="CLI Reference" class="categoryLinkLabel_EDYQ">CLI Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/modules"><span title="Server Module Languages" class="categoryLinkLabel_EDYQ">Server Module Languages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/sdks"><span title="Client SDK Languages" class="categoryLinkLabel_EDYQ">Client SDK Languages</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks"><span title="Overview" class="linkLabel_dpMB">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/c-sharp/quickstart"><span title="C# Quickstart" class="linkLabel_dpMB">C# Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/c-sharp"><span title="C# Reference" class="linkLabel_dpMB">C# Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/rust/quickstart"><span title="Rust Quickstart" class="linkLabel_dpMB">Rust Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/rust"><span title="Rust Reference" class="linkLabel_dpMB">Rust Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sdks/typescript/quickstart"><span title="TypeScript Quickstart" class="linkLabel_dpMB">TypeScript Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sdks/typescript"><span title="TypeScript Reference" class="linkLabel_dpMB">TypeScript Reference</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/sql"><span title="SQL" class="categoryLinkLabel_EDYQ">SQL</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/subscriptions"><span title="Subscriptions" class="categoryLinkLabel_EDYQ">Subscriptions</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rls"><span title="Row Level Security" class="linkLabel_dpMB">Row Level Security</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/how-to/incremental-migrations"><span title="How-To" class="categoryLinkLabel_EDYQ">How-To</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/spacetimeauth"><span title="SpacetimeAuth" class="categoryLinkLabel_EDYQ">SpacetimeAuth</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/http/authorization"><span title="HTTP API" class="categoryLinkLabel_EDYQ">HTTP API</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/webassembly-abi"><span title="Internals" class="categoryLinkLabel_EDYQ">Internals</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/appendix"><span title="Appendix" class="linkLabel_dpMB">Appendix</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_dkUT"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_w2oE"><div class="docItemContainer_f71m"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_xsLZ" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_oyay"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Client SDK Languages</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">TypeScript Quickstart</span></li></ul></nav><div class="tocCollapsible_dqme theme-doc-toc-mobile tocMobile_Z34P"><button type="button" class="clean-btn tocCollapsibleButton_QMSE">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>TypeScript Client SDK Quickstart</h1></header>
<p>In this guide, you&#x27;ll learn how to use TypeScript to create a SpacetimeDB client application.</p>
<p>Please note that TypeScript is supported as a client language only. <strong>Before you get started on this guide</strong>, you should complete one of the quickstart guides for creating a SpacetimeDB server module listed below.</p>
<ul>
<li><a href="/modules/rust/quickstart">Rust</a></li>
<li><a href="/modules/c-sharp/quickstart">C#</a></li>
</ul>
<p>By the end of this introduction, you will have created a basic single page web app which connects to the <code>quickstart-chat</code> database created in the above module quickstart guides.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="project-structure">Project structure<a href="#project-structure" class="hash-link" aria-label="Direct link to Project structure" title="Direct link to Project structure" translate="no">​</a></h2>
<p>Enter the directory <code>quickstart-chat</code> you created in the <a href="/modules/rust/quickstart">Rust Module Quickstart</a> or <a href="/modules/c-sharp/quickstart">C# Module Quickstart</a> guides:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#8BE9FD">cd</span><span style="color:#F1FA8C"> quickstart-chat</span></span></code></pre>
<p>Within it, create a <code>client</code> React app:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">pnpm</span><span style="color:#F1FA8C"> create</span><span style="color:#F1FA8C"> vite@latest</span><span style="color:#F1FA8C"> client</span><span style="color:#BD93F9"> --</span><span style="color:#BD93F9"> --template</span><span style="color:#F1FA8C"> react-ts</span></span>
<span class="line"><span style="color:#8BE9FD">cd</span><span style="color:#F1FA8C"> client</span></span>
<span class="line"><span style="color:#50FA7B">pnpm</span><span style="color:#F1FA8C"> install</span></span></code></pre>
<p>We also need to install the <code>spacetime-client-sdk</code> package:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">pnpm</span><span style="color:#F1FA8C"> install</span><span style="color:#F1FA8C"> spacetimedb</span></span></code></pre>
<div class="theme-admonition theme-admonition-note admonition_scYj alert alert--secondary"><div class="admonitionHeading_zhQc"><span class="admonitionIcon_kfZz"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_O7JJ"><p>If you are using another package manager like <code>yarn</code> or <code>npm</code>, the same steps should work with the appropriate commands for those tools.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_scYj alert alert--warning"><div class="admonitionHeading_zhQc"><span class="admonitionIcon_kfZz"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_O7JJ"><p>The <code>@clockworklabs/spacetimedb-sdk</code> package has been deprecated in favor of the <code>spacetimedb</code> package as of SpacetimeDB version 1.4.0. If you are using the old SDK package, you will need to switch to <code>spacetimedb</code>. You will also need a SpacetimeDB CLI version of 1.4.0+ to generate bindings for the new <code>spacetimedb</code> package.</p></div></div>
<p>You can now <code>pnpm run dev</code> to see the Vite template app running at <code>http://localhost:5173</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="basic-layout">Basic layout<a href="#basic-layout" class="hash-link" aria-label="Direct link to Basic layout" title="Direct link to Basic layout" translate="no">​</a></h2>
<p>The app we&#x27;re going to create is a basic chat application. We will begin by creating a layout for our app. The webpage will contain four sections:</p>
<ol>
<li>A profile section, where we can set our name.</li>
<li>A message section, where we can see all the messages.</li>
<li>A system section, where we can see system messages.</li>
<li>A new message section, where we can send a new message.</li>
</ol>
<p>Replace the entire contents of <code>client/src/App.tsx</code> with the following:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> React, { useEffect, useState } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">react</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { DbConnection, Message, User } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">./module_bindings</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { useSpacetimeDB, useTable, where, eq } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">spacetimedb/react</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { Identity, Timestamp } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">spacetimedb</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">./App.css</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> type</span><span style="color:#8BE9FD;font-style:italic"> PrettyMessage</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  senderName</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> string</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  text</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> string</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  sent</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Timestamp</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  kind</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">system</span><span style="color:#E9F284">&#x27;</span><span style="color:#FF79C6"> |</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">user</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">function</span><span style="color:#50FA7B"> App</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> [newName, setNewName] </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useState</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;&#x27;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> [settingName, setSettingName] </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useState</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">false</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> [systemMessages, setSystemMessages] </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useState</span><span style="color:#F8F8F2">([] </span><span style="color:#FF79C6">as</span><span style="color:#8BE9FD;font-style:italic"> Message</span><span style="color:#F8F8F2">[]);</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> [newMessage, setNewMessage] </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useState</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;&#x27;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> prettyMessages</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> PrettyMessage</span><span style="color:#F8F8F2">[] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [];</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> onlineUsers</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> User</span><span style="color:#F8F8F2">[] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [];</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> offlineUsers</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> User</span><span style="color:#F8F8F2">[] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [];</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> users </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#FF79C6">...</span><span style="color:#F8F8F2">onlineUsers, </span><span style="color:#FF79C6">...</span><span style="color:#F8F8F2">offlineUsers];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> name </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> &#x27;&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#50FA7B"> onSubmitNewName</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">e</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> React</span><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD;font-style:italic">FormEvent</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">HTMLFormElement</span><span style="color:#F8F8F2">&gt;) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    e.</span><span style="color:#50FA7B">preventDefault</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#50FA7B">    setSettingName</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">false</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#6272A4">    // TODO: Call `setName` reducer</span></span>
<span class="line"><span style="color:#F8F8F2">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#50FA7B"> onSubmitMessage</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">e</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> React</span><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD;font-style:italic">FormEvent</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">HTMLFormElement</span><span style="color:#F8F8F2">&gt;) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    e.</span><span style="color:#50FA7B">preventDefault</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#50FA7B">    setNewMessage</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;&#x27;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#6272A4">    // TODO: Call `sendMessage` reducer</span></span>
<span class="line"><span style="color:#F8F8F2">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">    &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">App</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">profile</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Profile&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">settingName </span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;{name}&lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;</span><span style="color:#FF79C6">button</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">              onClick</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{() </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#50FA7B">                setSettingName</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#50FA7B">                setNewName</span><span style="color:#F8F8F2">(name);</span></span>
<span class="line"><span style="color:#F8F8F2">              }}</span></span>
<span class="line"><span style="color:#F8F8F2">            &gt;</span></span>
<span class="line"><span style="color:#F8F8F2">              Edit Name</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;/</span><span style="color:#FF79C6">button</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;/&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        ) </span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;</span><span style="color:#FF79C6">form</span><span style="color:#50FA7B;font-style:italic"> onSubmit</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{onSubmitNewName}&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;</span><span style="color:#FF79C6">input</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">              type</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">text</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">              aria-label</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">username input</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">              value</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{newName}</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">              onChange</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{</span><span style="color:#FFB86C;font-style:italic">e</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#50FA7B"> setNewName</span><span style="color:#F8F8F2">(e.target.value)}</span></span>
<span class="line"><span style="color:#F8F8F2">            /&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;</span><span style="color:#FF79C6">button</span><span style="color:#50FA7B;font-style:italic"> type</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">submit</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;Submit&lt;/</span><span style="color:#FF79C6">button</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;/</span><span style="color:#FF79C6">form</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        )}</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">message-panel</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Messages&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        {prettyMessages.length </span><span style="color:#FF79C6">&lt;</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6"> &amp;&amp;</span><span style="color:#F8F8F2"> &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;No messages&lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;}</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">messages</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          {prettyMessages.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">message</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">key</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">            const</span><span style="color:#F8F8F2"> sentDate </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> message.sent.</span><span style="color:#50FA7B">toDate</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#FF79C6">            const</span><span style="color:#F8F8F2"> now </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#FF79C6">            const</span><span style="color:#F8F8F2"> isOlderThanDay </span><span style="color:#FF79C6">=</span></span>
<span class="line"><span style="color:#F8F8F2">              now.</span><span style="color:#50FA7B">getFullYear</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">!==</span><span style="color:#F8F8F2"> sentDate.</span><span style="color:#50FA7B">getFullYear</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">||</span></span>
<span class="line"><span style="color:#F8F8F2">              now.</span><span style="color:#50FA7B">getMonth</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">!==</span><span style="color:#F8F8F2"> sentDate.</span><span style="color:#50FA7B">getMonth</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">||</span></span>
<span class="line"><span style="color:#F8F8F2">              now.</span><span style="color:#50FA7B">getDate</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">!==</span><span style="color:#F8F8F2"> sentDate.</span><span style="color:#50FA7B">getDate</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">            const</span><span style="color:#F8F8F2"> timeString </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> sentDate.</span><span style="color:#50FA7B">toLocaleTimeString</span><span style="color:#F8F8F2">([], {</span></span>
<span class="line"><span style="color:#F8F8F2">              hour</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">2-digit</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">              minute</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">2-digit</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            });</span></span>
<span class="line"><span style="color:#FF79C6">            const</span><span style="color:#F8F8F2"> dateString </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> isOlderThanDay</span></span>
<span class="line"><span style="color:#FF79C6">              ?</span><span style="color:#F8F8F2"> sentDate.</span><span style="color:#50FA7B">toLocaleDateString</span><span style="color:#F8F8F2">([], {</span></span>
<span class="line"><span style="color:#F8F8F2">                  year</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">numeric</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                  month</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">short</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                  day</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">numeric</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                }) </span><span style="color:#FF79C6">+</span><span style="color:#E9F284"> &#x27;</span><span style="color:#E9F284"> &#x27;</span></span>
<span class="line"><span style="color:#FF79C6">              :</span><span style="color:#E9F284"> &#x27;&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">            return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">              &lt;</span><span style="color:#FF79C6">div</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">                key</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{key}</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">                className</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">                  message.kind </span><span style="color:#FF79C6">===</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">system</span><span style="color:#E9F284">&#x27;</span><span style="color:#FF79C6"> ?</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">system-message</span><span style="color:#E9F284">&#x27;</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">user-message</span><span style="color:#E9F284">&#x27;</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">              &gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                  &lt;</span><span style="color:#FF79C6">b</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                    {message.kind </span><span style="color:#FF79C6">===</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">system</span><span style="color:#E9F284">&#x27;</span><span style="color:#FF79C6"> ?</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">System</span><span style="color:#E9F284">&#x27;</span><span style="color:#FF79C6"> :</span><span style="color:#F8F8F2"> message.senderName}</span></span>
<span class="line"><span style="color:#F8F8F2">                  &lt;/</span><span style="color:#FF79C6">b</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                  &lt;</span><span style="color:#FF79C6">span</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">                    style</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{{</span></span>
<span class="line"><span style="color:#F8F8F2">                      fontSize</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">0.8rem</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                      marginLeft</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">0.5rem</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                      color</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">#666</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                    }}</span></span>
<span class="line"><span style="color:#F8F8F2">                  &gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                    {dateString}</span></span>
<span class="line"><span style="color:#F8F8F2">                    {timeString}</span></span>
<span class="line"><span style="color:#F8F8F2">                  &lt;/</span><span style="color:#FF79C6">span</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                &lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;{message.text}&lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">              &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            );</span></span>
<span class="line"><span style="color:#F8F8F2">          })}</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">online</span><span style="color:#E9F284">&quot;</span><span style="color:#50FA7B;font-style:italic"> style</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{{ whiteSpace</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">pre-wrap</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2"> }}&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Online&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          {onlineUsers.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">user</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">key</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> key</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{key}&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">              &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;{user.name </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> user.identity.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">substring</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">8</span><span style="color:#F8F8F2">)}&lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          ))}</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        {offlineUsers.length </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 0</span><span style="color:#FF79C6"> &amp;&amp;</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Offline&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            {offlineUsers.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">user</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">key</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">              &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> key</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{key}&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                &lt;</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">                  {user.name </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> user.identity.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">substring</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">8</span><span style="color:#F8F8F2">)}</span></span>
<span class="line"><span style="color:#F8F8F2">                &lt;/</span><span style="color:#FF79C6">p</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">              &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">            ))}</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        )}</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">new-message</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;</span><span style="color:#FF79C6">form</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">          onSubmit</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{onSubmitMessage}</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">          style</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{{</span></span>
<span class="line"><span style="color:#F8F8F2">            display</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">flex</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            flexDirection</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">column</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            width</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">50%</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            margin</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">0 auto</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">          }}</span></span>
<span class="line"><span style="color:#F8F8F2">        &gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;</span><span style="color:#FF79C6">h3</span><span style="color:#F8F8F2">&gt;New Message&lt;/</span><span style="color:#FF79C6">h3</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;</span><span style="color:#FF79C6">textarea</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">            aria-label</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">message input</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">            value</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{newMessage}</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">            onChange</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{</span><span style="color:#FFB86C;font-style:italic">e</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#50FA7B"> setNewMessage</span><span style="color:#F8F8F2">(e.target.value)}</span></span>
<span class="line"><span style="color:#F8F8F2">          &gt;&lt;/</span><span style="color:#FF79C6">textarea</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">          &lt;</span><span style="color:#FF79C6">button</span><span style="color:#50FA7B;font-style:italic"> type</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">submit</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;Send&lt;/</span><span style="color:#FF79C6">button</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">        &lt;/</span><span style="color:#FF79C6">form</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">    &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">  );</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> default</span><span style="color:#F8F8F2"> App;</span></span></code></pre>
<p>We have configured the <code>onSubmitNewName</code> and <code>onSubmitMessage</code> callbacks to be called when the user clicks the submit button in the profile and new message sections, respectively. For now, they do nothing when called, but later we&#x27;ll add some logic to call SpacetimeDB reducers when these callbacks are called.</p>
<p>Let&#x27;s also make it pretty. Replace the contents of <code>client/src/App.css</code> with the following:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B;font-style:italic">.App</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  display</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> grid</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#6272A4">  /* </span></span>
<span class="line"><span style="color:#6272A4">    3 rows: </span></span>
<span class="line"><span style="color:#6272A4">      1) Profile</span></span>
<span class="line"><span style="color:#6272A4">      2) Main content (left = message, right = online)</span></span>
<span class="line"><span style="color:#6272A4">      3) New message</span></span>
<span class="line"><span style="color:#6272A4">  */</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-template-rows</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> auto</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">fr</span><span style="color:#BD93F9"> auto</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#6272A4">  /* 2 columns: left for chat, right for online */</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-template-columns</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 2</span><span style="color:#FF79C6">fr</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">fr</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">  height</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 100</span><span style="color:#FF79C6">vh</span><span style="color:#F8F8F2">; </span><span style="color:#6272A4">/* fill viewport height */</span></span>
<span class="line"><span style="color:#8BE9FD">  width</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> clamp</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">300</span><span style="color:#FF79C6">px</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">100</span><span style="color:#FF79C6">%</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">1200</span><span style="color:#FF79C6">px</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#8BE9FD">  margin</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0</span><span style="color:#BD93F9"> auto</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- Profile (Row 1, spans both columns) ----- */</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.profile</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-column</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2"> / </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  display</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> flex</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  align-items</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> center</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  gap</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border-bottom</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">px</span><span style="color:#BD93F9"> solid</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.profile</span><span style="color:#FF79C6"> h1</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  margin-right</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> auto</span><span style="color:#F8F8F2">; </span><span style="color:#6272A4">/* pushes name/edit form to the right */</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.profile</span><span style="color:#FF79C6"> form</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  display</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> flex</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  flex-grow</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  align-items</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> center</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  gap</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.5</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  max-width</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 300</span><span style="color:#FF79C6">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.profile</span><span style="color:#FF79C6"> form input</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  background-color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--textbox-color);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- Chat Messages (Row 2, Col 1) ----- */</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.message-panel</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-row</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2"> / </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-column</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2"> / </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  /* Ensure this section scrolls if content is long */</span></span>
<span class="line"><span style="color:#8BE9FD">  overflow-y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> auto</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  display</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> flex</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  flex-direction</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> column</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  gap</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.messages</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  display</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> flex</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  flex-direction</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> column</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  gap</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.5</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.system-message</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  background-color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color);</span></span>
<span class="line"><span style="color:#8BE9FD">  color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color-contrast);</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.5</span><span style="color:#FF79C6">rem</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border-radius</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.375</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  font-style</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> italic</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.user-message</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  background-color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--textbox-color);</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.5</span><span style="color:#FF79C6">rem</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border-radius</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.375</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.message</span><span style="color:#FF79C6"> h1</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  margin-right</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.5</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- Online Panel (Row 2, Col 2) ----- */</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.online</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-row</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2"> / </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-column</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2"> / </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  /* Also scroll independently if needed */</span></span>
<span class="line"><span style="color:#8BE9FD">  overflow-y</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> auto</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border-left</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">px</span><span style="color:#BD93F9"> solid</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color);</span></span>
<span class="line"><span style="color:#8BE9FD">  white-space</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> pre-wrap</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  font-family</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> monospace</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- New Message (Row 3, spans columns 1-2) ----- */</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.new-message</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  grid-column</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2"> / </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  display</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> flex</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  justify-content</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> center</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  align-items</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> center</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border-top</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">px</span><span style="color:#BD93F9"> solid</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.new-message</span><span style="color:#FF79C6"> form</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  display</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> flex</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  flex-direction</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> column</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  gap</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.75</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  width</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 100</span><span style="color:#FF79C6">%</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  max-width</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 600</span><span style="color:#FF79C6">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.new-message</span><span style="color:#FF79C6"> form h3</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  margin-bottom</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.25</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* Distinct background for the textarea */</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">.new-message</span><span style="color:#FF79C6"> form textarea</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  font-family</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> monospace</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  font-weight</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 400</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  font-size</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  resize</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> vertical</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  min-height</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 80</span><span style="color:#FF79C6">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  background-color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--textbox-color);</span></span>
<span class="line"><span style="color:#8BE9FD">  color</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> inherit</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  /* Subtle shadow for visibility */</span></span>
<span class="line"><span style="color:#8BE9FD">  box-shadow</span><span style="color:#FF79C6">:</span></span>
<span class="line"><span style="color:#BD93F9">    0</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">px</span><span style="color:#BD93F9"> 3</span><span style="color:#FF79C6">px</span><span style="color:#8BE9FD"> rgba</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0.12</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#BD93F9">    0</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">px</span><span style="color:#BD93F9"> 2</span><span style="color:#FF79C6">px</span><span style="color:#8BE9FD"> rgba</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0.24</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">@media</span><span style="color:#F8F8F2"> (prefers-color-scheme</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> dark) {</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">  .new-message</span><span style="color:#FF79C6"> form textarea</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">    box-shadow</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0</span><span style="color:#BD93F9"> 0</span><span style="color:#BD93F9"> 0</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6">px</span><span style="color:#BD93F9"> #17492b</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Next, we need to replace the global styles in <code>client/src/index.css</code> as well:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#6272A4">/* ----- CSS Reset &amp; Global Settings ----- */</span></span>
<span class="line"><span style="color:#FF79C6">*</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">*</span><span style="color:#FF79C6;font-style:italic">::</span><span style="color:#50FA7B;font-style:italic">before</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">*</span><span style="color:#FF79C6;font-style:italic">::</span><span style="color:#50FA7B;font-style:italic">after</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  box-sizing</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> border-box</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  margin</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- Color Variables ----- */</span></span>
<span class="line"><span style="color:#FF79C6;font-style:italic">:</span><span style="color:#50FA7B;font-style:italic">root</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  --theme-color</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> #3dc373</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  --theme-color-contrast</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> #08180e</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  --textbox-color</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> #edfef4</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  color-scheme</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> light</span><span style="color:#BD93F9"> dark</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">@media</span><span style="color:#F8F8F2"> (prefers-color-scheme</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> dark) {</span></span>
<span class="line"><span style="color:#FF79C6;font-style:italic">  :</span><span style="color:#50FA7B;font-style:italic">root</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    --theme-color</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> #4cf490</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    --theme-color-contrast</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> #132219</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    --textbox-color</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> #0f311d</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- Page Setup ----- */</span></span>
<span class="line"><span style="color:#FF79C6">html</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">body</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#50FA7B;font-style:italic">#root</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  height</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 100</span><span style="color:#FF79C6">%</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  margin</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">body</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  font-family</span><span style="color:#FF79C6">:</span></span>
<span class="line"><span style="color:#BD93F9">    -apple-system</span><span style="color:#F8F8F2">, BlinkMacSystemFont, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Segoe UI</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Roboto</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Oxygen</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Ubuntu</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">    &#x27;</span><span style="color:#F1FA8C">Cantarell</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Fira Sans</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Droid Sans</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Helvetica Neue</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">sans-serif</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">  -webkit-font-smoothing</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> antialiased</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">  -moz-osx-font-smoothing</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> grayscale</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">code</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  font-family</span><span style="color:#FF79C6">:</span></span>
<span class="line"><span style="color:#F8F8F2">    source-code-pro, Menlo, Monaco, Consolas, </span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Courier New</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">monospace</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- Buttons ----- */</span></span>
<span class="line"><span style="color:#FF79C6">button</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.5</span><span style="color:#FF79C6">rem</span><span style="color:#BD93F9"> 0.75</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> none</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border-radius</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.375</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  background-color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color);</span></span>
<span class="line"><span style="color:#8BE9FD">  color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color-contrast);</span></span>
<span class="line"><span style="color:#8BE9FD">  cursor</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> pointer</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  font-weight</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 600</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  letter-spacing</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.1</span><span style="color:#FF79C6">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  font-family</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> monospace</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">/* ----- Inputs &amp; Textareas ----- */</span></span>
<span class="line"><span style="color:#FF79C6">input</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">textarea</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  border</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> none</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  border-radius</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.375</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  caret-color</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color);</span></span>
<span class="line"><span style="color:#8BE9FD">  font-family</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> monospace</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  font-weight</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 600</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  letter-spacing</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.1</span><span style="color:#FF79C6">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  padding</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0.5</span><span style="color:#FF79C6">rem</span><span style="color:#BD93F9"> 0.75</span><span style="color:#FF79C6">rem</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">input</span><span style="color:#FF79C6;font-style:italic">:</span><span style="color:#50FA7B;font-style:italic">focus</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FF79C6">textarea</span><span style="color:#FF79C6;font-style:italic">:</span><span style="color:#50FA7B;font-style:italic">focus</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  outline</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> none</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#8BE9FD">  box-shadow</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 0</span><span style="color:#BD93F9"> 0</span><span style="color:#BD93F9"> 0</span><span style="color:#BD93F9"> 2</span><span style="color:#FF79C6">px</span><span style="color:#8BE9FD"> var</span><span style="color:#F8F8F2">(--theme-color);</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Now, when you run <code>pnpm run dev</code> and open <code>http://localhost:5173</code>, you should see a basic chat app that does not yet send or receive messages.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="generate-your-module-types">Generate your module types<a href="#generate-your-module-types" class="hash-link" aria-label="Direct link to Generate your module types" title="Direct link to Generate your module types" translate="no">​</a></h2>
<p>The <code>spacetime</code> CLI&#x27;s <code>generate</code> command generates client-side interfaces for the tables, reducers, and types defined in your server module.</p>
<p>In your <code>quickstart-chat</code> directory, run:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">mkdir</span><span style="color:#BD93F9"> -p</span><span style="color:#F1FA8C"> client/src/module_bindings</span></span>
<span class="line"><span style="color:#50FA7B">spacetime</span><span style="color:#F1FA8C"> generate</span><span style="color:#BD93F9"> --lang</span><span style="color:#F1FA8C"> typescript</span><span style="color:#BD93F9"> --out-dir</span><span style="color:#F1FA8C"> client/src/module_bindings</span><span style="color:#BD93F9"> --project-path</span><span style="color:#F1FA8C"> server</span></span></code></pre>
<div class="theme-admonition theme-admonition-note admonition_scYj alert alert--secondary"><div class="admonitionHeading_zhQc"><span class="admonitionIcon_kfZz"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_O7JJ"><p>This command assumes you&#x27;ve already created a server module in <code>quickstart-chat/server</code>. If you haven&#x27;t completed one of the server module quickstart guides, you can follow either the <a href="/modules/rust/quickstart">Rust</a> or <a href="/modules/c-sharp/quickstart">C#</a> module quickstart to create one and then return here.</p></div></div>
<p>Take a look inside <code>client/src/module_bindings</code>. The CLI should have generated several files:</p>
<div class="language-text codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_p1l2"><pre tabindex="0" class="prism-code language-text codeBlock_qbrE thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="token-line" style="color:#bfc7d5"><span class="token plain">module_bindings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── identity_connected_reducer.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── identity_disconnected_reducer.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── index.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── init_reducer.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── message_table.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── message_type.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── send_message_reducer.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── set_name_reducer.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── user_table.ts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── user_type.ts</span><br></span></code></pre></div></div>
<p>With <code>spacetime generate</code> we have generated TypeScript types derived from the types you specified in your module, which we can conveniently use in our client. We&#x27;ve placed these in the <code>module_bindings</code> folder.
Now that we&#x27;ve set up our UI and generated our types, let&#x27;s connect to SpacetimeDB.</p>
<p>The main entry to the SpacetimeDB API is the <code>DbConnection</code>, a type that manages a connection to a remote database. Let&#x27;s import it and a few other types into our <code>client/src/main.tsx</code> below our other imports:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { StrictMode } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">react</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { createRoot } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">react-dom/client</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">./index.css</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> App </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">./App.tsx</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { Identity } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">spacetimedb</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { SpacetimeDBProvider } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">spacetimedb/react</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { DbConnection, ErrorContext } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">./module_bindings/index.ts</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">;</span></span></code></pre>
<p>Note that we are importing <code>DbConnection</code> from our <code>module_bindings</code> so that it has all the type information about our tables and types.</p>
<p>We&#x27;ve also imported the <code>SpacetimeDBProvider</code> React component which will allow us to connect our SpacetimeDB state directly to our React state seamlessly.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="create-your-spacetimedb-client">Create your SpacetimeDB client<a href="#create-your-spacetimedb-client" class="hash-link" aria-label="Direct link to Create your SpacetimeDB client" title="Direct link to Create your SpacetimeDB client" translate="no">​</a></h2>
<p>Now that we&#x27;ve imported the <code>DbConnection</code> type, we can use it to connect our app to our database.</p>
<p>Replace the body of the <code>main.tsx</code> file with the following, just below your imports:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#50FA7B"> onConnect</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">conn</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> DbConnection</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">identity</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Identity</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">token</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> string</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  localStorage.</span><span style="color:#50FA7B">setItem</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">auth_token</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, token);</span></span>
<span class="line"><span style="color:#F8F8F2">  console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E9F284">    &#x27;</span><span style="color:#F1FA8C">Connected to SpacetimeDB with identity:</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    identity.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  );</span></span>
<span class="line"><span style="color:#F8F8F2">  conn.reducers.</span><span style="color:#50FA7B">onSendMessage</span><span style="color:#F8F8F2">(() </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Message sent.</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#50FA7B"> onDisconnect</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Disconnected from SpacetimeDB</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#50FA7B"> onConnectError</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">_ctx</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> ErrorContext</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">err</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Error</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  console.</span><span style="color:#50FA7B">log</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">Error connecting to SpacetimeDB:</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, err);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> connectionBuilder </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> DbConnection.</span><span style="color:#50FA7B">builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">withUri</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">ws://localhost:3000</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">withModuleName</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">quickstart-chat</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">withToken</span><span style="color:#F8F8F2">(localStorage.</span><span style="color:#50FA7B">getItem</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">auth_token</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">||</span><span style="color:#BD93F9"> undefined</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">onConnect</span><span style="color:#F8F8F2">(onConnect)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">onDisconnect</span><span style="color:#F8F8F2">(onDisconnect)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">onConnectError</span><span style="color:#F8F8F2">(onConnectError);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B">createRoot</span><span style="color:#F8F8F2">(document.</span><span style="color:#50FA7B">getElementById</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">root</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">).</span><span style="color:#50FA7B">render</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">  &lt;</span><span style="color:#8BE9FD;font-style:italic">StrictMode</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">    &lt;</span><span style="color:#8BE9FD;font-style:italic">SpacetimeDBProvider</span><span style="color:#50FA7B;font-style:italic"> connectionBuilder</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{connectionBuilder}&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;</span><span style="color:#8BE9FD;font-style:italic">App</span><span style="color:#F8F8F2"> /&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">    &lt;/</span><span style="color:#8BE9FD;font-style:italic">SpacetimeDBProvider</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">  &lt;/</span><span style="color:#8BE9FD;font-style:italic">StrictMode</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code></pre>
<p>Here we are configuring our SpacetimeDB connection by specifying the server URI, database name, and a few callbacks including the <code>onConnect</code> callback. When <code>onConnect</code> is called after connecting, we store the connection state, our <code>Identity</code>, and our SpacetimeDB credentials in our React state. If there is an error connecting, we also print that error to the console.</p>
<p>We are also using <code>localStorage</code> to store our SpacetimeDB credentials. This way, we can reconnect to SpacetimeDB with the same <code>Identity</code> and token if we refresh the page. The first time we connect, we won&#x27;t have any credentials stored, so we pass <code>undefined</code> to the <code>withToken</code> method. This will cause SpacetimeDB to generate new credentials for us.</p>
<p>If you chose a different name for your database, replace <code>quickstart-chat</code> with that name, or republish your module as <code>quickstart-chat</code>.</p>
<p>Our React hooks will subscribe to the data in SpacetimeDB. When we subscribe, SpacetimeDB will run our subscription queries and store the result in a local &quot;client cache&quot;. This cache will be updated in real-time as the data in the table changes on the server.</p>
<p>We pass our connection configuration directly to the <code>SpacetimeDBProvider</code>, which will manage our connection to SpacetimeDB.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="accessing-the-data">Accessing the Data<a href="#accessing-the-data" class="hash-link" aria-label="Direct link to Accessing the Data" title="Direct link to Accessing the Data" translate="no">​</a></h3>
<p>Once SpacetimeDB is connected, we can easily access the data in the client cache using SpacetimeDB&#x27;s provided React hooks, <code>useTable</code> and <code>useSpacetimeDB</code>.</p>
<p><code>useTable</code> is the simplest way to access your database data. <code>useTable</code> subscribes your React app to data in a SpacetimeDB table so that it updates as the data changes. It essentially acts just like <code>useState</code> in React except the data is being updated in real-time from SpacetimeDB tables.</p>
<p><code>useSpacetimeDB</code> gives you direct access to the connection in case you want to check the state of the connection or access database table state. Note that <code>useSpacetimeDB</code> does not automatically subscribe your app to data in the database.</p>
<p>Add the following <code>useSpacetimeDB</code> hook to the top of your render function, just below your <code>useState</code> declarations.</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> conn </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useSpacetimeDB</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">DbConnection</span><span style="color:#F8F8F2">&gt;();</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { identity, isActive</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> connected } </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> conn;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Subscribe to all messages in the chat</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { rows</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> messages } </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useTable</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">DbConnection</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">Message</span><span style="color:#F8F8F2">&gt;(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">message</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">);</span></span></code></pre>
<p>Next replace <code>const onlineUsers: User[] = [];</code> with the following:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#6272A4">// Subscribe to all online users in the chat</span></span>
<span class="line"><span style="color:#6272A4">// so we can show who&#x27;s online and demonstrate</span></span>
<span class="line"><span style="color:#6272A4">// the `where` and `eq` query expressions</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { rows</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> onlineUsers } </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useTable</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">DbConnection</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">User</span><span style="color:#F8F8F2">&gt;(</span></span>
<span class="line"><span style="color:#E9F284">  &#x27;</span><span style="color:#F1FA8C">user</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#50FA7B">  where</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">eq</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">online</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code></pre>
<p>Notice that we can filter users in the <code>user</code> table based on their online status by passing a query expression into the <code>useTable</code> hook as the second argument.</p>
<p>Let&#x27;s now prettify our messages in our render function by sorting them by their <code>sent</code> timestamp, and joining the username of the sender to the message by looking up the user by their <code>Identity</code> in the <code>user</code> table. Replace <code>const prettyMessages: PrettyMessage[] = [];</code> with the following:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> prettyMessages</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> PrettyMessage</span><span style="color:#F8F8F2">[] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Array.</span><span style="color:#50FA7B">from</span><span style="color:#F8F8F2">(messages)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">sort</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">a</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> (a.sent.</span><span style="color:#50FA7B">toDate</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">&gt;</span><span style="color:#F8F8F2"> b.sent.</span><span style="color:#50FA7B">toDate</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">?</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6"> :</span><span style="color:#FF79C6"> -</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">message</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    const</span><span style="color:#F8F8F2"> user </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> users.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">      u</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> u.identity.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">===</span><span style="color:#F8F8F2"> message.sender.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      senderName</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> user?.name </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> message.sender.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">substring</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">8</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">      text</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> message.text,</span></span>
<span class="line"><span style="color:#F8F8F2">      sent</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> message.sent,</span></span>
<span class="line"><span style="color:#F8F8F2">      kind</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> Identity.</span><span style="color:#50FA7B">zero</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">isEqual</span><span style="color:#F8F8F2">(message.sender) </span><span style="color:#FF79C6">?</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">system</span><span style="color:#E9F284">&#x27;</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">user</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    };</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span></code></pre>
<p>That&#x27;s all we have to do to hook up our SpacetimeDB state to our React state. SpacetimeDB ensures that any changes on the server are pushed down to our application and rerendered on screen in real-time.</p>
<p>Let&#x27;s also update our render function to show a loading message while we&#x27;re connecting to SpacetimeDB. Add this just below our <code>prettyMessages</code> declaration:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">connected </span><span style="color:#FF79C6">||</span><span style="color:#FF79C6"> !</span><span style="color:#F8F8F2">identity) {</span></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">    &lt;</span><span style="color:#FF79C6">div</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">App</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">      &lt;</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;Connecting...&lt;/</span><span style="color:#FF79C6">h1</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">    &lt;/</span><span style="color:#FF79C6">div</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">  );</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Finally, let&#x27;s also compute the name of the user from the <code>Identity</code> in our <code>name</code> variable. Replace <code>const name = &#x27;&#x27;;</code> with the following:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> name </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (() </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> user </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> users.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">u</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> u.identity.</span><span style="color:#50FA7B">isEqual</span><span style="color:#F8F8F2">(identity));</span></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> user?.name </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> identity?.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">substring</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">8</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">||</span><span style="color:#E9F284"> &#x27;&#x27;</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">})();</span></span></code></pre>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="calling-reducers">Calling Reducers<a href="#calling-reducers" class="hash-link" aria-label="Direct link to Calling Reducers" title="Direct link to Calling Reducers" translate="no">​</a></h3>
<p>Let&#x27;s hook up our callbacks so we can send some messages and see them displayed in the app after they are synchronised by SpacetimeDB. We need to update the <code>onSubmitNewName</code> and <code>onSubmitMessage</code> callbacks to send the appropriate reducer to the module.</p>
<p>Modify the <code>onSubmitNewName</code> callback by adding a call to the <code>setName</code> reducer:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#50FA7B"> onSubmitNewName</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">e</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> React</span><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD;font-style:italic">FormEvent</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">HTMLFormElement</span><span style="color:#F8F8F2">&gt;) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  e.</span><span style="color:#50FA7B">preventDefault</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#50FA7B">  setSettingName</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">false</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  conn.reducers.</span><span style="color:#50FA7B">setName</span><span style="color:#F8F8F2">(newName);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span></code></pre>
<p>Next, modify the <code>onSubmitMessage</code> callback by adding a call to the <code>sendMessage</code> reducer:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#50FA7B"> onSubmitMessage</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">e</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> React</span><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD;font-style:italic">FormEvent</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">HTMLFormElement</span><span style="color:#F8F8F2">&gt;) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  e.</span><span style="color:#50FA7B">preventDefault</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#50FA7B">  setNewMessage</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;&#x27;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  conn.reducers.</span><span style="color:#50FA7B">sendMessage</span><span style="color:#F8F8F2">(newMessage);</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span></code></pre>
<p>SpacetimeDB generated these functions for us based on the type information provided by our module. Calling these functions will invoke our reducers in our module.</p>
<p>Let&#x27;s try out our app to see the result of these changes.</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#8BE9FD">cd</span><span style="color:#F1FA8C"> client</span></span>
<span class="line"><span style="color:#50FA7B">pnpm</span><span style="color:#F1FA8C"> run</span><span style="color:#F1FA8C"> dev</span></span></code></pre>
<div class="theme-admonition theme-admonition-warning admonition_scYj alert alert--warning"><div class="admonitionHeading_zhQc"><span class="admonitionIcon_kfZz"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_O7JJ"><p>Don&#x27;t forget! You may need to publish your server module if you haven&#x27;t yet.</p></div></div>
<p>Send some messages and update your username and watch it change in real-time. Note that when you update your username, it also updates immediately for all prior messages. This is because the messages store the user&#x27;s <code>Identity</code> directly, instead of their username, so we can retroactively apply their username to all prior messages.</p>
<p>Try opening a few incognito windows to see what it&#x27;s like with multiple users!</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="notify-about-new-users">Notify about new users<a href="#notify-about-new-users" class="hash-link" aria-label="Direct link to Notify about new users" title="Direct link to Notify about new users" translate="no">​</a></h3>
<p>We can also register <code>onInsert</code>, <code>onUpdate</code>, and <code>onDelete</code> callbacks to handle events, not just state. For example, we might want to show a notification any time a new user connects to the database.</p>
<p>Note that these callbacks can fire in two contexts:</p>
<ul>
<li>After a reducer runs, when the client&#x27;s cache is updated about changes to subscribed rows.</li>
<li>After calling <code>subscribe</code>, when the client&#x27;s cache is initialized with all existing matching rows.</li>
</ul>
<p>Our current <code>useTable</code> only filters online users, but we can print a system message anytime a user enters or leaves the room by subscribing to callbacks on the <code>onlineUsers</code> React hook.</p>
<p>Update your <code>onlineUsers</code> React hook to add the following callbacks:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#6272A4">// Subscribe to all online users in the chat</span></span>
<span class="line"><span style="color:#6272A4">// so we can show who&#x27;s online and demonstrate</span></span>
<span class="line"><span style="color:#6272A4">// the `where` and `eq` query expressions</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { rows</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> onlineUsers } </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useTable</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">DbConnection</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">User</span><span style="color:#F8F8F2">&gt;(</span></span>
<span class="line"><span style="color:#E9F284">  &#x27;</span><span style="color:#F1FA8C">user</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#50FA7B">  where</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">eq</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">online</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">)),</span></span>
<span class="line"><span style="color:#F8F8F2">  {</span></span>
<span class="line"><span style="color:#50FA7B">    onInsert</span><span style="color:#FF79C6">:</span><span style="color:#FFB86C;font-style:italic"> user</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">      // All users being inserted here are online</span></span>
<span class="line"><span style="color:#FF79C6">      const</span><span style="color:#F8F8F2"> name </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> user.name </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> user.identity.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">substring</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">8</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#50FA7B">      setSystemMessages</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">prev</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#FF79C6">        ...</span><span style="color:#F8F8F2">prev,</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#F8F8F2">          sender</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> Identity.</span><span style="color:#50FA7B">zero</span><span style="color:#F8F8F2">(),</span></span>
<span class="line"><span style="color:#F8F8F2">          text</span><span style="color:#FF79C6">:</span><span style="color:#F1FA8C"> `</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">name</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C"> has connected.`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">          sent</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> Timestamp.</span><span style="color:#50FA7B">now</span><span style="color:#F8F8F2">(),</span></span>
<span class="line"><span style="color:#F8F8F2">        },</span></span>
<span class="line"><span style="color:#F8F8F2">      ]);</span></span>
<span class="line"><span style="color:#F8F8F2">    },</span></span>
<span class="line"><span style="color:#50FA7B">    onDelete</span><span style="color:#FF79C6">:</span><span style="color:#FFB86C;font-style:italic"> user</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">      // All users being deleted here are offline</span></span>
<span class="line"><span style="color:#FF79C6">      const</span><span style="color:#F8F8F2"> name </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> user.name </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> user.identity.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">substring</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">8</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#50FA7B">      setSystemMessages</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">prev</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#FF79C6">        ...</span><span style="color:#F8F8F2">prev,</span></span>
<span class="line"><span style="color:#F8F8F2">        {</span></span>
<span class="line"><span style="color:#F8F8F2">          sender</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> Identity.</span><span style="color:#50FA7B">zero</span><span style="color:#F8F8F2">(),</span></span>
<span class="line"><span style="color:#F8F8F2">          text</span><span style="color:#FF79C6">:</span><span style="color:#F1FA8C"> `</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">name</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C"> has disconnected.`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">          sent</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> Timestamp.</span><span style="color:#50FA7B">now</span><span style="color:#F8F8F2">(),</span></span>
<span class="line"><span style="color:#F8F8F2">        },</span></span>
<span class="line"><span style="color:#F8F8F2">      ]);</span></span>
<span class="line"><span style="color:#F8F8F2">    },</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code></pre>
<p>These callbacks will be called any time the state of the <code>useTable</code> result changes to add or remove a row, while respecting your <code>where</code> filter.</p>
<p>Here, we post a system message indicating that a new user has connected if the user is being added to the <code>user</code> table and they&#x27;re online, or if an existing user&#x27;s online status is being updated to &quot;online&quot;.</p>
<p>Next, let&#x27;s add the system messages to our list of <code>Message</code>s so they can be interleaved with the chat messages. Modify <code>prettyMessages</code> to concat the <code>systemMessages</code> as well:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> prettyMessages</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> PrettyMessage</span><span style="color:#F8F8F2">[] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Array.</span><span style="color:#50FA7B">from</span><span style="color:#F8F8F2">(messages)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">concat</span><span style="color:#F8F8F2">(systemMessages)</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">sort</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">a</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=&gt;</span><span style="color:#F8F8F2"> (a.sent.</span><span style="color:#50FA7B">toDate</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">&gt;</span><span style="color:#F8F8F2"> b.sent.</span><span style="color:#50FA7B">toDate</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">?</span><span style="color:#BD93F9"> 1</span><span style="color:#FF79C6"> :</span><span style="color:#FF79C6"> -</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">message</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    const</span><span style="color:#F8F8F2"> user </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> users.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">      u</span><span style="color:#FF79C6"> =&gt;</span><span style="color:#F8F8F2"> u.identity.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">===</span><span style="color:#F8F8F2"> message.sender.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      senderName</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> user?.name </span><span style="color:#FF79C6">||</span><span style="color:#F8F8F2"> message.sender.</span><span style="color:#50FA7B">toHexString</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">substring</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">8</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">      text</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> message.text,</span></span>
<span class="line"><span style="color:#F8F8F2">      sent</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> message.sent,</span></span>
<span class="line"><span style="color:#F8F8F2">      kind</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> Identity.</span><span style="color:#50FA7B">zero</span><span style="color:#F8F8F2">().</span><span style="color:#50FA7B">isEqual</span><span style="color:#F8F8F2">(message.sender) </span><span style="color:#FF79C6">?</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">system</span><span style="color:#E9F284">&#x27;</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> &#x27;</span><span style="color:#F1FA8C">user</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    };</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span></code></pre>
<p>Finally, let&#x27;s also subscribe to offline users so we can show them in the sidebar as well. Replace <code>const offlineUsers: User[] = [];</code> with:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { rows</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> offlineUsers } </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> useTable</span><span style="color:#F8F8F2">&lt;</span><span style="color:#FFB86C;font-style:italic">DbConnection</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">User</span><span style="color:#F8F8F2">&gt;(</span></span>
<span class="line"><span style="color:#E9F284">  &#x27;</span><span style="color:#F1FA8C">user</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#50FA7B">  where</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">eq</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&#x27;</span><span style="color:#F1FA8C">online</span><span style="color:#E9F284">&#x27;</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">false</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code></pre>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">​</a></h2>
<p>Congratulations! You&#x27;ve built a simple chat app with SpacetimeDB. You can find the full source code for the client we&#x27;ve created in this quickstart tutorial <a href="https://github.com/clockworklabs/SpacetimeDB/tree/master/crates/bindings-typescript/examples/quickstart-chat" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>At this point you&#x27;ve learned how to create a basic TypeScript client for your SpacetimeDB <code>quickstart-chat</code> module. You&#x27;ve learned how to connect to SpacetimeDB and call reducers to update data. You&#x27;ve learned how to subscribe to table data, and hook it up so that it updates reactively in a React application.</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="whats-next">What&#x27;s next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s next?" title="Direct link to What&#x27;s next?" translate="no">​</a></h2>
<p>We covered a lot here, but we haven&#x27;t covered everything. Take a look at our <a href="/sdks/typescript">reference documentation</a> to find out how you can use SpacetimeDB in more advanced ways, including managing reducer errors and subscribing to reducer events.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sdks/rust"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Rust Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sdks/typescript"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TypeScript Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Ea_L thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-structure" class="table-of-contents__link toc-highlight">Project structure</a></li><li><a href="#basic-layout" class="table-of-contents__link toc-highlight">Basic layout</a></li><li><a href="#generate-your-module-types" class="table-of-contents__link toc-highlight">Generate your module types</a></li><li><a href="#create-your-spacetimedb-client" class="table-of-contents__link toc-highlight">Create your SpacetimeDB client</a><ul><li><a href="#accessing-the-data" class="table-of-contents__link toc-highlight">Accessing the Data</a></li><li><a href="#calling-reducers" class="table-of-contents__link toc-highlight">Calling Reducers</a></li><li><a href="#notify-about-new-users" class="table-of-contents__link toc-highlight">Notify about new users</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s next?</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"></div></footer></div>
</body>
</html>