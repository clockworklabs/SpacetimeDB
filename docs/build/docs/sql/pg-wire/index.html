<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-SQL/PG-Wire" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">PostgreSQL Wire Protocol (PGWire) | SpacetimeDB docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.spacetimedb.com/docs/sql/pg-wire"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="PostgreSQL Wire Protocol (PGWire) | SpacetimeDB docs"><meta data-rh="true" name="description" content="SpacetimeDB supports the PostgreSQL wire protocol (["><meta data-rh="true" property="og:description" content="SpacetimeDB supports the PostgreSQL wire protocol (["><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.spacetimedb.com/docs/sql/pg-wire"><link data-rh="true" rel="alternate" href="https://docs.spacetimedb.com/docs/sql/pg-wire" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.spacetimedb.com/docs/sql/pg-wire" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QBC7Z9KXS2-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"PostgreSQL Wire Protocol (PGWire)","item":"https://docs.spacetimedb.com/docs/sql/pg-wire"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="SpacetimeDB docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.0cb9f7a7.css">
<script src="/assets/js/runtime~main.d71df0f5.js" defer="defer"></script>
<script src="/assets/js/main.31d95d83.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="https://spacetimedb.com/images/brand.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_6jFv" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://spacetimedb.com/images/brand.png" alt="SpacetimeDB Logo" class="themedComponent_rvet themedComponent--light_mbAJ"><img src="https://spacetimedb.com/images/brand.png" alt="SpacetimeDB Logo" class="themedComponent_rvet themedComponent--dark_Ncy6"></div></a><div class="navbarSearchContainer_AesG"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://spacetimedb.com/install" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Install</a><a href="https://spacetimedb.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://spacetimedb.com/maincloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Maincloud</a><a href="https://spacetimedb.com/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://spacetimedb.com/community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_hV_y"><div class="docsWrapper_f07g"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_MJiz" type="button"></button><div class="docRoot_Gd2s"><aside class="theme-doc-sidebar-container docSidebarContainer_fSpF"><div class="sidebarViewport_YElg"><div class="sidebar_kjg4"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_AG0n"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/"><span title="Intro" class="categoryLinkLabel_EDYQ">Intro</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/deploying/maincloud"><span title="Deploying" class="categoryLinkLabel_EDYQ">Deploying</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/unity"><span title="Unity tutorial" class="categoryLinkLabel_EDYQ">Unity tutorial</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/unreal"><span title="Unreal Tutorial" class="categoryLinkLabel_EDYQ">Unreal Tutorial</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cli-reference"><span title="CLI Reference" class="categoryLinkLabel_EDYQ">CLI Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/modules"><span title="Server Module Languages" class="categoryLinkLabel_EDYQ">Server Module Languages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/sdks"><span title="Client SDK Languages" class="categoryLinkLabel_EDYQ">Client SDK Languages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/sql"><span title="SQL" class="categoryLinkLabel_EDYQ">SQL</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sql"><span title="SQL Reference" class="linkLabel_dpMB">SQL Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/sql/pg-wire"><span title="PostgreSQL Wire Protocol (PGWire)" class="linkLabel_dpMB">PostgreSQL Wire Protocol (PGWire)</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/subscriptions"><span title="Subscriptions" class="categoryLinkLabel_EDYQ">Subscriptions</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rls"><span title="Row Level Security" class="linkLabel_dpMB">Row Level Security</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/how-to/incremental-migrations"><span title="How-To" class="categoryLinkLabel_EDYQ">How-To</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/spacetimeauth"><span title="SpacetimeAuth" class="categoryLinkLabel_EDYQ">SpacetimeAuth</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/http/authorization"><span title="HTTP API" class="categoryLinkLabel_EDYQ">HTTP API</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ggI5 menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/webassembly-abi"><span title="Internals" class="categoryLinkLabel_EDYQ">Internals</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/appendix"><span title="Appendix" class="linkLabel_dpMB">Appendix</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_dkUT"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_w2oE"><div class="docItemContainer_f71m"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_xsLZ" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_oyay"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SQL</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">PostgreSQL Wire Protocol (PGWire)</span></li></ul></nav><div class="tocCollapsible_dqme theme-doc-toc-mobile tocMobile_Z34P"><button type="button" class="clean-btn tocCollapsibleButton_QMSE">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>PostgreSQL Wire Protocol (PGWire) Compatibility</h1></header>
<p><em>SpacetimeDB</em> supports the <a href="https://www.postgresql.org/docs/current/protocol.html" target="_blank" rel="noopener noreferrer">PostgreSQL wire protocol (</a><a href="https://www.postgresql.org/docs/current/protocol.html" target="_blank" rel="noopener noreferrer">
<em>PGWire</em></a><a href="https://www.postgresql.org/docs/current/protocol.html" target="_blank" rel="noopener noreferrer">)</a>,
enabling compatibility with PostgreSQL clients and tools.</p>
<p>The PostgreSQL wire protocol is a network protocol used by PostgreSQL clients to communicate with compatible servers. It
defines how messages are formatted and exchanged between client and server. The protocol is agnostic to the query
dialect,
meaning it can be used with different SQL engines and feature sets, in concrete, <em>SpacetimeDB</em>.</p>
<p>This allows users to leverage the existing PostgreSQL ecosystem, including drivers, ORMs, IDEs, CLI tools, and GUI
clients that support PostgreSQL.</p>
<p>When using <em>PGWire</em> with <em>SpacetimeDB</em>, consider the following:</p>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="feature-support">Feature Support<a href="#feature-support" class="hash-link" aria-label="Direct link to Feature Support" title="Direct link to Feature Support" translate="no">​</a></h2>
<p>SpacetimeDB is progressively adding PostgreSQL client compatibility. Some features are unsupported, partially
implemented, or behave differently:</p>
<ul>
<li><strong>Protocol Version</strong>: Only <em>PGWire</em> protocol <em>version 3.0</em> is supported, and only the <em>Simple Query Protocol</em>, and
without parameterized queries.</li>
<li><strong>SQL Features</strong>: Only the subset of SQL features documented in the <a href="/sql">SQL documentation</a> are
supported. Subscription queries do not update in real time.</li>
<li><strong>Authentication</strong>: SpacetimeDB does not implement database users or roles. The connection string
<code>user_name@database_name</code> ignores <code>user_name</code>; only <code>database_name</code> is used. Authentication is based on the <em>auth
token</em>
provided via the <code>password</code> field.</li>
<li><strong>SSL/TLS</strong>: SSL is supported only for <code>SpacetimeDB Cloud</code> deployments (without mutual TLS). Other deployments (such
as <code>SpacetimeDB Standalone</code>) do not support SSL/TLS connections.</li>
<li><strong>System Tables and Views</strong>: SpacetimeDB provides its own system tables (e.g., <code>SELECT * FROM st_table</code>) for
introspection. These are not PostgreSQL-compatible, so tools relying on PostgreSQL system catalogs will not work.</li>
<li><strong>Port and Host</strong>:<!-- -->
<ul>
<li>In <code>SpacetimeDB Standalone</code> deployments, specify the port with <code>spacetime start --pg-port &lt;port&gt;</code>. Without this
flag, connections using the PostgreSQL protocol are not enabled.</li>
<li>In <code>SpacetimeDB Cloud</code> deployments, the port is always <code>5432</code>.</li>
</ul>
</li>
<li><strong>Transactions</strong>: User-defined transactions (<code>BEGIN TRANSACTION</code>, <code>COMMIT</code>, etc.) are not supported. Each SQL
statement executes in its own transaction context. Client libraries should disable automatic transaction handling.</li>
<li><strong>Special Data Types</strong>: Some SpacetimeDB data types map to PostgreSQL types as:<!-- -->
<ul>
<li>Simple enums are displayed as <code>Enum</code>.</li>
<li>Algebraic Data Types (ADTs) &amp; records are displayed as <code>JSON</code>.</li>
<li><code>Duration</code> is displayed as <code>Interval</code>.</li>
<li><code>Identity</code>, <code>ConnectionId</code>, <code>U8</code>, <code>[U8]</code>, <code>Bytes</code> &amp; <code>Hex</code> is displayed as <code>Bytea</code>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="connection-parameters">Connection Parameters<a href="#connection-parameters" class="hash-link" aria-label="Direct link to Connection Parameters" title="Direct link to Connection Parameters" translate="no">​</a></h2>
<p>To connect to SpacetimeDB using a PostgreSQL client, use the following parameters:</p>
<ul>
<li><strong>Host</strong>:<!-- -->
<ul>
<li><code>localhost</code> for <code>SpacetimeDB Standalone</code> deployments</li>
<li><code>maincloud.spacetimedb.com</code> for <code>SpacetimeDB Cloud</code> deployments</li>
</ul>
</li>
<li><strong>Port</strong>:<!-- -->
<ul>
<li><code>5432</code> for <code>SpacetimeDB Cloud</code></li>
<li>The value passed with <code>--pg-port</code> for <code>SpacetimeDB Standalone</code></li>
</ul>
</li>
<li><strong>Database</strong>: The target SpacetimeDB database</li>
<li><strong>User</strong>: Any string (ignored by SpacetimeDB)</li>
<li><strong>Password</strong>: The <code>auth token</code></li>
<li><strong>SSL Mode</strong>: <code>require</code> (only for <code>SpacetimeDB Cloud</code>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="auth-token">Auth Token<a href="#auth-token" class="hash-link" aria-label="Direct link to Auth Token" title="Direct link to Auth Token" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_scYj alert alert--warning"><div class="admonitionHeading_zhQc"><span class="admonitionIcon_kfZz"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_O7JJ"><p>The <code>auth token</code> is sensitive. Do not expose it in logs, version control, or insecure locations.</p></div></div>
<p>SpacetimeDB uses the <code>password</code> field to pass the <code>auth token</code>. Obtain the token with:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">spacetime</span><span style="color:#F1FA8C"> login</span><span style="color:#F1FA8C"> show</span><span style="color:#BD93F9"> --token</span></span></code></pre>
<p>To export the token to <code>PGPASSWORD</code>:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#6272A4"># token.py</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> sys, re</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">text </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> sys.stdin.read()</span></span>
<span class="line"><span style="color:#F8F8F2">match </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> re.search(</span><span style="color:#FF79C6">r</span><span style="color:#FF5555">&quot;</span><span style="color:#F1FA8C">Your auth token </span><span style="color:#FF79C6">\(</span><span style="color:#F1FA8C">don&#x27;t share this!</span><span style="color:#FF79C6">\)</span><span style="color:#F1FA8C"> is</span><span style="color:#8BE9FD;font-style:italic">\s</span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2;font-style:italic">(</span><span style="color:#8BE9FD;font-style:italic">\S</span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2;font-style:italic">)</span><span style="color:#FF5555">&quot;</span><span style="color:#F8F8F2">, text)</span></span>
<span class="line"><span style="color:#FF79C6">if</span><span style="color:#FF79C6"> not</span><span style="color:#F8F8F2"> match:</span></span>
<span class="line"><span style="color:#F8F8F2">    sys.exit(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">No token found</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">print</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">f</span><span style="color:#F1FA8C">&quot;export PGPASSWORD=</span><span style="color:#BD93F9">{</span><span style="color:#F8F8F2">match.group(</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">)</span><span style="color:#BD93F9">}</span><span style="color:#F1FA8C">&quot;</span><span style="color:#F8F8F2">)</span></span></code></pre>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#8BE9FD">eval</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">$(</span><span style="color:#50FA7B">spacetime</span><span style="color:#F1FA8C"> login show </span><span style="color:#BD93F9">--token</span><span style="color:#FF79C6"> |</span><span style="color:#50FA7B"> python3</span><span style="color:#F1FA8C"> ~/token.py)</span><span style="color:#E9F284">&quot;</span></span></code></pre>
<h2 class="anchor anchorWithStickyNavbar_wKCU" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" translate="no">​</a></h2>
<p>In the following example, we assume you are using the <code>quickstart-chat</code> database created in
the <a href="/modules/rust/quickstart">Rust Module Quickstart</a> or <a href="/modules/c-sharp/quickstart">C# Module Quickstart</a>,
and have set the <code>auth token</code> as shown above.</p>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="using-psql">Using <code>psql</code><a href="#using-psql" class="hash-link" aria-label="Direct link to using-psql" title="Direct link to using-psql" translate="no">​</a></h3>
<p>SpacetimeDB Standalone deployment:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">psql</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">host=localhost port=5432 user=any dbname=quickstart-chat</span><span style="color:#E9F284">&quot;</span></span></code></pre>
<p>SpacetimeDB Cloud deployment:</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#50FA7B">psql</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">host=maincloud.spacetimedb.com port=5432 user=any dbname=quickstart-chat sslmode=require</span><span style="color:#E9F284">&quot;</span></span></code></pre>
<div class="theme-admonition theme-admonition-note admonition_scYj alert alert--secondary"><div class="admonitionHeading_zhQc"><span class="admonitionIcon_kfZz"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_O7JJ"><p>Introspection commands such as <code>\dt</code> will not work, as SpacetimeDB does not support PostgreSQL schemas.</p></div></div>
<p>Now for example:</p>
<div class="language-psql codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_p1l2"><pre tabindex="0" class="prism-code language-psql codeBlock_qbrE thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="token-line" style="color:#bfc7d5"><span class="token plain">quickstart=&gt; select * from message;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               sender                               |               sent               | text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--------------------------------------------------------------------+----------------------------------+-------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> \xc200da2d6ddb6c0beef0bbaafacffe5f0649c86b8d19411e3219066a6d0e5123 | 2025-09-29T22:29:14.271647+00:00 | hello</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(1 row)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">quickstart=&gt; update message set text = &#x27;world&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">updated: 1, server: 1.72ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">quickstart=&gt; select text from message;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(1 row)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="using-python-psycopg2">Using Python (<code>psycopg2</code>)<a href="#using-python-psycopg2" class="hash-link" aria-label="Direct link to using-python-psycopg2" title="Direct link to using-python-psycopg2" translate="no">​</a></h3>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> psycopg2</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">conn </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> psycopg2.connect(</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">    host</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">localhost</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,  </span><span style="color:#6272A4"># or &quot;maincloud.spacetimedb.com&quot; for SpacetimeDB Cloud</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">    port</span><span style="color:#FF79C6">=</span><span style="color:#BD93F9">5432</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">    dbname</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">quickstart-chat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">    user</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">any</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">    password</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">os.getenv(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">PGPASSWORD</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#FFB86C;font-style:italic">    sslmode</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">disable</span><span style="color:#E9F284">&quot;</span><span style="color:#6272A4">  # use &quot;require&quot; for SpacetimeDB Cloud</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">conn.set_session(</span><span style="color:#FFB86C;font-style:italic">autocommit</span><span style="color:#FF79C6">=</span><span style="color:#BD93F9">True</span><span style="color:#F8F8F2">)  </span><span style="color:#6272A4"># disable transactions</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">print</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Running query:</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">with</span><span style="color:#F8F8F2"> conn.cursor() </span><span style="color:#FF79C6">as</span><span style="color:#F8F8F2"> cur:</span></span>
<span class="line"><span style="color:#F8F8F2">    cur.execute(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">SELECT * FROM message;</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">    for</span><span style="color:#F8F8F2"> row </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> cur.fetchall():</span></span>
<span class="line"><span style="color:#8BE9FD">        print</span><span style="color:#F8F8F2">(row)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">conn.close()</span></span>
<span class="line"><span style="color:#8BE9FD">print</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Done.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span></code></pre>
<h3 class="anchor anchorWithStickyNavbar_wKCU" id="using-rust-tokio-postgres--rustls">Using Rust (<code>tokio-postgres</code> + <code>rustls</code>)<a href="#using-rust-tokio-postgres--rustls" class="hash-link" aria-label="Direct link to using-rust-tokio-postgres--rustls" title="Direct link to using-rust-tokio-postgres--rustls" translate="no">​</a></h3>
<p>We use the <code>tokio-postgres-rustls</code> because is stricter, so we can show how disables certificate verification.</p>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#6272A4"># Cargo.toml</span></span>
<span class="line"><span style="color:#FF79C6">[</span><span style="color:#8BE9FD">dependencies</span><span style="color:#FF79C6">]</span></span>
<span class="line"><span style="color:#8BE9FD">anyhow</span><span style="color:#FF79C6"> =</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">1.0.71</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#8BE9FD">tokio-postgres</span><span style="color:#FF79C6"> =</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">0.7.14</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#8BE9FD">tokio-postgres-rustls</span><span style="color:#FF79C6"> =</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">0.13.0</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#8BE9FD">tokio</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> { </span><span style="color:#8BE9FD">version</span><span style="color:#FF79C6"> =</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">1.47.1</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">features</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> [</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">full</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">] }</span></span>
<span class="line"><span style="color:#8BE9FD">rustls</span><span style="color:#FF79C6"> =</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">0.23.32</span><span style="color:#E9F284">&quot;</span></span></code></pre>
<pre tabindex="0" class="codeBlockStandalone_pMzE thin-scrollbar codeBlockContainer_HZVP theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_ckKi"><span class="line"><span style="color:#6272A4">// main.rs</span></span>
<span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">env;</span></span>
<span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">sync</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Arc</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> rustls</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">client</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">danger</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">{</span><span style="color:#8BE9FD;font-style:italic">ServerCertVerified</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">ServerCertVerifier</span><span style="color:#F8F8F2">};</span></span>
<span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> rustls</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">pki_types</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">{</span><span style="color:#8BE9FD;font-style:italic">CertificateDer</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">ServerName</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">UnixTime</span><span style="color:#F8F8F2">};</span></span>
<span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> rustls</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">{</span><span style="color:#8BE9FD;font-style:italic">ClientConfig</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">RootCertStore</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">SignatureScheme</span><span style="color:#F8F8F2">};</span></span>
<span class="line"><span style="color:#FF79C6">use</span><span style="color:#F8F8F2"> tokio_postgres_rustls</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">MakeRustlsConnect</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">#[derive(</span><span style="color:#8BE9FD;font-style:italic">Debug</span><span style="color:#F8F8F2">)]</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> NoVerifier</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">impl</span><span style="color:#8BE9FD;font-style:italic"> ServerCertVerifier</span><span style="color:#FF79C6"> for</span><span style="color:#8BE9FD;font-style:italic"> NoVerifier</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> verify_server_cert</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FF79C6">        &amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#8BE9FD;font-style:italic">CertificateDer</span><span style="color:#F8F8F2">&lt;&#x27;</span><span style="color:#8BE9FD;font-style:italic">_</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">CertificateDer</span><span style="color:#F8F8F2">&lt;&#x27;</span><span style="color:#8BE9FD;font-style:italic">_</span><span style="color:#F8F8F2">&gt;],</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#8BE9FD;font-style:italic">ServerName</span><span style="color:#F8F8F2">&lt;&#x27;</span><span style="color:#8BE9FD;font-style:italic">_</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">u8</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> UnixTime</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">ServerCertVerified</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt; {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        Ok</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">ServerCertVerified</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">assertion</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> verify_tls12_signature</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FF79C6">        &amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">u8</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#8BE9FD;font-style:italic">CertificateDer</span><span style="color:#F8F8F2">&lt;&#x27;</span><span style="color:#8BE9FD;font-style:italic">_</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#F8F8F2">rustls</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DigitallySignedStruct</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;rustls</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">client</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">danger</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">HandshakeSignatureValid</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt; {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        Ok</span><span style="color:#F8F8F2">(rustls</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">client</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">danger</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">HandshakeSignatureValid</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">assertion</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> verify_tls13_signature</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#FF79C6">        &amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#F8F8F2">[</span><span style="color:#8BE9FD;font-style:italic">u8</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#8BE9FD;font-style:italic">CertificateDer</span><span style="color:#F8F8F2">&lt;&#x27;</span><span style="color:#8BE9FD;font-style:italic">_</span><span style="color:#F8F8F2">&gt;,</span></span>
<span class="line"><span style="color:#F8F8F2">        _</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6"> &amp;</span><span style="color:#F8F8F2">rustls</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">DigitallySignedStruct</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;rustls</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">client</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">danger</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">HandshakeSignatureValid</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt; {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">        Ok</span><span style="color:#F8F8F2">(rustls</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">client</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">danger</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">HandshakeSignatureValid</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">assertion</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    fn</span><span style="color:#50FA7B"> supported_verify_schemes</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&amp;</span><span style="color:#BD93F9;font-style:italic">self</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Vec</span><span style="color:#F8F8F2">&lt;</span><span style="color:#8BE9FD;font-style:italic">SignatureScheme</span><span style="color:#F8F8F2">&gt; {</span></span>
<span class="line"><span style="color:#50FA7B">        vec!</span><span style="color:#F8F8F2">[</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            SignatureScheme</span><span style="color:#FF79C6">::</span><span style="color:#BD93F9">ECDSA_NISTP384_SHA384</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            SignatureScheme</span><span style="color:#FF79C6">::</span><span style="color:#BD93F9">ECDSA_NISTP256_SHA256</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            SignatureScheme</span><span style="color:#FF79C6">::</span><span style="color:#BD93F9">RSA_PSS_SHA512</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            SignatureScheme</span><span style="color:#FF79C6">::</span><span style="color:#BD93F9">RSA_PSS_SHA384</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            SignatureScheme</span><span style="color:#FF79C6">::</span><span style="color:#BD93F9">RSA_PSS_SHA256</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">            SignatureScheme</span><span style="color:#FF79C6">::</span><span style="color:#BD93F9">ED25519</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">        ]</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">#[tokio</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">main]</span></span>
<span class="line"><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> fn</span><span style="color:#50FA7B"> main</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">-&gt;</span><span style="color:#8BE9FD;font-style:italic"> Result</span><span style="color:#F8F8F2">&lt;(), anyhow</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">&gt; {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> password </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> env</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">var</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;PGPASSWORD&quot;</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">expect</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;PGPASSWORD not set&quot;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#FF79C6"> mut</span><span style="color:#F8F8F2"> config </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD;font-style:italic"> ClientConfig</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">builder</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">with_root_certificates</span><span style="color:#F8F8F2">(RootCertStore</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">empty</span><span style="color:#F8F8F2">())</span></span>
<span class="line"><span style="color:#FF79C6">        .</span><span style="color:#50FA7B">with_no_client_auth</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">    config</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">dangerous</span><span style="color:#F8F8F2">()</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">set_certificate_verifier</span><span style="color:#F8F8F2">(Arc</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">new</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">NoVerifier</span><span style="color:#F8F8F2">));</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> connector </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD;font-style:italic"> MakeRustlsConnect</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">new</span><span style="color:#F8F8F2">(config);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> (client, connection) </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> tokio_postgres</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">connect</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#6272A4">        // Note: use &quot;maincloud.spacetimedb.com&quot; and sslmode=require for SpacetimeDB Cloud</span></span>
<span class="line"><span style="color:#FF79C6">        &amp;</span><span style="color:#50FA7B">format!</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F1FA8C">            &quot;host=localhost port=5432 user=any sslmode=disable dbname=quickstart-chat password={password}&quot;</span></span>
<span class="line"><span style="color:#F8F8F2">        ),</span></span>
<span class="line"><span style="color:#F8F8F2">        connector,</span></span>
<span class="line"><span style="color:#F8F8F2">    )</span><span style="color:#FF79C6">.await?</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">    tokio</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">spawn</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> move</span><span style="color:#F8F8F2"> { connection</span><span style="color:#FF79C6">.await.</span><span style="color:#50FA7B">expect</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;connection error&quot;</span><span style="color:#F8F8F2">) });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B">    println!</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;Running query:&quot;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> rows </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> client</span><span style="color:#FF79C6">.</span><span style="color:#50FA7B">simple_query</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;SELECT * FROM message;&quot;</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">.await?</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">    for</span><span style="color:#F8F8F2"> row </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> rows {</span></span>
<span class="line"><span style="color:#50FA7B">        println!</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;Row: {:?}&quot;</span><span style="color:#F8F8F2">, row);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#50FA7B">    println!</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">&quot;Done.&quot;</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">    Ok</span><span style="color:#F8F8F2">(())</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sql"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SQL Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/subscriptions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Subscription Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Ea_L thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#feature-support" class="table-of-contents__link toc-highlight">Feature Support</a></li><li><a href="#connection-parameters" class="table-of-contents__link toc-highlight">Connection Parameters</a><ul><li><a href="#auth-token" class="table-of-contents__link toc-highlight">Auth Token</a></li></ul></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#using-psql" class="table-of-contents__link toc-highlight">Using <code>psql</code></a></li><li><a href="#using-python-psycopg2" class="table-of-contents__link toc-highlight">Using Python (<code>psycopg2</code>)</a></li><li><a href="#using-rust-tokio-postgres--rustls" class="table-of-contents__link toc-highlight">Using Rust (<code>tokio-postgres</code> + <code>rustls</code>)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"></div></footer></div>
</body>
</html>