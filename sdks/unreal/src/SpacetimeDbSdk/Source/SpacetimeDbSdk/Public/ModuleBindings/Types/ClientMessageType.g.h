// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN YOUR MODULE SOURCE CODE INSTEAD.

#pragma once
#include "CoreMinimal.h"
#include "BSATN/UESpacetimeDB.h"
#include "ModuleBindings/Types/UnsubscribeType.g.h"
#include "ModuleBindings/Types/CallReducerType.g.h"
#include "ModuleBindings/Types/CallProcedureType.g.h"
#include "ModuleBindings/Types/SubscribeType.g.h"
#include "Kismet/BlueprintFunctionLibrary.h"
#include "ModuleBindings/Types/OneOffQueryType.g.h"
#include "ClientMessageType.g.generated.h"

UENUM(BlueprintType)
enum class EClientMessageTag : uint8
{
    Subscribe,
    Unsubscribe,
    OneOffQuery,
    CallReducer,
    CallProcedure
};

USTRUCT(BlueprintType)
struct SPACETIMEDBSDK_API FClientMessageType
{
    GENERATED_BODY()

public:
    FClientMessageType() = default;

    TVariant<FCallProcedureType, FOneOffQueryType, FSubscribeType, FUnsubscribeType, FCallReducerType> MessageData;

    UPROPERTY(BlueprintReadOnly)
    EClientMessageTag Tag = static_cast<EClientMessageTag>(0);

    static FClientMessageType Subscribe(const FSubscribeType& Value)
    {
        FClientMessageType Obj;
        Obj.Tag = EClientMessageTag::Subscribe;
        Obj.MessageData.Set<FSubscribeType>(Value);
        return Obj;
    }

    static FClientMessageType Unsubscribe(const FUnsubscribeType& Value)
    {
        FClientMessageType Obj;
        Obj.Tag = EClientMessageTag::Unsubscribe;
        Obj.MessageData.Set<FUnsubscribeType>(Value);
        return Obj;
    }

    static FClientMessageType OneOffQuery(const FOneOffQueryType& Value)
    {
        FClientMessageType Obj;
        Obj.Tag = EClientMessageTag::OneOffQuery;
        Obj.MessageData.Set<FOneOffQueryType>(Value);
        return Obj;
    }

    static FClientMessageType CallReducer(const FCallReducerType& Value)
    {
        FClientMessageType Obj;
        Obj.Tag = EClientMessageTag::CallReducer;
        Obj.MessageData.Set<FCallReducerType>(Value);
        return Obj;
    }

    static FClientMessageType CallProcedure(const FCallProcedureType& Value)
    {
        FClientMessageType Obj;
        Obj.Tag = EClientMessageTag::CallProcedure;
        Obj.MessageData.Set<FCallProcedureType>(Value);
        return Obj;
    }

    FORCEINLINE bool IsSubscribe() const { return Tag == EClientMessageTag::Subscribe; }

    FORCEINLINE FSubscribeType GetAsSubscribe() const
    {
        ensureMsgf(IsSubscribe(), TEXT("MessageData does not hold Subscribe!"));
        return MessageData.Get<FSubscribeType>();
    }

    FORCEINLINE bool IsUnsubscribe() const { return Tag == EClientMessageTag::Unsubscribe; }

    FORCEINLINE FUnsubscribeType GetAsUnsubscribe() const
    {
        ensureMsgf(IsUnsubscribe(), TEXT("MessageData does not hold Unsubscribe!"));
        return MessageData.Get<FUnsubscribeType>();
    }

    FORCEINLINE bool IsOneOffQuery() const { return Tag == EClientMessageTag::OneOffQuery; }

    FORCEINLINE FOneOffQueryType GetAsOneOffQuery() const
    {
        ensureMsgf(IsOneOffQuery(), TEXT("MessageData does not hold OneOffQuery!"));
        return MessageData.Get<FOneOffQueryType>();
    }

    FORCEINLINE bool IsCallReducer() const { return Tag == EClientMessageTag::CallReducer; }

    FORCEINLINE FCallReducerType GetAsCallReducer() const
    {
        ensureMsgf(IsCallReducer(), TEXT("MessageData does not hold CallReducer!"));
        return MessageData.Get<FCallReducerType>();
    }

    FORCEINLINE bool IsCallProcedure() const { return Tag == EClientMessageTag::CallProcedure; }

    FORCEINLINE FCallProcedureType GetAsCallProcedure() const
    {
        ensureMsgf(IsCallProcedure(), TEXT("MessageData does not hold CallProcedure!"));
        return MessageData.Get<FCallProcedureType>();
    }

    // Inline equality operators
    FORCEINLINE bool operator==(const FClientMessageType& Other) const
    {
        if (Tag != Other.Tag) return false;

        switch (Tag)
        {
            case EClientMessageTag::Subscribe:
                return GetAsSubscribe() == Other.GetAsSubscribe();
            case EClientMessageTag::Unsubscribe:
                return GetAsUnsubscribe() == Other.GetAsUnsubscribe();
            case EClientMessageTag::OneOffQuery:
                return GetAsOneOffQuery() == Other.GetAsOneOffQuery();
            case EClientMessageTag::CallReducer:
                return GetAsCallReducer() == Other.GetAsCallReducer();
            case EClientMessageTag::CallProcedure:
                return GetAsCallProcedure() == Other.GetAsCallProcedure();
            default:
                return false;
        }
    }

    FORCEINLINE bool operator!=(const FClientMessageType& Other) const
    {
        return !(*this == Other);
    }
};

/**
 * Custom hash function for FClientMessageType.
 * Combines the hashes of all fields that are compared in operator==.
 * @param ClientMessageType The FClientMessageType instance to hash.
 * @return The combined hash value.
 */
FORCEINLINE uint32 GetTypeHash(const FClientMessageType& ClientMessage)
{
    const uint32 TagHash = GetTypeHash(static_cast<uint8>(ClientMessage.Tag));
    switch (ClientMessage.Tag)
    {
        case EClientMessageTag::Subscribe: return HashCombine(TagHash, ::GetTypeHash(ClientMessage.GetAsSubscribe()));
        case EClientMessageTag::Unsubscribe: return HashCombine(TagHash, ::GetTypeHash(ClientMessage.GetAsUnsubscribe()));
        case EClientMessageTag::OneOffQuery: return HashCombine(TagHash, ::GetTypeHash(ClientMessage.GetAsOneOffQuery()));
        case EClientMessageTag::CallReducer: return HashCombine(TagHash, ::GetTypeHash(ClientMessage.GetAsCallReducer()));
        case EClientMessageTag::CallProcedure: return HashCombine(TagHash, ::GetTypeHash(ClientMessage.GetAsCallProcedure()));
        default: return TagHash;
    }
}

namespace UE::SpacetimeDB
{
    UE_SPACETIMEDB_ENABLE_TARRAY(FClientMessageType);

    UE_SPACETIMEDB_TAGGED_ENUM(
        FClientMessageType,
        EClientMessageTag,
        MessageData,
        Subscribe, FSubscribeType,
        Unsubscribe, FUnsubscribeType,
        OneOffQuery, FOneOffQueryType,
        CallReducer, FCallReducerType,
        CallProcedure, FCallProcedureType
    );
}

UCLASS()
class SPACETIMEDBSDK_API UClientMessageBpLib : public UBlueprintFunctionLibrary
{
    GENERATED_BODY()

private:
    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ClientMessage")
    static FClientMessageType Subscribe(const FSubscribeType& InValue)
    {
        return FClientMessageType::Subscribe(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static bool IsSubscribe(const FClientMessageType& InValue) { return InValue.IsSubscribe(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static FSubscribeType GetAsSubscribe(const FClientMessageType& InValue)
    {
        return InValue.GetAsSubscribe();
    }

    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ClientMessage")
    static FClientMessageType Unsubscribe(const FUnsubscribeType& InValue)
    {
        return FClientMessageType::Unsubscribe(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static bool IsUnsubscribe(const FClientMessageType& InValue) { return InValue.IsUnsubscribe(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static FUnsubscribeType GetAsUnsubscribe(const FClientMessageType& InValue)
    {
        return InValue.GetAsUnsubscribe();
    }

    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ClientMessage")
    static FClientMessageType OneOffQuery(const FOneOffQueryType& InValue)
    {
        return FClientMessageType::OneOffQuery(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static bool IsOneOffQuery(const FClientMessageType& InValue) { return InValue.IsOneOffQuery(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static FOneOffQueryType GetAsOneOffQuery(const FClientMessageType& InValue)
    {
        return InValue.GetAsOneOffQuery();
    }

    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ClientMessage")
    static FClientMessageType CallReducer(const FCallReducerType& InValue)
    {
        return FClientMessageType::CallReducer(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static bool IsCallReducer(const FClientMessageType& InValue) { return InValue.IsCallReducer(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static FCallReducerType GetAsCallReducer(const FClientMessageType& InValue)
    {
        return InValue.GetAsCallReducer();
    }

    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ClientMessage")
    static FClientMessageType CallProcedure(const FCallProcedureType& InValue)
    {
        return FClientMessageType::CallProcedure(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static bool IsCallProcedure(const FClientMessageType& InValue) { return InValue.IsCallProcedure(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ClientMessage")
    static FCallProcedureType GetAsCallProcedure(const FClientMessageType& InValue)
    {
        return InValue.GetAsCallProcedure();
    }

};
