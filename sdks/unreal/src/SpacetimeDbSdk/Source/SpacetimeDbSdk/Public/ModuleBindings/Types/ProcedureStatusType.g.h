// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN YOUR MODULE SOURCE CODE INSTEAD.

#pragma once
#include "CoreMinimal.h"
#include "BSATN/UESpacetimeDB.h"
#include "Kismet/BlueprintFunctionLibrary.h"
#include "ProcedureStatusType.g.generated.h"

UENUM(BlueprintType)
enum class EProcedureStatusTag : uint8
{
    Returned,
    InternalError
};

USTRUCT(BlueprintType)
struct SPACETIMEDBSDK_API FProcedureStatusType
{
    GENERATED_BODY()

public:
    FProcedureStatusType() = default;

    TVariant<FString, TArray<uint8>> MessageData;

    UPROPERTY(BlueprintReadOnly)
    EProcedureStatusTag Tag = static_cast<EProcedureStatusTag>(0);

    static FProcedureStatusType Returned(const TArray<uint8>& Value)
    {
        FProcedureStatusType Obj;
        Obj.Tag = EProcedureStatusTag::Returned;
        Obj.MessageData.Set<TArray<uint8>>(Value);
        return Obj;
    }

    static FProcedureStatusType InternalError(const FString& Value)
    {
        FProcedureStatusType Obj;
        Obj.Tag = EProcedureStatusTag::InternalError;
        Obj.MessageData.Set<FString>(Value);
        return Obj;
    }

    FORCEINLINE bool IsReturned() const { return Tag == EProcedureStatusTag::Returned; }

    FORCEINLINE TArray<uint8> GetAsReturned() const
    {
        ensureMsgf(IsReturned(), TEXT("MessageData does not hold Returned!"));
        return MessageData.Get<TArray<uint8>>();
    }

    FORCEINLINE bool IsInternalError() const { return Tag == EProcedureStatusTag::InternalError; }

    FORCEINLINE FString GetAsInternalError() const
    {
        ensureMsgf(IsInternalError(), TEXT("MessageData does not hold InternalError!"));
        return MessageData.Get<FString>();
    }

    // Inline equality operators
    FORCEINLINE bool operator==(const FProcedureStatusType& Other) const
    {
        if (Tag != Other.Tag) return false;

        switch (Tag)
        {
            case EProcedureStatusTag::Returned:
                return GetAsReturned() == Other.GetAsReturned();
            case EProcedureStatusTag::InternalError:
                return GetAsInternalError() == Other.GetAsInternalError();
            default:
                return false;
        }
    }

    FORCEINLINE bool operator!=(const FProcedureStatusType& Other) const
    {
        return !(*this == Other);
    }
};

/**
 * Custom hash function for FProcedureStatusType.
 * Combines the hashes of all fields that are compared in operator==.
 * @param ProcedureStatusType The FProcedureStatusType instance to hash.
 * @return The combined hash value.
 */
FORCEINLINE uint32 GetTypeHash(const FProcedureStatusType& ProcedureStatus)
{
    const uint32 TagHash = GetTypeHash(static_cast<uint8>(ProcedureStatus.Tag));
    switch (ProcedureStatus.Tag)
    {
        case EProcedureStatusTag::Returned: return HashCombine(TagHash, ::GetTypeHash(ProcedureStatus.GetAsReturned()));
        case EProcedureStatusTag::InternalError: return HashCombine(TagHash, GetTypeHash(ProcedureStatus.GetAsInternalError()));
        default: return TagHash;
    }
}

namespace UE::SpacetimeDB
{
    UE_SPACETIMEDB_ENABLE_TARRAY(FProcedureStatusType);

    UE_SPACETIMEDB_TAGGED_ENUM(
        FProcedureStatusType,
        EProcedureStatusTag,
        MessageData,
        Returned, TArray<uint8>,
        InternalError, FString
    );
}

UCLASS()
class SPACETIMEDBSDK_API UProcedureStatusBpLib : public UBlueprintFunctionLibrary
{
    GENERATED_BODY()

private:
    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ProcedureStatus")
    static FProcedureStatusType Returned(const TArray<uint8>& InValue)
    {
        return FProcedureStatusType::Returned(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ProcedureStatus")
    static bool IsReturned(const FProcedureStatusType& InValue) { return InValue.IsReturned(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ProcedureStatus")
    static TArray<uint8> GetAsReturned(const FProcedureStatusType& InValue)
    {
        return InValue.GetAsReturned();
    }

    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ProcedureStatus")
    static FProcedureStatusType InternalError(const FString& InValue)
    {
        return FProcedureStatusType::InternalError(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ProcedureStatus")
    static bool IsInternalError(const FProcedureStatusType& InValue) { return InValue.IsInternalError(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ProcedureStatus")
    static FString GetAsInternalError(const FProcedureStatusType& InValue)
    {
        return InValue.GetAsInternalError();
    }

};
