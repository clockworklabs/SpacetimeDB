// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN YOUR MODULE SOURCE CODE INSTEAD.

#pragma once
#include "CoreMinimal.h"
#include "BSATN/UESpacetimeDB.h"
#include "Kismet/BlueprintFunctionLibrary.h"
#include "ModuleBindings/Types/PersistentTableRowsType.g.h"
#include "ModuleBindings/Types/EventTableRowsType.g.h"
#include "TableUpdateRowsType.g.generated.h"

UENUM(BlueprintType)
enum class ETableUpdateRowsTag : uint8
{
    PersistentTable,
    EventTable
};

USTRUCT(BlueprintType)
struct SPACETIMEDBSDK_API FTableUpdateRowsType
{
    GENERATED_BODY()

public:
    FTableUpdateRowsType() = default;

    TVariant<FEventTableRowsType, FPersistentTableRowsType> MessageData;

    UPROPERTY(BlueprintReadOnly)
    ETableUpdateRowsTag Tag = static_cast<ETableUpdateRowsTag>(0);

    static FTableUpdateRowsType PersistentTable(const FPersistentTableRowsType& Value)
    {
        FTableUpdateRowsType Obj;
        Obj.Tag = ETableUpdateRowsTag::PersistentTable;
        Obj.MessageData.Set<FPersistentTableRowsType>(Value);
        return Obj;
    }

    static FTableUpdateRowsType EventTable(const FEventTableRowsType& Value)
    {
        FTableUpdateRowsType Obj;
        Obj.Tag = ETableUpdateRowsTag::EventTable;
        Obj.MessageData.Set<FEventTableRowsType>(Value);
        return Obj;
    }

    FORCEINLINE bool IsPersistentTable() const { return Tag == ETableUpdateRowsTag::PersistentTable; }

    FORCEINLINE FPersistentTableRowsType GetAsPersistentTable() const
    {
        ensureMsgf(IsPersistentTable(), TEXT("MessageData does not hold PersistentTable!"));
        return MessageData.Get<FPersistentTableRowsType>();
    }

    FORCEINLINE bool IsEventTable() const { return Tag == ETableUpdateRowsTag::EventTable; }

    FORCEINLINE FEventTableRowsType GetAsEventTable() const
    {
        ensureMsgf(IsEventTable(), TEXT("MessageData does not hold EventTable!"));
        return MessageData.Get<FEventTableRowsType>();
    }

    // Inline equality operators
    FORCEINLINE bool operator==(const FTableUpdateRowsType& Other) const
    {
        if (Tag != Other.Tag) return false;

        switch (Tag)
        {
            case ETableUpdateRowsTag::PersistentTable:
                return GetAsPersistentTable() == Other.GetAsPersistentTable();
            case ETableUpdateRowsTag::EventTable:
                return GetAsEventTable() == Other.GetAsEventTable();
            default:
                return false;
        }
    }

    FORCEINLINE bool operator!=(const FTableUpdateRowsType& Other) const
    {
        return !(*this == Other);
    }
};

/**
 * Custom hash function for FTableUpdateRowsType.
 * Combines the hashes of all fields that are compared in operator==.
 * @param TableUpdateRowsType The FTableUpdateRowsType instance to hash.
 * @return The combined hash value.
 */
FORCEINLINE uint32 GetTypeHash(const FTableUpdateRowsType& TableUpdateRows)
{
    const uint32 TagHash = GetTypeHash(static_cast<uint8>(TableUpdateRows.Tag));
    switch (TableUpdateRows.Tag)
    {
        case ETableUpdateRowsTag::PersistentTable: return HashCombine(TagHash, ::GetTypeHash(TableUpdateRows.GetAsPersistentTable()));
        case ETableUpdateRowsTag::EventTable: return HashCombine(TagHash, ::GetTypeHash(TableUpdateRows.GetAsEventTable()));
        default: return TagHash;
    }
}

namespace UE::SpacetimeDB
{
    UE_SPACETIMEDB_ENABLE_TARRAY(FTableUpdateRowsType);

    UE_SPACETIMEDB_TAGGED_ENUM(
        FTableUpdateRowsType,
        ETableUpdateRowsTag,
        MessageData,
        PersistentTable, FPersistentTableRowsType,
        EventTable, FEventTableRowsType
    );
}

UCLASS()
class SPACETIMEDBSDK_API UTableUpdateRowsBpLib : public UBlueprintFunctionLibrary
{
    GENERATED_BODY()

private:
    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|TableUpdateRows")
    static FTableUpdateRowsType PersistentTable(const FPersistentTableRowsType& InValue)
    {
        return FTableUpdateRowsType::PersistentTable(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|TableUpdateRows")
    static bool IsPersistentTable(const FTableUpdateRowsType& InValue) { return InValue.IsPersistentTable(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|TableUpdateRows")
    static FPersistentTableRowsType GetAsPersistentTable(const FTableUpdateRowsType& InValue)
    {
        return InValue.GetAsPersistentTable();
    }

    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|TableUpdateRows")
    static FTableUpdateRowsType EventTable(const FEventTableRowsType& InValue)
    {
        return FTableUpdateRowsType::EventTable(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|TableUpdateRows")
    static bool IsEventTable(const FTableUpdateRowsType& InValue) { return InValue.IsEventTable(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|TableUpdateRows")
    static FEventTableRowsType GetAsEventTable(const FTableUpdateRowsType& InValue)
    {
        return InValue.GetAsEventTable();
    }

};
