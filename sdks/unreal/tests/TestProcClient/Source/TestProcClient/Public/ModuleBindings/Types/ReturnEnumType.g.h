// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN YOUR MODULE SOURCE CODE INSTEAD.

#pragma once
#include "CoreMinimal.h"
#include "BSATN/UESpacetimeDB.h"
#include "Kismet/BlueprintFunctionLibrary.h"
#include "ReturnEnumType.g.generated.h"

UENUM(BlueprintType)
enum class EReturnEnumTag : uint8
{
    A,
    B
};

USTRUCT(BlueprintType)
struct TESTPROCCLIENT_API FReturnEnumType
{
    GENERATED_BODY()

public:
    FReturnEnumType() = default;

    TVariant<uint32, FString> MessageData;

    UPROPERTY(BlueprintReadOnly)
    EReturnEnumTag Tag = static_cast<EReturnEnumTag>(0);

    static FReturnEnumType A(const uint32& Value)
    {
        FReturnEnumType Obj;
        Obj.Tag = EReturnEnumTag::A;
        Obj.MessageData.Set<uint32>(Value);
        return Obj;
    }

    static FReturnEnumType B(const FString& Value)
    {
        FReturnEnumType Obj;
        Obj.Tag = EReturnEnumTag::B;
        Obj.MessageData.Set<FString>(Value);
        return Obj;
    }

    FORCEINLINE bool IsA() const { return Tag == EReturnEnumTag::A; }

    FORCEINLINE uint32 GetAsA() const
    {
        ensureMsgf(IsA(), TEXT("MessageData does not hold A!"));
        return MessageData.Get<uint32>();
    }

    FORCEINLINE bool IsB() const { return Tag == EReturnEnumTag::B; }

    FORCEINLINE FString GetAsB() const
    {
        ensureMsgf(IsB(), TEXT("MessageData does not hold B!"));
        return MessageData.Get<FString>();
    }

    // Inline equality operators
    FORCEINLINE bool operator==(const FReturnEnumType& Other) const
    {
        if (Tag != Other.Tag) return false;

        switch (Tag)
        {
            case EReturnEnumTag::A:
                return GetAsA() == Other.GetAsA();
            case EReturnEnumTag::B:
                return GetAsB() == Other.GetAsB();
            default:
                return false;
        }
    }

    FORCEINLINE bool operator!=(const FReturnEnumType& Other) const
    {
        return !(*this == Other);
    }
};

/**
 * Custom hash function for FReturnEnumType.
 * Combines the hashes of all fields that are compared in operator==.
 * @param ReturnEnumType The FReturnEnumType instance to hash.
 * @return The combined hash value.
 */
FORCEINLINE uint32 GetTypeHash(const FReturnEnumType& ReturnEnum)
{
    const uint32 TagHash = GetTypeHash(static_cast<uint8>(ReturnEnum.Tag));
    switch (ReturnEnum.Tag)
    {
        case EReturnEnumTag::A: return HashCombine(TagHash, GetTypeHash(ReturnEnum.GetAsA()));
        case EReturnEnumTag::B: return HashCombine(TagHash, GetTypeHash(ReturnEnum.GetAsB()));
        default: return TagHash;
    }
}

namespace UE::SpacetimeDB
{
    UE_SPACETIMEDB_ENABLE_TARRAY(FReturnEnumType);

    UE_SPACETIMEDB_TAGGED_ENUM(
        FReturnEnumType,
        EReturnEnumTag,
        MessageData,
        A, uint32,
        B, FString
    );
}

UCLASS()
class TESTPROCCLIENT_API UReturnEnumBpLib : public UBlueprintFunctionLibrary
{
    GENERATED_BODY()

private:
    // NOTE: Not exposed to Blueprint because uint32 types are not Blueprint-compatible
    static FReturnEnumType A(const uint32& InValue)
    {
        return FReturnEnumType::A(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ReturnEnum")
    static bool IsA(const FReturnEnumType& InValue) { return InValue.IsA(); }

    // NOTE: Not exposed to Blueprint because uint32 types are not Blueprint-compatible
    static uint32 GetAsA(const FReturnEnumType& InValue)
    {
        return InValue.GetAsA();
    }

    UFUNCTION(BlueprintCallable, Category = "SpacetimeDB|ReturnEnum")
    static FReturnEnumType B(const FString& InValue)
    {
        return FReturnEnumType::B(InValue);
    }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ReturnEnum")
    static bool IsB(const FReturnEnumType& InValue) { return InValue.IsB(); }

    UFUNCTION(BlueprintPure, Category = "SpacetimeDB|ReturnEnum")
    static FString GetAsB(const FReturnEnumType& InValue)
    {
        return InValue.GetAsB();
    }

};
