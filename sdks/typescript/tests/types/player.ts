// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN RUST INSTEAD.

// @ts-ignore
import {
  __SPACETIMEDB__,
  AlgebraicType,
  ProductType,
  ProductTypeElement,
  SumType,
  SumTypeVariant,
  IDatabaseTable,
  AlgebraicValue,
  ReducerEvent,
} from "../../src/index";
// @ts-ignore
import { Point } from "./point";

export class Player extends IDatabaseTable {
  public static tableName = "Player";
  public ownerId: string;
  public name: string;
  public location: Point;

  public static primaryKey: string | undefined = "owner_id";

  constructor(ownerId: string, name: string, location: Point) {
    super();
    this.ownerId = ownerId;
    this.name = name;
    this.location = location;
  }

  public static serialize(value: Player): object {
    return [value.ownerId, value.name, Point.serialize(value.location)];
  }

  public static getAlgebraicType(): AlgebraicType {
    return AlgebraicType.createProductType([
      new ProductTypeElement(
        "owner_id",
        AlgebraicType.createStringType()
      ),
      new ProductTypeElement(
        "name",
        AlgebraicType.createStringType()
      ),
      new ProductTypeElement("location", Point.getAlgebraicType()),
    ]);
  }

  public static fromValue(value: AlgebraicValue): Player {
    let productValue = value.asProductValue();
    let __owner_id = productValue.elements[0].asString();
    let __name = productValue.elements[1].asString();
    let __location = Point.fromValue(productValue.elements[2]);
    return new this(__owner_id, __name, __location);
  }

  public static count(): number {
    return __SPACETIMEDB__.clientDB.getTable("Player").count();
  }

  public static all(): Player[] {
    return __SPACETIMEDB__.clientDB
      .getTable("Player")
      .getInstances() as unknown as Player[];
  }

  public static filterByOwnerId(value: string): Player | null {
    for (let instance of __SPACETIMEDB__.clientDB
      .getTable("Player")
      .getInstances()) {
      if (instance.ownerId === value) {
        return instance;
      }
    }
    return null;
  }

  public static filterByName(value: string): Player[] {
    let result: Player[] = [];
    for (let instance of __SPACETIMEDB__.clientDB
      .getTable("Player")
      .getInstances()) {
      if (instance.name === value) {
        result.push(instance);
      }
    }
    return result;
  }

  public static onInsert(
    callback: (value: Player, reducerEvent: ReducerEvent | undefined) => void
  ) {
    __SPACETIMEDB__.clientDB.getTable("Player").onInsert(callback);
  }

  public static onUpdate(
    callback: (
      oldValue: Player,
      newValue: Player,
      reducerEvent: ReducerEvent | undefined
    ) => void
  ) {
    __SPACETIMEDB__.clientDB.getTable("Player").onUpdate(callback);
  }

  public static onDelete(
    callback: (value: Player, reducerEvent: ReducerEvent | undefined) => void
  ) {
    __SPACETIMEDB__.clientDB.getTable("Player").onDelete(callback);
  }

  public static removeOnInsert(
    callback: (value: Player, reducerEvent: ReducerEvent | undefined) => void
  ) {
    __SPACETIMEDB__.clientDB.getTable("Player").removeOnInsert(callback);
  }

  public static removeOnUpdate(
    callback: (
      oldValue: Player,
      newValue: Player,
      reducerEvent: ReducerEvent | undefined
    ) => void
  ) {
    __SPACETIMEDB__.clientDB.getTable("Player").removeOnUpdate(callback);
  }

  public static removeOnDelete(
    callback: (value: Player, reducerEvent: ReducerEvent | undefined) => void
  ) {
    __SPACETIMEDB__.clientDB.getTable("Player").removeOnDelete(callback);
  }
}

export default Player;

__SPACETIMEDB__.registerComponent("Player", Player);
