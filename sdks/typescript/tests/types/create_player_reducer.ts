// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN RUST INSTEAD.

// @ts-ignore
import {
  __SPACETIMEDB__,
  AlgebraicType,
  ProductType,
  ProductTypeElement,
  DatabaseTable,
  AlgebraicValue,
  ReducerArgsAdapter,
  SumTypeVariant,
  Serializer,
  Identity,
  Address,
  ReducerEvent,
  Reducer,
  SpacetimeDBClient,
} from "../../src/index";
// @ts-ignore
import { Point } from "./point";

export class CreatePlayerReducer extends Reducer {
  public static reducerName: string = "CreatePlayer";
  public static call(_name: string, _location: Point) {
    this.getReducer().call(_name, _location);
  }

  public call(_name: string, _location: Point) {
    const serializer = this.client.getSerializer();
    let _nameType = AlgebraicType.createStringType();
    serializer.write(_nameType, _name);
    let _locationType = Point.getAlgebraicType();
    serializer.write(_locationType, _location);
    this.client.call("create_player", serializer);
  }

  public static deserializeArgs(adapter: ReducerArgsAdapter): any[] {
    let nameType = AlgebraicType.createStringType();
    let nameValue = AlgebraicValue.deserialize(nameType, adapter.next());
    let name = nameValue.asString();
    let locationType = Point.getAlgebraicType();
    let locationValue = AlgebraicValue.deserialize(
      locationType,
      adapter.next()
    );
    let location = Point.fromValue(locationValue);
    return [name, location];
  }

  public static on(
    callback: (
      reducerEvent: ReducerEvent,
      _name: string,
      _location: Point
    ) => void
  ) {
    this.getReducer().on(callback);
  }
  public on(
    callback: (
      reducerEvent: ReducerEvent,
      _name: string,
      _location: Point
    ) => void
  ) {
    this.client.on("reducer:CreatePlayer", callback);
  }
}

export default CreatePlayerReducer;
