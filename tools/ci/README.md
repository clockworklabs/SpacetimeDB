# SpacetimeDB's cargo ci

## Overview

This document provides an overview of the `cargo ci` command-line tool, and documentation for each of its subcommands and options.

## `cargo ci`

SpacetimeDB CI tasks

This tool provides several subcommands for automating CI workflows in SpacetimeDB.

It may be invoked via `cargo ci <subcommand>`, or simply `cargo ci` to run all subcommands in sequence. It is mostly designed to be run in CI environments via the github workflows, but can also be run locally

**Usage:**
```bash
Usage: cargo ci [OPTIONS] [COMMAND]
```

**Options:**

- `--skip`: Skip specified subcommands when running all

When no subcommand is specified, all subcommands are run in sequence. This option allows specifying subcommands to skip when running all. For example, to skip the `unreal-tests` subcommand, use `--skip unreal-tests`.

- `--help`: Print help (see a summary with '-h')

### `test`

Runs tests

Runs rust tests, codegens csharp sdk and runs csharp tests. This does not include Unreal tests. This expects to run in a clean git state.

**Usage:**
```bash
Usage: test
```

**Options:**

- `--help`: Print help (see a summary with '-h')

### `lint`

Lints the codebase

Runs rustfmt, clippy, csharpier and generates rust docs to ensure there are no warnings.

**Usage:**
```bash
Usage: lint
```

**Options:**

- `--help`: Print help (see a summary with '-h')

### `wasm-bindings`

Tests Wasm bindings

Runs tests for the codegen crate and builds a test module with the wasm bindings.

**Usage:**
```bash
Usage: wasm-bindings
```

**Options:**

- `--help`: Print help (see a summary with '-h')

### `smoketests`

Runs smoketests

Executes the smoketests suite with some default exclusions.

**Usage:**
```bash
Usage: smoketests [ARGS]...
```

**Options:**

- `args`: Additional arguments to pass to the smoketests runner. These are usually set by the CI environment, such as `-- --docker`
- `--help`: Print help (see a summary with '-h')

### `update-flow`

Tests the update flow

Tests the self-update flow by building the spacetimedb-update binary for the specified target, by default the current target, and performing a self-install into a temporary directory.

**Usage:**
```bash
Usage: update-flow [OPTIONS]
```

**Options:**

- `--target`: Target triple to build for, by default the current target. Used by github workflows to check the update flow on multiple platforms.
- `--github-token-auth`: Whether to enable github token authentication feature when building the update binary. By default this is enabled.
- `--help`: Print help (see a summary with '-h')

### `unreal-tests`

Run Unreal Engine related tests

This assumes the UE4 environment is already set up

This is designed to run in the github actions environment, but should work locally if the Unreal environment is set up correctly.

**Usage:**
```bash
Usage: unreal-tests
```

**Options:**

- `--help`: Print help (see a summary with '-h')

### `cli-docs`

**Usage:**
```bash
Usage: cli-docs
```

**Options:**

- `--help`: 

### `self-docs`

**Usage:**
```bash
Usage: self-docs [OPTIONS]
```

**Options:**

- `--check`: Only check for changes, do not generate the docs
- `--help`: Print help (see a summary with '-h')

### `help`

**Usage:**
```bash
Usage: help [COMMAND]...
```

**Options:**

- `subcommand`: 


---

This document is auto-generated by running:

```bash
cargo ci self-docs
```